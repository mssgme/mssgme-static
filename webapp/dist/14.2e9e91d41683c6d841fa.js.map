{"version":3,"sources":["webpack:////drone/src/packages/userpage-core/src/landings/UI/LightBox/LightBox.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/LightBox/LightBox.js"],"names":["SwiperCore","use","Pagination","Navigation","Lazy","animate","from","to","transition","startAnimation","stop","LightBox","_ref","images","activeIndex","onClose","onClosing","getMediaSizeUrl","useUploads","opacity","useMotionValue","hasPagination","length","navigationPrevRef","React","useRef","navigationNextRef","handleClose","useCallback","type","stiffness","onComplete","useEffect","ReactDom","createPortal","createElement","motion","div","className","styles","style","onClick","FiX","size","color","Swiper","initialSlide","spaceBetween","slidesPerView","allowTouchMove","pagination","clickable","clickableClass","bulletActiveClass","navigation","prevEl","current","undefined","nextEl","speed","watchOverflow","loop","lazy","loadPrevNext","preloaderClass","loadedClass","onInit","swiper","params","update","map","_ref2","index","url","annotation","SwiperSlide","key","_ref3","isActive","cn","data-src","alt","LoadingIndicator","Fragment","ref","FiChevronLeft","FiChevronRight","document","querySelector"],"mappings":"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","file":"14.2e9e91d41683c6d841fa.js","sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3UnsPA33\",\"closeBtn\":\"TW1CxUSd\",\"content\":\"_3NFe3f7x\",\"swiper\":\"_3xdU4SQn\",\"slide\":\"_2fJyzQjw\",\"slideContent\":\"_1391-in3\",\"active\":\"_2XVU0sRo\",\"annotation\":\"_3gGtYBI6\",\"imageBox\":\"umIckdR4\",\"loaded\":\"DDXAPWVX\",\"closableOverlay\":\"_2NAXoaZ6\",\"noPagination\":\"_10iPQpY1\",\"reveal\":\"_3kpnATkb\",\"clickablePagination\":\"_1VOFxAHM\",\"activeBullet\":\"_2p88NgvN\",\"navButton\":\"_3wIZXXAw\",\"prev\":\"YRnAaQCN\",\"next\":\"J-HbYO3z\",\"preloader\":\"ohbMf0Ih\"};","import cn from 'classnames';\nimport ReactDom from 'react-dom';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect } from 'react';\nimport SwiperCore, { Pagination, Navigation, Lazy } from 'swiper';\nimport { Swiper, SwiperSlide } from 'swiper/react';\nimport { FiX, FiChevronLeft, FiChevronRight } from 'react-icons/fi';\nimport { motion, startAnimation, useMotionValue } from 'framer-motion';\n\nimport { LoadingIndicator } from '@mssgme/ui';\nimport { useUploads } from '../../hooks';\n\nimport styles from './LightBox.module.scss';\n\nSwiperCore.use([Pagination, Navigation, Lazy]);\n\nconst animate = (from, to, transition) => {\n    void startAnimation('', from, to, transition);\n\n    return {\n        stop: () => from.stop(),\n    };\n};\n\nexport default function LightBox({ images, activeIndex, onClose, onClosing }) {\n    const { getMediaSizeUrl } = useUploads();\n    const opacity = useMotionValue(0);\n    const hasPagination = images.length > 1;\n    const navigationPrevRef = React.useRef(null);\n    const navigationNextRef = React.useRef(null);\n\n    const handleClose = useCallback(() => {\n        onClosing && onClosing();\n\n        animate(opacity, 0, {\n            type: 'spring',\n            stiffness: 100,\n            onComplete: onClose,\n        });\n    }, [onClose, onClosing]);\n\n    useEffect(() => {\n        const controls = animate(opacity, 1, {\n            type: 'spring',\n            stiffness: 100,\n        });\n\n        return controls.stop;\n    }, []);\n\n    return ReactDom.createPortal(\n        <motion.div className={styles.root} style={{ opacity }}>\n            <div className={styles.closeBtn} onClick={handleClose}>\n                <FiX size=\"30\" color=\"#f5f5f5\" />\n            </div>\n            <div className={styles.content}>\n                <Swiper\n                    className={styles.swiper}\n                    initialSlide={activeIndex}\n                    spaceBetween={0}\n                    slidesPerView={1}\n                    allowTouchMove={hasPagination}\n                    pagination={\n                        hasPagination\n                            ? {\n                                clickable: true,\n                                clickableClass: styles.clickablePagination,\n                                bulletActiveClass: styles.activeBullet,\n                            }\n                            : false\n                    }\n                    navigation={{\n                        prevEl: navigationPrevRef.current ? navigationPrevRef.current : undefined,\n                        nextEl: navigationNextRef.current ? navigationNextRef.current : undefined,\n                    }}\n                    speed={600}\n                    watchOverflow={images.length > 1}\n                    loop={images.length > 1}\n                    lazy={{ loadPrevNext: true, preloaderClass: styles.preloader, loadedClass: styles.loaded }}\n                    onInit={(swiper) => {\n                        swiper.params.navigation.prevEl = navigationPrevRef.current;\n                        swiper.params.navigation.nextEl = navigationNextRef.current;\n                        swiper.navigation.update();\n                    }}\n                >\n                    {images.map(({ url, annotation }, index) => (\n                        <SwiperSlide key={index} className={styles.slide}>\n                            {({ isActive }) => (\n                                <div\n                                    className={cn({\n                                        [styles.slideContent]: true,\n                                        [styles.active]: isActive,\n                                    })}\n                                >\n                                    <div\n                                        className={cn({\n                                            [styles.imageBox]: true,\n                                            [styles.noPagination]: images.length === 1,\n                                        })}\n                                    >\n                                        <div className={styles.closableOverlay} onClick={handleClose} />\n                                        <img\n                                            data-src={getMediaSizeUrl(url)}\n                                            className=\"swiper-lazy\"\n                                            alt={annotation || 'Image'}\n                                        />\n                                        <div className={styles.preloader}>\n                                            <LoadingIndicator />\n                                        </div>\n                                    </div>\n                                    {annotation && <div className={styles.annotation}>{annotation}</div>}\n                                </div>\n                            )}\n                        </SwiperSlide>\n                    ))}\n                    {hasPagination && (\n                        <>\n                            <div className={cn(styles.navButton, styles.prev)} ref={navigationPrevRef}>\n                                <FiChevronLeft size={24} />\n                            </div>\n                            <div className={cn(styles.navButton, styles.next)} ref={navigationNextRef}>\n                                <FiChevronRight size={24} />\n                            </div>\n                        </>\n                    )}\n                </Swiper>\n            </div>\n        </motion.div>,\n        document.querySelector('body')\n    );\n}\n\nLightBox.propTypes = {\n    images: PropTypes.array.isRequired,\n    activeIndex: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onClosing: PropTypes.func,\n};\n"],"sourceRoot":""}