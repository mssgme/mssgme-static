{"version":3,"sources":["webpack:////drone/src/packages/userpage-core/src/landings/hooks/useContrastingColor.js","webpack:////drone/src/packages/shared/src/landings/feedbacks.js","webpack:////drone/src/packages/lib/src/feedbackApi.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/DynamicFormInputs.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/DynamicFormInputs.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/SubscriptionForm.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/SubscriptionForm.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGridItem.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGridItem.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesModal.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesModal.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGrid.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGrid.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/index.js","webpack:////drone/src/packages/icons/src/dist-icons/SearchIcon.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useProductsApi.js","webpack:////drone/src/node_modules/react-use/esm/useDebounce.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/ButtonsMenu.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/ButtonsMenu.js","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/TextButton.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/TextButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/FilterMenu.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/FilterMenu.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/CollectionsBar.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/Products.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/Products.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PassthroughRoute.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/PageProductsRouting.js"],"names":["useContrastingPageColor","theme","colors","backgroundImage","backgroundImageOpacity","style","backgroundColor","usePageTheme","isLightBG","isLightColor","isLightContrasting","buttonBackground","hasImage","TinyColor","equals","background","color","useBasePageColor","percent","arguments","length","undefined","backgroundDimmed","darken","lighten","toHexString","mapDynamicFieldToName","_ref","index","_id","FeedbackApi","BaseApi","submit","workspaceId","websiteId","payload","this","post","handleEnterKey","e","key","preventDefault","DynamicFormInput","input","as","type","defaultMaxSize","maxLength","size","isTextField","React","createElement","TextField","name","label","required","wrapAs","component","Input","Textarea","onKeyPress","inputTypes","email","phone","text","DynamicFormInputs","_ref2","block","rest","cls","styles","root","gridMode","items","map","item","SubscriptionFormContent","onSubmit","rawSubmit","interactive","sent","setSent","useState","validationSchema","useMemo","object","reduce","acc","field","validator","string","trim","max","__t","matches","message","excludeEmptyString","mapDynamicInputsToValidationSchema","FormTag","loading","error","useAsyncFn","async","values","pairs","_values$item$_id","value","filter","errors","Object","entries","_ref3","formik","useEnhancedFormik","initialValues","handleSentModalClosed","useCallback","resetForm","useEffect","hasUrl","sentUrl","timer","setTimeout","window","location","clearTimeout","useDeepCompareEffect","setErrors","FormikProvider","id","className","buttonContainer","SubmitButton","ThemedButton","isInitialHidden","fullWidth","isFetching","disabled","buttonTextColor","borderRadius","sendLabel","AnimatePresence","ThemedModal","compact","overlay","showHeader","onClose","handleClose","successContent","closeIcon","onClick","FiX","FiCheck","icon","sentText","SubscriptionForm","_ref4","baseStyle","useBlockTheme","website","useWebsiteData","combined","handleSubmit","feedbackApi","workspace","blockId","data","submitEvent","CustomEvent","detail","document","dispatchEvent","BlockBase","_extends","defaultProps","kind","SubscriptionFormBlockKind","ServicesGridItem","themeStyles","getMediaSizeUrl","useUploads","photoUrl","MediaSizes","Half","cn","thumbnail","LazyImage","src","alt","title","emptyPlaceholder","IoMdImage","meta","price","formattedDiscount","discount","discountPrice","amount","lineThrough","formatted","animate","from","to","transition","startAnimation","stop","ServicesModal","services","contacts","activeIndex","onClosing","handleHash","page","usePageData","history","useHistory","opacity","useMotionValue","hasMultipleServices","contactBlocks","enabled","blocks","find","handleSlideChange","swiper","replace","realIndex","pathname","stiffness","onComplete","ReactDom","createPortal","motion","div","Swiper","allowTouchMove","initialSlide","noSwipingClass","speed","pagination","onInit","onSlideChange","service","assign","_ref5","isActive","isPrev","isNext","ServiceContent","querySelector","ServicesGrid","sortable","delay","useLocation","hashId","hash","slice","slideIndexFromHash","findIndex","hasSlideFromHash","Number","isInteger","setPage","isDelayed","setDelayed","isServicesModal","setIsServicesModal","currentServiceIndex","setCurrentServiceIndex","total","hasMore","Math","ceil","sliced","handleLoadMore","old","openServicesModal","closingServicesModal","closeServicesModal","useTimeoutFn","Spinner","lazy","servicesList","pointerEvents","moreButtonContainer","MoreButton","ServicesGridBlockKind","SearchIcon","props","svgRef","IconBase","fill","viewBox","ref","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ForwardRef","useProductsApi","query","isMounted","useMountedState","store","setStore","hasNext","next","publishedCount","pending","run","getProducts","useFetching","results","productsStore","productsApi","list","limit","resetStore","collection","collections","include","published","prevProducts","concat","fn","ms","deps","_a","isReady","cancel","reset","useDebounce","catch","handleError","ButtonsMenu","activeCollectionId","onSelect","generateUrl","useNavigationUtils","hasLeftBtn","moveLeft","hasRightBtn","moveRight","moveTo","useHorizontalTabbedScroll","baseUrl","themeStyle","button","productsCategoryTextColor","buttonActive","arrowButton","arrowBg","isTabbed","filterMode","ItemTag","Link","handleClick","_e$target$dataset","_items$index","slug","target","dataset","col","data-index","data-slug","default","TextButton","PureButton","FilterMenuItem","active","publishedProductsCount","FilterMenu","useRef","isOpen","toggle","useToggle","selected","isMatchId","useClickAway","handleSelect","aria-pressed","ChevronDownIcon","Fade","in","CollectionsBar","Item","product","baseProductUrl","fromCollection","state","ProductItem","tag","Products","_showCollections$","isMobileMode","collectionIds","get","activeCollections","showCollections","Boolean","setActiveCollectionId","options","pick","isMobile","keyHash","handleMore","defaultStyle","getFromCollection","keys","cols","includes","_showCollections$2","firstId","ProductsBlockKind","PassthroughRoute","path","exact","Component","makeProps","p","render","match","params","Route","PageProductsRouting","contexts","productSlug","collectionSlug","defaultCollectionId","Fragment","CollectionView","ProductView","UserOrdersPage","UserOrderPage","OrderPage","PaymentStatusPage"],"mappings":"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","file":"9.af364d7fe90766746dc4.js","sourcesContent":["import TinyColor from 'tinycolor2';\nimport { isLightColor } from '@mssgme/helpers';\n\nimport { usePageTheme } from './useWebsiteTheme';\n\nexport const useContrastingPageColor = () => {\n    const {\n        theme: { colors, backgroundImage, backgroundImageOpacity },\n        style: { backgroundColor },\n    } = usePageTheme(true, true);\n    const isLightBG = isLightColor(backgroundColor);\n    const isLightContrasting = isLightColor(colors.buttonBackground);\n    const isBgUntouched = TinyColor.equals(backgroundColor, colors.background);\n    const hasImage = !!backgroundImage && backgroundImageOpacity > 0;\n\n    if (isBgUntouched && !(isLightBG && isLightContrasting)) {\n        return {\n            color: colors.buttonBackground,\n            hasImage,\n            backgroundColor,\n        };\n    }\n\n    return {\n        color: isLightBG ? '#333' : '#eee',\n        hasImage,\n        backgroundColor,\n    };\n};\nexport const useDimmedPageColor = (percent = 10) => {\n    const {\n        style: { backgroundColor },\n    } = usePageTheme(true, true);\n    const color = new TinyColor(backgroundColor);\n    const isLightBG = isLightColor(color);\n\n    return (isLightBG ? color.darken(percent) : color.lighten(percent)).toHexString();\n};\nexport const useBasePageColor = (percent = 10) => {\n    const {\n        style: { backgroundColor },\n    } = usePageTheme(true, true);\n    const color = new TinyColor(backgroundColor);\n    const isLightBG = isLightColor(color);\n\n    return {\n        isLightBG,\n        backgroundColor,\n        backgroundDimmed: (isLightBG ? color.darken(percent) : color.lighten(percent)).toHexString(),\n    };\n};\n","import { object, string } from 'yup';\n\nimport { __t } from '../trans';\n\nexport const defaultDynamicFieldLengthLimit = 250;\nexport const mapDynamicFieldToName = ({ _id }, index) => _id || `field-${index}`;\nexport const mapDynamicInputsToValidationSchema = ({ items }) =>\n    object({\n        ...items.reduce((acc, item, index) => {\n            const field = mapDynamicFieldToName(item, index);\n            let validator = string()\n                .trim()\n                .max(item.size || defaultDynamicFieldLengthLimit, __t('field_too_long'));\n\n            if (item.required) {\n                validator = validator.required(__t('field_required'));\n            }\n\n            switch (item.type) {\n                case 'email': {\n                    validator = validator.email(__t('field_email'));\n\n                    break;\n                }\n                case 'phone': {\n                    validator = validator.matches(/\\+?[\\d\\-\\s()]{5,}/, {\n                        name: 'phone',\n                        message: __t('field_phone'),\n                        excludeEmptyString: true,\n                    });\n\n                    break;\n                }\n            }\n\n            acc[field] = validator;\n\n            return acc;\n        }, {}),\n    });\n","import { BaseApi } from './baseApi';\n\nexport class FeedbackApi extends BaseApi {\n    submit(workspaceId, websiteId, payload) {\n        return this.post(`/workspaces/${workspaceId}/websites/${websiteId}/feedback`, payload);\n    }\n}\n\nexport default ((options) => new FeedbackApi(options))();\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"qsFFCJh2\"};","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { mapDynamicFieldToName } from '@mssgme/shared';\nimport { cls } from '@mssgme/helpers';\nimport { Input, Textarea } from '@mssgme/ui';\nimport { TextField } from '../Inputs';\n\nimport styles from './DynamicFormInputs.scss';\n\nconst handleEnterKey = (e) => {\n    if (e.key === 'Enter') {\n        e.preventDefault();\n    }\n};\n\nexport const DynamicFormInput = ({ index, input, as, type, defaultMaxSize, theme }) => {\n    const maxLength = input.size || defaultMaxSize;\n    const isTextField = maxLength <= 250;\n\n    return (\n        <TextField\n            name={mapDynamicFieldToName(input, index)}\n            label={input.label}\n            required={input.required}\n            maxLength={maxLength}\n            wrapAs={as}\n            component={isTextField ? Input : Textarea}\n            type={type || 'text'}\n            onKeyPress={isTextField ? handleEnterKey : undefined}\n            theme={theme}\n        />\n    );\n};\n\nDynamicFormInput.propTypes = {\n    input: PropTypes.shape({\n        _id: PropTypes.string,\n        label: PropTypes.string,\n        required: PropTypes.bool,\n        size: PropTypes.number,\n    }).isRequired,\n    index: PropTypes.number.isRequired,\n    as: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType]),\n    type: PropTypes.string,\n    defaultMaxSize: PropTypes.number.isRequired,\n    theme: PropTypes.object,\n};\n\nconst inputTypes = {\n    name: 'text',\n    email: 'email',\n    phone: 'tel',\n    text: 'text',\n};\n\nexport const DynamicFormInputs = ({ block, theme, defaultMaxSize, ...rest }) => {\n    return (\n        <ul {...cls([styles.root, styles[theme.gridMode]], rest)}>\n            {block.items.map((item, index) => (\n                <DynamicFormInput\n                    as=\"li\"\n                    key={item._id || index}\n                    index={index}\n                    input={item}\n                    type={inputTypes[item.type]}\n                    defaultMaxSize={defaultMaxSize}\n                    theme={theme}\n                />\n            ))}\n        </ul>\n    );\n};\n\nDynamicFormInputs.propTypes = {\n    block: PropTypes.shape({\n        items: PropTypes.arrayOf(\n            PropTypes.shape({\n                _id: PropTypes.string,\n                label: PropTypes.string,\n                required: PropTypes.bool,\n                size: PropTypes.number,\n            })\n        ).isRequired,\n    }).isRequired,\n    theme: PropTypes.object.isRequired,\n    defaultMaxSize: PropTypes.number.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"buttonContainer\":\"_3QdNWA4B\",\"successContent\":\"tKDo6X2R\",\"icon\":\"_3JBv0Shf\",\"closeIcon\":\"co2bzcvS\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useAsyncFn, useDeepCompareEffect } from 'react-use';\nimport { AnimatePresence } from 'framer-motion';\nimport { FiCheck, FiX } from 'react-icons/fi';\n\nimport { cls } from '@mssgme/helpers';\nimport {\n    __t,\n    SubscriptionFormBlockKind,\n    mapDynamicInputsToValidationSchema,\n    mapDynamicFieldToName,\n    defaultDynamicFieldLengthLimit,\n} from '@mssgme/shared';\nimport { feedbackApi } from '@mssgme/lib';\nimport { FormikProvider, LandingsPropTypes, SubmitButton, useEnhancedFormik } from '@mssgme/ui';\n\nimport { useBlockTheme, useWebsiteData } from '../../../hooks';\nimport { ThemedButton, ThemedModal, DynamicFormInputs } from '../../../UI';\nimport { BlockBase } from '../BlockBase';\n\nimport styles from './SubscriptionForm.scss';\n\nexport const SubscriptionFormContent = ({ block, theme, onSubmit: rawSubmit, interactive }) => {\n    const [sent, setSent] = useState(null);\n    const validationSchema = useMemo(() => mapDynamicInputsToValidationSchema(block), [block]);\n    const FormTag = interactive ? 'form' : 'div';\n\n    const [{ loading, error }, onSubmit] = useAsyncFn(\n        async (values) => {\n            if (false === (await rawSubmit(values))) {\n                return;\n            }\n\n            const items = block.items.map((item, index) => {\n                const field = mapDynamicFieldToName(item, index);\n                const value = values[item._id] ?? values[field];\n\n                return {\n                    key: field,\n                    label: item.label,\n                    value,\n                };\n            });\n            const pairs = items.filter(({ value }) => value);\n\n            setSent(pairs);\n        },\n        [rawSubmit]\n    );\n\n    const errors = Object.entries(error?.errors || {}).reduce((acc, [key, value]) => {\n        acc[key] = __t(value);\n\n        return acc;\n    }, {});\n\n    const formik = useEnhancedFormik({\n        initialValues: useMemo(() =>\n            block.items.reduce((acc, item, index) => ((acc[mapDynamicFieldToName(item, index)] = ''), acc), {})\n        ),\n        validationSchema,\n        onSubmit,\n    });\n\n    const handleSentModalClosed = useCallback(() => {\n        setSent(false);\n        formik.resetForm();\n    }, [formik]);\n\n    useEffect(() => {\n        if (sent && block.hasUrl && block.sentUrl) {\n            const timer = setTimeout(() => (window.location = block.sentUrl), 1000);\n\n            return () => clearTimeout(timer);\n        }\n    }, [sent, block.hasUrl, block.sentUrl, formik]);\n\n    useDeepCompareEffect(() => {\n        formik.setErrors(errors);\n    }, [errors]);\n\n    return (\n        <FormikProvider value={formik}>\n            <FormTag id={`form_${block._id}`}>\n                <DynamicFormInputs theme={theme} block={block} defaultMaxSize={defaultDynamicFieldLengthLimit} />\n\n                <div className={styles.buttonContainer}>\n                    <SubmitButton\n                        as={ThemedButton}\n                        theme={theme}\n                        isInitialHidden={false}\n                        fullWidth\n                        isFetching={loading}\n                        disabled={false}\n                        style={{\n                            backgroundColor: theme.buttonBackground,\n                            color: theme.buttonTextColor,\n                            borderRadius: theme.borderRadius,\n                        }}\n                    >\n                        {block.sendLabel}\n                    </SubmitButton>\n                </div>\n            </FormTag>\n\n            <AnimatePresence>\n                {sent && (\n                    <ThemedModal compact overlay showHeader={false} onClose={handleSentModalClosed}>\n                        {(handleClose) => (\n                            <div className={styles.successContent}>\n                                <div className={styles.closeIcon} onClick={handleClose}>\n                                    <FiX size={26} />\n                                </div>\n                                <FiCheck size={60} className={styles.icon} />\n                                <p>{block.sentText}</p>\n                            </div>\n                        )}\n                    </ThemedModal>\n                )}\n            </AnimatePresence>\n        </FormikProvider>\n    );\n};\n\nSubscriptionFormContent.propTypes = {\n    block: LandingsPropTypes.block.isRequired,\n    theme: PropTypes.object.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    interactive: PropTypes.bool,\n};\n\nexport default function SubscriptionForm({ block, style: baseStyle, interactive, ...rest }) {\n    const { theme, style } = useBlockTheme(block);\n    const website = useWebsiteData();\n    const combined = useMemo(() => (baseStyle ? { ...style, ...baseStyle } : style), [style, baseStyle]);\n\n    const handleSubmit = useCallback(\n        async (values) => {\n            if (!interactive) {\n                return;\n            }\n\n            await feedbackApi.submit(website.workspace, website._id, { blockId: block._id, data: values });\n\n            const submitEvent = new CustomEvent('formSubmitted', {\n                detail: block._id,\n            });\n\n            document.dispatchEvent(submitEvent);\n        },\n        [website, interactive]\n    );\n\n    return (\n        <BlockBase interactive={interactive} style={combined} {...cls(styles.root, rest)}>\n            <SubscriptionFormContent block={block} theme={theme} interactive={interactive} onSubmit={handleSubmit} />\n        </BlockBase>\n    );\n}\n\nSubscriptionForm.propTypes = {\n    ...BlockBase.propTypes,\n    block: LandingsPropTypes.block.isRequired,\n};\n\nSubscriptionForm.defaultProps = BlockBase.defaultProps;\n\nSubscriptionForm.kind = SubscriptionFormBlockKind;\n","import SubscriptionForm from './SubscriptionForm';\n\nexport default SubscriptionForm;\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"-XoAMny0\",\"thumbnail\":\"C_R44W3m\",\"emptyPlaceholder\":\"_335lD0ul\",\"meta\":\"_3haFePjs\",\"title\":\"_19uOjj9I\",\"price\":\"_1YA6epaj\",\"discountPrice\":\"_26QDH8kd\",\"lineThrough\":\"_1iPjetGG\",\"list\":\"_1BKtItoB\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { IoMdImage } from 'react-icons/io';\n\nimport { __t } from '@mssgme/shared';\nimport { LazyImage } from '@mssgme/ui';\nimport { useUploads, MediaSizes } from '../../../hooks';\n\nimport styles from './ServicesGridItem.scss';\n\nexport const ServicesGridItem = ({ item, themeStyles, ...rest }) => {\n    const { getMediaSizeUrl } = useUploads();\n    const photoUrl = getMediaSizeUrl(item.photoUrl, MediaSizes.Half);\n\n    return (\n        <div className={cn(styles.item, styles[themeStyles.gridMode])} {...rest}>\n            <div className={styles.thumbnail} style={{ backgroundColor: themeStyles.backgroundColor }}>\n                {photoUrl ? (\n                    <LazyImage src={photoUrl} alt={item.title} />\n                ) : (\n                    <div className={styles.emptyPlaceholder}>\n                        <IoMdImage size=\"40%\" color=\"#fff\" />\n                    </div>\n                )}\n            </div>\n            <div className={styles.meta} style={{ color: themeStyles.color }}>\n                <div>\n                    <h6 className={styles.title}>{item.title}</h6>\n                    {item.price && (\n                        <div className={styles.price}>\n                            {item.price.formattedDiscount &&\n                                (item.price.discount === 0 ? (\n                                    <span className={styles.discountPrice}>{__t('free')}</span>\n                                ) : (\n                                    <span className={styles.discountPrice}>{item.price.formattedDiscount}</span>\n                                ))}\n                            {item.price.amount === 0 ? (\n                                __t('free')\n                            ) : (\n                                <span className={item.price.formattedDiscount ? styles.lineThrough : null}>\n                                    {item.price.formatted}\n                                </span>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nServicesGridItem.propTypes = {\n    item: PropTypes.object.isRequired,\n    themeStyles: PropTypes.object.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Vs34Y2Ah\",\"header\":\"_2e4UGjJN\",\"controls\":\"_2sYXvV1t\",\"control\":\"_28-9kyQf\",\"closeButton\":\"_3Je-sAwM\",\"content\":\"_2XbhEsS0\",\"swiper\":\"QnbvWe1q\",\"noSwiping\":\"_2zN_ACNB\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport ReactDom from 'react-dom';\nimport { useHistory } from 'react-router';\n// import { FiChevronLeft, FiChevronRight, FiX } from 'react-icons/fi';\nimport { motion, startAnimation, useMotionValue } from 'framer-motion';\n\nimport { Swiper } from '@mssgme/ui';\nimport { usePageData, usePageTheme } from '../../../hooks';\nimport { ServiceContent } from '../../../UI';\n\nimport styles from './ServicesModal.scss';\n\nconst animate = (from, to, transition) => {\n    void startAnimation('', from, to, transition);\n\n    return {\n        stop: () => from.stop(),\n    };\n};\n\nexport function ServicesModal({\n    services,\n    contacts,\n    activeIndex,\n    interactive,\n    onClose,\n    onClosing,\n    themeStyles,\n    handleHash,\n}) {\n    const page = usePageData();\n    const {\n        style: { backgroundColor },\n    } = usePageTheme(true, true);\n    const history = useHistory();\n    const opacity = useMotionValue(0);\n    // const navigationPrevRef = React.useRef(null);\n    // const navigationNextRef = React.useRef(null);\n    const hasMultipleServices = services.length > 1;\n    // const isMobile = useIsMobile();\n\n    const contactBlocks = useMemo(\n        () =>\n            contacts\n                .filter(({ enabled }) => enabled)\n                .map(({ blockId }) => page.blocks.find(({ _id }) => _id === blockId)),\n        [page, contacts]\n    );\n\n    // const handleInit = useCallback(\n    //     (swiper) => {\n    //         swiper.params.navigation.prevEl = navigationPrevRef.current;\n    //         swiper.params.navigation.nextEl = navigationNextRef.current;\n    //         swiper.navigation.update();\n    //     },\n    //     [navigationPrevRef, navigationNextRef]\n    // );\n    const handleSlideChange = useCallback(\n        (swiper) => {\n            if (handleHash) {\n                history.replace('#' + services[swiper.realIndex]._id);\n            }\n        },\n        [handleHash, services]\n    );\n    const handleClose = useCallback(() => {\n        if (handleHash) {\n            history.replace(history.location.pathname);\n        }\n\n        onClosing && onClosing();\n\n        animate(opacity, 0, {\n            type: 'spring',\n            stiffness: 100,\n            onComplete: onClose,\n        });\n    }, [onClose, onClosing, handleHash]);\n\n    useEffect(() => {\n        const controls = animate(opacity, 1, {\n            type: 'spring',\n            stiffness: 100,\n        });\n\n        return controls.stop;\n    }, []);\n\n    return ReactDom.createPortal(\n        <motion.div className={styles.root} style={{ opacity, backgroundColor }}>\n            {/*<div className={styles.header} style={{ color: themeStyles.color }}>*/}\n            {/*    <div className={styles.closeButton} onClick={handleClose}>*/}\n            {/*        <FiX size={24} />*/}\n            {/*    </div>*/}\n            {/*    /!*{hasMultipleServices && (*!/*/}\n            {/*    /!*    <div className={styles.controls} style={{ display: isMobile ? 'none' : null }}>*!/*/}\n            {/*    /!*        <div className={styles.control} ref={navigationPrevRef}>*!/*/}\n            {/*    /!*            <FiChevronLeft size={24} />*!/*/}\n            {/*    /!*        </div>*!/*/}\n            {/*    /!*        <div className={styles.control} ref={navigationNextRef}>*!/*/}\n            {/*    /!*            <FiChevronRight size={24} />*!/*/}\n            {/*    /!*        </div>*!/*/}\n            {/*    /!*    </div>*!/*/}\n            {/*    /!*)}*!/*/}\n            {/*    <div className={styles.closeButton} style={{ opacity: 0, pointerEvents: 'none' }}>*/}\n            {/*        <FiX size={24} />*/}\n            {/*    </div>*/}\n            {/*</div>*/}\n            <div className={styles.content}>\n                <Swiper\n                    className={styles.swiper}\n                    allowTouchMove={hasMultipleServices}\n                    initialSlide={activeIndex}\n                    noSwipingClass={styles.noSwiping}\n                    speed={600}\n                    pagination={false}\n                    // watchOverflow={services.length > 1}\n                    // loop={services.length > 1}\n                    onInit={handleSlideChange}\n                    onSlideChange={handleSlideChange}\n                >\n                    {services.map((service, index) =>\n                        Object.assign(\n                            ({ isActive, isPrev, isNext }) => (\n                                <ServiceContent\n                                    themeStyles={themeStyles}\n                                    service={service}\n                                    contacts={contactBlocks}\n                                    isActive={isActive}\n                                    isPrev={isPrev}\n                                    isNext={isNext}\n                                    interactive={interactive}\n                                    onClose={handleClose}\n                                />\n                            ),\n                            { key: service._id || index }\n                        )\n                    )}\n                </Swiper>\n            </div>\n        </motion.div>,\n        document.querySelector('#page_root, #mainRoot')\n    );\n}\n\nServicesModal.propTypes = {\n    services: PropTypes.array.isRequired,\n    contacts: PropTypes.array.isRequired,\n    activeIndex: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onClosing: PropTypes.func,\n    themeStyles: PropTypes.object.isRequired,\n    handleHash: PropTypes.bool,\n    interactive: PropTypes.bool,\n};\n\nServicesModal.defaultProps = {\n    handleHash: true,\n    interactive: true,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"servicesList\":\"_1tPoDiYt\",\"list\":\"_11aOBJzF\",\"moreButtonContainer\":\"_1WE-HNBa\",\"blurred\":\"VgXs12px\"};","import PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useLocation } from 'react-router';\nimport { useTimeoutFn } from 'react-use';\n\nimport { __t, ServicesGridBlockKind } from '@mssgme/shared';\nimport { LandingsPropTypes, Spinner } from '@mssgme/ui';\nimport { useBlockTheme } from '../../../hooks';\nimport { MoreButton } from '../../../UI';\nimport { BlockBase } from '../BlockBase';\nimport { ServicesGridItem } from './ServicesGridItem';\nimport { ServicesModal } from './ServicesModal';\n\nimport styles from './ServicesGrid.scss';\n\nconst ITEMS_PER_PAGE = 6;\n\nexport default function ServicesGrid({ block, sortable, interactive, delay = 0, ...rest }) {\n    const location = useLocation();\n    const hashId = location.hash && location.hash.slice(1);\n    const slideIndexFromHash = hashId && block.items.findIndex((item) => item._id === hashId);\n    const hasSlideFromHash = Number.isInteger(slideIndexFromHash) && slideIndexFromHash >= 0;\n    const { theme } = useBlockTheme(block);\n    const [page, setPage] = useState(1);\n    const [isDelayed, setDelayed] = useState(!!delay);\n    const [isServicesModal, setIsServicesModal] = useState(false);\n    const [currentServiceIndex, setCurrentServiceIndex] = useState(0);\n    const total = block.items.length;\n    const pages = Math.ceil(total / ITEMS_PER_PAGE);\n    const hasMore = page < pages;\n    const sliced = hasMore ? block.items.slice(0, page * ITEMS_PER_PAGE) : block.items;\n\n    const handleLoadMore = useCallback(() => setPage((old) => old + 1), []);\n    const openServicesModal = useCallback(() => {\n        // const rootEl = document.querySelector('#page_root_inner, #mainRoot > div');\n        // rootEl.classList.add(styles.blurred);\n        setIsServicesModal(true);\n    }, []);\n    const closingServicesModal = useCallback(() => {\n        // const rootEl = document.querySelector('#page_root_inner, #mainRoot > div');\n        // rootEl.classList.remove(styles.blurred);\n    }, []);\n    const closeServicesModal = useCallback(() => {\n        setIsServicesModal(false);\n    }, []);\n\n    useEffect(() => {\n        if (hasSlideFromHash && !sortable) {\n            setCurrentServiceIndex(slideIndexFromHash);\n            openServicesModal();\n        }\n    }, [hasSlideFromHash]);\n\n    useTimeoutFn(() => setDelayed(false), delay);\n\n    if (isDelayed) {\n        return (\n            <BlockBase {...rest}>\n                <Spinner />\n            </BlockBase>\n        );\n    }\n\n    return (\n        <BlockBase lazy {...rest}>\n            {sliced.length ? (\n                <ul className={cn(styles.servicesList, styles[theme.gridMode])}>\n                    {sliced.map((item, index) => (\n                        <li key={item._id || index}>\n                            <ServicesGridItem\n                                item={item}\n                                themeStyles={theme}\n                                onClick={() => {\n                                    setCurrentServiceIndex(index);\n                                    openServicesModal();\n                                }}\n                            />\n                        </li>\n                    ))}\n                </ul>\n            ) : (\n                <ul\n                    className={cn(styles.servicesList, styles[theme.gridMode])}\n                    style={{ opacity: 0.7, pointerEvents: 'none' }}\n                >\n                    <li>\n                        <ServicesGridItem\n                            themeStyles={theme}\n                            item={{\n                                title: __t('title'),\n                                price: { amount: 9.99, formatted: '$19.99', formattedDiscount: '$9.99' },\n                            }}\n                        />\n                    </li>\n                    <li>\n                        <ServicesGridItem\n                            themeStyles={theme}\n                            item={{\n                                title: __t('title'),\n                                price: { amount: 9.99, formatted: '$19.99', formattedDiscount: '$9.99' },\n                            }}\n                        />\n                    </li>\n                </ul>\n            )}\n\n            {hasMore && (\n                <div className={styles.moreButtonContainer}>\n                    <MoreButton\n                        onClick={handleLoadMore}\n                        style={{\n                            backgroundColor: theme.backgroundColor,\n                            color: theme.color,\n                            borderRadius: theme.borderRadius,\n                        }}\n                    />\n                </div>\n            )}\n            {isServicesModal && (\n                <ServicesModal\n                    handleHash={interactive}\n                    themeStyles={theme}\n                    contacts={block.contacts}\n                    services={block.items}\n                    activeIndex={currentServiceIndex}\n                    interactive={interactive}\n                    onClose={closeServicesModal}\n                    onClosing={closingServicesModal}\n                />\n            )}\n        </BlockBase>\n    );\n}\n\nServicesGrid.propTypes = {\n    ...BlockBase.propTypes,\n    block: LandingsPropTypes.block.isRequired,\n    delay: PropTypes.number,\n};\n\nServicesGrid.defaultProps = BlockBase.defaultProps;\n\nServicesGrid.kind = ServicesGridBlockKind;\n","import ServicesGrid from './ServicesGrid';\n\nexport default ServicesGrid;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction SearchIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M11 19a8 8 0 100-16 8 8 0 000 16zM21 21l-4.35-4.35\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(SearchIcon);\nexport default ForwardRef;\n","import { useState } from 'react';\nimport { useDebounce, useMountedState } from 'react-use';\n\nimport { handleError, productsApi } from '@mssgme/lib';\nimport { useFetching } from '@mssgme/hooks';\n\nexport const useProductsApi = ({ workspaceId, websiteId, query }) => {\n    const isMounted = useMountedState();\n    const [store, setStore] = useState({ hasNext: false, next: null, publishedCount: 0, items: [], isFetching: true });\n    const { pending: isFetching, run: getProducts } = useFetching(\n        async (resetStore) => {\n            const { results, next, ...productsStore } = await productsApi.list(workspaceId, {\n                limit: query.limit,\n                next: resetStore ? null : store.next,\n                collection: query.collections.include,\n                website: websiteId,\n                published: true,\n            });\n\n            if (!isMounted()) {\n                return;\n            }\n\n            setStore((prevProducts) => {\n                const items = resetStore ? results : prevProducts.items.concat(results);\n                const hasNext = productsStore.hasNext && !(query.total && items.length >= query.total);\n\n                return {\n                    ...productsStore,\n                    next: (hasNext && next) || null,\n                    items: query.total ? items.slice(0, query.total) : items,\n                    hasNext,\n                };\n            });\n        },\n        [store.next, query]\n    );\n\n    useDebounce(() => void getProducts(true).catch(handleError), 100, [query]);\n\n    return {\n        ...store,\n        isFetching: store.isFetching || isFetching,\n        getProducts,\n    };\n};\n","import { useEffect } from 'react';\nimport useTimeoutFn from './useTimeoutFn';\nexport default function useDebounce(fn, ms, deps) {\n    if (ms === void 0) { ms = 0; }\n    if (deps === void 0) { deps = []; }\n    var _a = useTimeoutFn(fn, ms), isReady = _a[0], cancel = _a[1], reset = _a[2];\n    useEffect(reset, deps);\n    return [isReady, cancel];\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3dvk4qMK\",\"item\":\"_3awBxbh9\",\"active\":\"zyqy27XG\",\"list\":\"_2agEy5u-\",\"clipLeft\":\"_1gV7--Yd\",\"clipRight\":\"_3kz8zbIR\",\"controlContainerLeft\":\"_25EQ80Ed\",\"controlContainerRight\":\"_3JnavzXx\",\"control\":\"hhPWLPiY\"};","import PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDeepCompareEffect } from 'react-use';\nimport { Link } from 'react-router-dom';\n\nimport { __t } from '@mssgme/shared';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { useHorizontalTabbedScroll } from '@mssgme/ui';\nimport { useBasePageColor } from '../../../../hooks';\n\nimport styles from './ButtonsMenu.scss';\n\nexport const ButtonsMenu = ({ items, interactive, activeCollectionId, theme, onSelect, ...rest }) => {\n    const { generateUrl } = useNavigationUtils();\n    const { root, hasLeftBtn, moveLeft, list, hasRightBtn, moveRight, moveTo } = useHorizontalTabbedScroll(\n        items.length\n    );\n    const { backgroundColor, backgroundDimmed, isLightBG } = useBasePageColor();\n    const baseUrl = useMemo(() => generateUrl('c'), []);\n    const themeStyle = useMemo(\n        () => ({\n            button: {\n                backgroundColor: theme.backgroundColor,\n                color: theme.productsCategoryTextColor || theme.color,\n                borderRadius: theme.borderRadius,\n            },\n            buttonActive: {\n                backgroundColor: theme.buttonBackground,\n                color: theme.buttonTextColor,\n                borderRadius: theme.borderRadius,\n            },\n            arrowButton: { color: theme.color },\n            arrowBg: { color: backgroundColor },\n        }),\n        [theme, backgroundColor, backgroundDimmed, isLightBG]\n    );\n\n    const isTabbed = theme.filterMode === 'tabs';\n    const ItemTag = interactive ? Link : 'div';\n    const handleClick = useCallback(\n        (e) => {\n            if (!isTabbed) {\n                return;\n            }\n\n            e.preventDefault();\n\n            const slug = e.target.dataset?.slug;\n            const index = items.findIndex((item) => item.slug === slug);\n            const id = items[index]?._id;\n\n            if (id === activeCollectionId) {\n                // onSelect(null);\n            } else {\n                moveTo(index);\n                onSelect(id);\n            }\n        },\n        [isTabbed, activeCollectionId, items, moveTo, onSelect]\n    );\n\n    useDeepCompareEffect(() => {\n        if (items.length) {\n            moveTo(0);\n            onSelect(items[0]._id);\n        }\n    }, [items]);\n\n    return (\n        <div className={styles.root} ref={root} {...rest}>\n            {hasLeftBtn && (\n                <div key={`le-${backgroundColor}`} className={styles.controlContainerLeft} onClick={moveLeft}>\n                    <div className={styles.control} style={themeStyle.arrowButton}>\n                        &larr;\n                    </div>\n                </div>\n            )}\n\n            <ul className={cn(styles.list, hasLeftBtn && styles.clipLeft, hasRightBtn && styles.clipRight)} ref={list}>\n                {items.map((col, index) => {\n                    const isActive = isTabbed && activeCollectionId === col._id;\n\n                    return (\n                        <li\n                            key={col._id}\n                            data-index={index}\n                            className={cn({ [styles.item]: true, [styles.active]: isActive })}\n                        >\n                            <ItemTag\n                                style={isActive ? themeStyle.buttonActive : themeStyle.button}\n                                data-slug={col.slug}\n                                onClick={handleClick}\n                                {...interactive && { to: `${baseUrl}/${col.slug}` }}\n                            >\n                                {col.default ? __t('all_products') : col.name}\n                            </ItemTag>\n                        </li>\n                    );\n                })}\n            </ul>\n\n            {hasRightBtn && (\n                <div key={`ri-${backgroundColor}`} className={styles.controlContainerRight} onClick={moveRight}>\n                    <div className={styles.control} style={themeStyle.arrowButton}>\n                        &rarr;\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nButtonsMenu.propTypes = {\n    items: PropTypes.array.isRequired,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"_1cheHu2s\",\"startIcon\":\"_3QTRIM5a\",\"endIcon\":\"bgPcNmEE\"};","import React from 'react';\nimport PureButton from './PureButton';\n\nimport styles from './TextButton.scss';\n\nexport default function TextButton(props) {\n    return <PureButton styles={styles} {...props} />;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2dUvypCw\",\"select\":\"_5GfWMbLF\",\"button\":\"_1RWnUF4N\",\"label\":\"_146sE58Z\",\"arrow\":\"_17yoFmZR\",\"option\":\"_3-EPpWFr\",\"active\":\"_2mmR5s76\",\"optionLabel\":\"Hm8d5GxS\",\"badge\":\"yfPVOd0T\",\"dropdown\":\"_3ViuLY5O\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useRef } from 'react';\nimport { useClickAway, useToggle } from 'react-use';\n\nimport { __t } from '@mssgme/shared';\nimport { isMatchId } from '@mssgme/helpers';\nimport { ChevronDownIcon } from '@mssgme/icons';\nimport { Fade, TextButton } from '@mssgme/ui';\n\nimport styles from './FilterMenu.scss';\n\nexport const FilterMenuItem = ({ collection, active, onSelect }) => {\n    const handleClick = useCallback(() => onSelect(collection._id), [onSelect, collection]);\n\n    return (\n        <div className={cn(styles.option, active && styles.active)} onClick={handleClick}>\n            <span className={styles.optionLabel}>{collection.default ? __t('all_products') : collection.name}</span>\n            <span className={styles.badge}>{collection.publishedProductsCount}</span>\n        </div>\n    );\n};\n\nFilterMenuItem.propTypes = {\n    collection: PropTypes.object.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    active: PropTypes.bool,\n};\n\nexport const FilterMenu = ({ items, activeCollectionId, theme, interactive, onSelect, ...rest }) => {\n    const root = useRef();\n    const [isOpen, toggle] = useToggle();\n    const selected = items.find(isMatchId(activeCollectionId));\n\n    useClickAway(root, () => toggle(false));\n\n    const handleSelect = useCallback((id) => {\n        onSelect(id);\n        toggle(false);\n    });\n\n    return (\n        <div className={styles.root} {...rest}>\n            <div className={styles.select} ref={root}>\n                <TextButton aria-pressed={isOpen} className={styles.button} onClick={toggle}>\n                    <span className={styles.label}>\n                        {selected && (selected.default ? __t('all_products') : selected.name)}\n                        {selected && <span>&nbsp;({selected?.publishedProductsCount})</span>}\n                    </span>\n                    <ChevronDownIcon size={16} className={styles.arrow} />\n                </TextButton>\n\n                <Fade in={isOpen}>\n                    <div className={styles.dropdown}>\n                        {items.map((collection) => (\n                            <FilterMenuItem\n                                key={collection._id}\n                                active={collection._id === activeCollectionId}\n                                collection={collection}\n                                onSelect={handleSelect}\n                            />\n                        ))}\n                    </div>\n                </Fade>\n            </div>\n        </div>\n    );\n};\n\nFilterMenu.propTypes = {\n    items: PropTypes.array.isRequired,\n    baseUrl: PropTypes.string.isRequired,\n    buttonStyle: PropTypes.object,\n    arrowsStyle: PropTypes.object,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { ButtonsMenu } from './ButtonsMenu';\nimport { FilterMenu } from './FilterMenu';\n\nexport function CollectionsBar({ theme, ...rest }) {\n    return theme.filterMode === 'filter' ? (\n        <FilterMenu theme={theme} {...rest} />\n    ) : (\n        <ButtonsMenu theme={theme} {...rest} />\n    );\n}\n\nCollectionsBar.propTypes = {\n    items: PropTypes.array.isRequired,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"zqQ_UzIa\",\"title\":\"_2YZlafSS\",\"list\":\"v4gRAsY4\",\"mobileMode\":\"_2d3Wg2J0\",\"empty\":\"_8ORnZ2Rf\",\"icon\":\"_149SoVjF\",\"description\":\"l6CXojOX\",\"moreBtnContainer\":\"_3OrypCfY\",\"moreBtn\":\"_3N_b-4yz\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useMountedState } from 'react-use';\nimport { get, pick } from 'lodash';\n\nimport { __t, ProductsBlockKind } from '@mssgme/shared';\nimport { cls, isMatchId, isMobile, keyHash } from '@mssgme/helpers';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { LandingsPropTypes, Spinner } from '@mssgme/ui';\nimport { SearchIcon } from '@mssgme/icons';\nimport { ProductItem } from '../../../../products';\nimport { useBlockTheme, useProductsApi, useWebsiteData } from '../../../hooks';\nimport { MoreButton } from '../../../UI';\nimport { BlockBase } from '../BlockBase';\nimport { CollectionsBar } from './CollectionsBar';\n\nimport styles from './Products.scss';\n\nexport const Item = ({ product, baseProductUrl, fromCollection, interactive, ...rest }) => {\n    const to = useMemo(\n        () =>\n            interactive\n                ? {\n                    pathname: `${baseProductUrl}/${product.slug}`,\n                    state: { fromCollection },\n                }\n                : undefined,\n        [baseProductUrl, interactive, product]\n    );\n\n    return <ProductItem product={product} tag={interactive ? Link : 'div'} to={to} {...rest} />;\n};\n\nItem.propTypes = {\n    product: PropTypes.object.isRequired,\n    interactive: PropTypes.bool,\n    fromCollection: PropTypes.string,\n    baseProductUrl: PropTypes.string,\n    style: PropTypes.object,\n};\n\nexport default function Products({ block, interactive, isMobileMode, ...rest }) {\n    const website = useWebsiteData();\n    const isMounted = useMountedState();\n    const location = useLocation();\n    const { generateUrl } = useNavigationUtils();\n    const { theme, style } = useBlockTheme(block);\n    const collectionIds = get(block, 'collections.include', []);\n    const activeCollections = website.collections.filter((col) => col.published && col.publishedProductsCount);\n    const showCollections = collectionIds.length\n        ? collectionIds.map((id) => activeCollections.find(isMatchId(id))).filter(Boolean)\n        : activeCollections;\n    const isTabbed = theme.filterMode !== 'buttons';\n    const [activeCollectionId, setActiveCollectionId] = useState(showCollections[0]?._id || null);\n\n    const options = pick(block, ['products', 'total', 'sort']);\n    const query = useMemo(\n        () => ({\n            ...options,\n            limit: isMobile() ? 6 : 12,\n            collections: activeCollectionId && isTabbed ? { include: [activeCollectionId] } : block.collections,\n        }),\n        [website.collections, keyHash(options), activeCollectionId, isTabbed]\n    );\n    const { hasNext, isFetching, items, getProducts } = useProductsApi({\n        workspaceId: website.workspace,\n        websiteId: website._id,\n        query,\n    });\n    const handleMore = useCallback(() => getProducts(), [getProducts]);\n    const baseProductUrl = useMemo(() => generateUrl('p'), [location.pathname]);\n    const defaultStyle = useMemo(() => ({ color: theme.color }), [theme]);\n    const getFromCollection = (product) => Object.keys(product.cols || {}).find((id) => collectionIds.includes(id));\n\n    useEffect(() => {\n        const firstId = showCollections[0]?._id;\n\n        if (firstId !== activeCollectionId && !showCollections.find(isMatchId(activeCollectionId))) {\n            if (isMounted()) {\n                setActiveCollectionId(firstId);\n            }\n        }\n    }, [activeCollectionId, showCollections]);\n\n    return (\n        <BlockBase {...cls([styles.root, isMobileMode && styles.mobileMode], rest)}>\n            {!!block.title && (\n                <div className={styles.title} style={defaultStyle}>\n                    {block.title}\n                </div>\n            )}\n\n            {showCollections.length > 1 && (\n                <CollectionsBar\n                    theme={theme}\n                    style={defaultStyle}\n                    items={showCollections}\n                    interactive={interactive}\n                    activeCollectionId={activeCollectionId}\n                    onSelect={setActiveCollectionId}\n                />\n            )}\n\n            <ul className={styles.list}>\n                {items.map((product) => (\n                    <li key={product._id}>\n                        <Item\n                            product={product}\n                            interactive={interactive}\n                            baseProductUrl={baseProductUrl}\n                            fromCollection={activeCollectionId || getFromCollection(product)}\n                            themeStyles={theme}\n                            style={defaultStyle}\n                        />\n                    </li>\n                ))}\n\n                {!(items.length || isFetching) && (\n                    <li key=\"empty-list\" className={styles.empty} style={defaultStyle}>\n                        <SearchIcon className={styles.icon} size={48} />\n                        <div className={styles.description}>{__t('no_products')}</div>\n                    </li>\n                )}\n            </ul>\n\n            {isFetching ? (\n                <Spinner />\n            ) : (\n                hasNext && (\n                    <div className={styles.moreBtnContainer}>\n                        <MoreButton\n                            className={styles.moreBtn}\n                            style={style}\n                            onClick={handleMore}\n                            disabled={isFetching}\n                        />\n                    </div>\n                )\n            )}\n        </BlockBase>\n    );\n}\n\nProducts.propTypes = {\n    ...BlockBase.propTypes,\n    block: LandingsPropTypes.block.isRequired,\n};\n\nProducts.defaultProps = BlockBase.defaultProps;\n\nProducts.kind = ProductsBlockKind;\n","import Products from './Products';\n\nexport default Products;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { Route } from 'react-router-dom';\n\nexport const PassthroughRoute = ({ path, exact, component: Component, makeProps = (p) => p }) => {\n    const render = useCallback(\n        ({ match }) => {\n            const props = makeProps(match.params);\n\n            return props && <Component {...props} />;\n        },\n        [Component, makeProps]\n    );\n\n    return <Route exact={exact} path={path} render={render} />;\n};\n\nPassthroughRoute.propTypes = {\n    path: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n    exact: PropTypes.bool,\n    component: PropTypes.any.isRequired,\n    makeProps: PropTypes.func,\n};\n","import React, { useMemo } from 'react';\n\nimport { useWebsiteData } from '../../hooks';\nimport { CollectionView, ProductView } from '../../Product';\nimport { OrderPage, PaymentStatusPage, UserOrderPage, UserOrdersPage } from '../../Order';\nimport { PassthroughRoute } from '../PassthroughRoute';\n\nexport default function PageProductsRouting() {\n    const website = useWebsiteData();\n    const contexts = useMemo(\n        () => ({\n            product: ({ productSlug, collectionSlug }) => ({\n                productSlug,\n                collectionSlug,\n                workspaceId: website.workspace,\n                defaultCollectionId: website.defaultCollectionId,\n            }),\n            collection: ({ collectionSlug }) => {\n                const collection = collectionSlug && website.collections.find(({ slug }) => slug === collectionSlug);\n\n                if (!collection) {\n                    return null;\n                }\n\n                return {\n                    workspaceId: website.workspace,\n                    websiteId: website._id,\n                    collection,\n                };\n            },\n        }),\n        [website.workspace, website.defaultCollectionId, website.collections]\n    );\n\n    return (\n        <>\n            <PassthroughRoute path=\"/c/:collectionSlug\" makeProps={contexts.collection} component={CollectionView} />\n\n            <PassthroughRoute\n                path={['/p/:productSlug', '/c/:collectionSlug/p/:productSlug']}\n                makeProps={contexts.product}\n                component={ProductView}\n            />\n\n            <PassthroughRoute path=\"/user-orders\" component={UserOrdersPage} />\n            <PassthroughRoute path=\"/user-orders/:orderId\" exact component={UserOrderPage} />\n            <PassthroughRoute\n                path={[\n                    '/orders/:orderId',\n                    '/p/:productSlug/orders/:orderId',\n                    '/c/:collectionSlug/p/:productSlug/orders/:orderId',\n                ]}\n                exact\n                component={OrderPage}\n            />\n            <PassthroughRoute path=\"/orders/:orderId/payment/:status\" component={PaymentStatusPage} />\n        </>\n    );\n}\n"],"sourceRoot":""}