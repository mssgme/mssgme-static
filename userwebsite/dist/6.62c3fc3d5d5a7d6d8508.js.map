{"version":3,"sources":["webpack:////drone/src/packages/shared/src/helpers/formatPrice.js","webpack:////drone/src/packages/lib/src/baseApi.js","webpack:////drone/src/packages/lib/src/feedbackApi.js","webpack:////drone/src/packages/shared/src/landings/feedbacks.js","webpack:////drone/src/packages/shared/src/restrictions/isPaid.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/requestError.js","webpack:////drone/src/packages/shared/src/restrictions/errorBuilder.js","webpack:////drone/src/packages/shared/src/plans.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/request.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/voter.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/websites.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/pages.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/blocks.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/acl/resource.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/acl/role.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/acl/acl.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/acl/loader.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/index.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/acl.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/permissions.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/index.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/unlimited.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/version.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/collections.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/messengers.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/products.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/templates.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/themes.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/pageStyling.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/blocksPublish.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/subscriptionFormField.js","webpack:////drone/src/packages/shared/src/restrictions/checkBillingRestrictions.js","webpack:////drone/src/packages/hooks/src/useRestrictions.js","webpack:////drone/src/packages/hooks/src/useWorkspace.js","webpack:////drone/src/packages/hooks/src/useFetching.js","webpack:////drone/src/packages/ui/src/components/Form/SubmitButton.js","webpack:////drone/src/packages/ui/src/components/Inputs/Input/styles.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Input/index.js","webpack:////drone/src/packages/ui/src/components/Inputs/Textarea/styles.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Textarea/index.js","webpack:////drone/src/packages/ui/src/components/FormRow/styles.scss","webpack:////drone/src/packages/ui/src/components/FormRow/index.js","webpack:////drone/src/packages/ui/src/components/Label/styles.scss","webpack:////drone/src/packages/ui/src/components/Label/index.js","webpack:////drone/src/packages/ui/src/components/FormErrors/styles.scss","webpack:////drone/src/packages/ui/src/components/FormErrors/index.js","webpack:////drone/src/packages/ui/src/components/FormField/styles.scss","webpack:////drone/src/packages/ui/src/components/FormField/index.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useModalThemes.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useCustomInputTheme.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useInputTheme.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/Inputs/TextField/TextField.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/Inputs/TextField/TextField.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/DynamicFormInputs.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/DynamicFormInputs.js","webpack:////drone/src/packages/helpers/src/getContourColor.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ThemedButton/ThemedButton.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/ThemedButton/ThemedButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/SubscriptionFormContent.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/SubscriptionFormContent.js","webpack:////drone/src/packages/ui/src/components/Form/useEnhancedFormik.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/SubscriptionForm.js","webpack:////drone/src/packages/ui/src/hooks/useMergedStyles.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/index.js","webpack:////drone/src/packages/ui/src/components/Spinner/Spinner.scss","webpack:////drone/src/packages/ui/src/components/Spinner/Spinner.js","webpack:////drone/src/packages/ui/src/components/Spinner/index.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/MoreButton/styles.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/MoreButton/index.js","webpack:////drone/src/packages/icons/src/dist-icons/ImageIcon.js","webpack:////drone/src/packages/ui/src/components/LazyImage/Thumbnail.scss","webpack:////drone/src/packages/ui/src/components/LazyImage/Thumbnail.js","webpack:////drone/src/packages/ui/src/components/LazyImage/LazyImage.scss","webpack:////drone/src/packages/ui/src/components/LazyImage/LazyImage.js","webpack:////drone/src/packages/ui/src/components/LazyImage/useIntersect.js","webpack:////drone/src/packages/ui/src/components/LazyImage/useLoadImage.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGridItem.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGridItem.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServiceContent.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServicePhoto.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServicePhotos.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/BuyButton.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/BuyButton.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServiceActionsPane.js","webpack:////drone/src/packages/helpers/src/parseUrl.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ExternalUrlButton.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServiceContent.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesModal.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesModal.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGrid.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGrid.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/index.js","webpack:////drone/src/packages/icons/src/dist-icons/SearchIcon.js","webpack:////drone/src/packages/userpage-core/src/products/Elements/ProductItem/styles.scss","webpack:////drone/src/packages/userpage-core/src/products/Elements/ProductItem/index.js","webpack:////drone/src/packages/lib/src/productsApi.js","webpack:////drone/src/packages/lib/src/handleError.js","webpack:////drone/src/packages/ui/src/hooks/useBreakpoints.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/ButtonsMenu.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/ButtonsMenu.js","webpack:////drone/src/packages/ui/src/hooks/useHorizontalTabbedScroll.js","webpack:////drone/src/packages/icons/src/dist-icons/ChevronDownIcon.js","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/PureButton.js","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/TextButton.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/TextButton.js","webpack:////drone/src/packages/ui/src/components/Transitions/createTransition.js","webpack:////drone/src/packages/ui/src/components/Transitions/Fade.scss","webpack:////drone/src/packages/ui/src/components/Transitions/Fade.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/FilterMenu.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/FilterMenu.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/CollectionsBar.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/Products.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/Products.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useProductsApi.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/index.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/Grid/styles.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/Grid/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Product/CollectionView/CollectionView.scss","webpack:////drone/src/packages/userpage-core/src/landings/Product/CollectionView/CollectionView.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useCRMData.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useContacts.js","webpack:////drone/src/packages/userpage-core/src/landings/Product/ProductView/ProductView.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrdersPage/UserOrdersPage.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrdersPage/UserOrdersPage.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/usePaymentConfigs.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/useOrder.js","webpack:////drone/src/packages/shared/src/payments/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/PayButton/PayButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/StripeCheckoutForm.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/StripeCheckoutForm.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/PayPalPayment.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/Buttons/WayforpayButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/WayforpayPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/Buttons/RobokassaButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/Buttons/LiqpayButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/CashOnDeliveryPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/StripePayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/PayPalPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/RobokassaPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/LiqpayPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Providers/OtherPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/UserOrderPage.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/Section.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/UserOrderPage.js","webpack:////drone/src/packages/icons/src/dist-icons/ShoppingBagIcon.js","webpack:////drone/src/packages/icons/src/dist-icons/MapPinIcon.js","webpack:////drone/src/packages/icons/src/dist-icons/CreditCardIcon.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/usePageColors.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/Steps/StepContext.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/Steps/useStep.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/Steps/StepSwitch.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/Steps/StepIcon.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/Steps/StepSwitch.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/Steps/Step.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/Steps/Step.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/printPrice.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/Row.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/Row.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useOrderProducts.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/Divider/Divider.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/Divider/Divider.js","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/IconButton.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/IconButton.js","webpack:////drone/src/packages/icons/src/dist-icons/CloseIcon.js","webpack:////drone/src/packages/icons/src/dist-icons/MinusIcon.js","webpack:////drone/src/packages/icons/src/dist-icons/PlusIcon.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderItem/OrderItem.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderItem/OrderItem.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderItem/OrderItemsList.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Steps/StepsFooter.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Steps/StepsFooter.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Steps/AdjustingStep.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/captureSubmitError.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/useOrderSubmit.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Steps/ShippingAddressStep.js","webpack:////drone/src/packages/icons/src/dist-icons/CheckCircleIcon.js","webpack:////drone/src/packages/icons/src/dist-icons/CircleIcon.js","webpack:////drone/src/packages/ui/src/components/CheckableItem/CheckableItem.scss","webpack:////drone/src/packages/ui/src/components/CheckableItem/CheckableItem.js","webpack:////drone/src/packages/ui/src/components/Inputs/ListInput/styles.scss","webpack:////drone/src/packages/ui/src/components/Inputs/ListInput/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Steps/PaymentStep.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Steps/PaymentStep.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/Steps/ContactInfoStep.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/OrderPage.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderPage/OrderPage.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/PaymentStatusPage.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/PaymentStatusPage.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PassthroughRoute.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/PageProductsRouting.js","webpack:////drone/src/packages/plans/src/index.browser.js","webpack:////drone/src/packages/ui/src/components/Swiper/Swiper.scss","webpack:////drone/src/packages/ui/src/components/Swiper/Swiper.js","webpack:////drone/src/packages/shared/src/helpers/versionCheck.js"],"names":["CURRENCY_SYMBOL","Map","resolveFormatter","memoize","locale","currency","has","get","Intl","NumberFormat","style","currencyDisplay","minimumFractionDigits","useGrouping","l","c","formatPrice","amount","format","defaults","baseUrl","BaseApi","constructor","options","this","endpoint","request","post","body","method","put","delete","Array","isArray","params","obj","arr","prop","val","push","length","join","urlSearch","startsWith","isAbsolute","headers","rest","response","fetch","includes","toUpperCase","Accept","JSON","stringify","undefined","ok","status","errors","json","error","Error","type","ValidationError","message","AuthorizationError","statusText","ApiError","FeedbackApi","submit","workspaceId","websiteId","payload","mapDynamicFieldToName","_ref","index","_id","isPaid","plan","paid","allowPastDue","arguments","AccessRequestError","code","permission","target","super","AccessRequestErrorBuilder","permissions","workspace","billing","assumePaid","subject","setPermission","setSubject","build","isGranted","granted","upgrade","lookupUpgrade","getPlans","Object","values","plans","getId","id","paddle","liqpay","isUnpaid","isDeprecated","deprecated","isPublished","published","getPlanTypes","filter","map","unpaid","actual","BASIC","UNLIMITED","UNPAID","PAID","UPGRADEABLE","DEPRECATED","ACTUAL","ACTION_EVERY","ACTION_ALL","actionsSet","Set","parse","resource","rawActions","split","actions","action","name","add","AccessPermissionRequest","role","resourceOrPermission","fill","isEvery","_this$workspace","owner","user","currentUser","String","assign","match","on","only","is","isAny","every","Voter","supports","supportsVersion","version","versionCheck","projectVersion","vote","WebsitesVoter","canCreate","canEditBasic","quantities","websites","getLimitByRole","PagesVoter","_request$subject","_request$subject$webs","_request$subject$webs2","website","counters","pages","PageBlocksVoter","acl","grants","canEdit","kind","grantsInArrayPayload","kindOrDescriptor","TOTAL_ACTIONS","ALL_ACCESS","Resource","access","_any","merge","total","value","grantsAny","Role","parent","resources","getResourceIds","addResource","existing","getResource","find","examine","strict","got","size","ACL","roles","getRoleIds","getRuleIds","concat","addRole","getRole","layer","ACLLoader","definitions","load","rules","extend","grant","reject","rule","parseRuleDefinition","parsed","reduce","acc","aclVoter","loader","matches","predicate","item","some","_acl","voters","addVoter","voter","_workspace$billing","_workspace$billing2","current","indexOf","constraints","canDelete","default","enabled","card","messengers","m","messenger","slug","products","count","templates","author","currentUserId","colorId","_subject$items","items","_ref2","checkRestrictions","context","subjectOrCallback","callback","builder","itemError","useWarning","useRestriction","ee","EventEmitter","setMaxListeners","show","_len","args","_key","emit","hide","state","setState","useState","isPresented","warning","useEffect","onShow","onHide","prevState","removeListener","useSelector","ref","useRef","setWarning","checkRule","useEventCallback","showWarning","w","clearWarning","handleBlockedEvent","e","preventDefault","stopPropagation","deepEqual","hasWarning","hideWarning","createHooks","lastRequestId","defaultState","pending","fulfilled","rejected","result","initialState","requestId","requestCount","reducer","useFetching","fn","deps","isMounted","useMountedState","dispatch","useReducer","run","useCallback","async","safeDispatch","ForbiddenError","isPermissionBlock","useMemo","validationErrors","getValidationError","SubmitButton","as","Component","Button","isInitialHidden","onClick","submitForm","dirty","isSubmitting","useFormikContext","isHidden","handleClick","React","createElement","_extends","isFetching","disabled","Input","defaultProps","containerClassName","hasError","inputStyle","builderInput","autoFocus","isSelectAddon","renderAddon","node","className","isSelect","addon","renderNode","cloneElement","cls","classNames","props","styles","select","contextBlock","inputClassName","icon","Icon","beforeInput","afterInput","hexInput","hidden","maxLength","refInput","clearable","isFilled","handleClear","_rest$onChange","onChange","call","_beforeInput","_afterInput","_rootClassName","root","before","after","_inputClassName","input","paddingRight","small","sizeNormal","valueLength","trim","useMount","setTimeout","_ref$current","focus","color","inputWrapper","composeRefs","counter","clearAddon","hasRightAddon","FiX","marginBottom","Textarea","_className","_value","container","TextareaAutosize","minRows","maxRows","FormRow","align","children","Tag","Label","FormErrors","critical","shake","errorStyle","msg","key","labelStyle","paddingLeft","FormField","component","label","required","labelClassName","shakeError","wrapAs","htmlFor","useModalThemes","ProductsBlockKind","baseTheme","useTheme","theme","useElementTheme","elementPath","toLowerCase","compile","modalStyle","backgroundColor","colors","background","contentStyle","useCustomInputTheme","customTheme","inputBackgroundColor","inputTextColor","border","borderRadius","padding","display","useInputTheme","SubscriptionFormBlockKind","TextField","defaultStyle","customStyle","field","meta","useField","touched","__t","handleEnterKey","DynamicFormInput","defaultMaxSize","isTextField","onKeyPress","inputTypes","email","phone","text","DynamicFormInputs","block","gridMode","wrap","getBrightness","TinyColor2","factor1","factor2","Math","abs","setAlpha","toRgbString","ThemedButton","contour","baseStyle","contentAlignLeft","getContourColor","buttonBackground","buttonTextColor","keyHash","tag","loaderColor","SubscriptionFormContent","onSubmit","rawSubmit","interactive","sent","setSent","validationSchema","object","validator","string","max","excludeEmptyString","mapDynamicInputsToValidationSchema","FormTag","loading","useAsyncFn","pairs","_values$item$_id","formik","initialValues","errorsPrefix","resetOnSuccess","autoSubmit","autoSubmitDebounce","warnings","setWarnings","useFormik","shouldAutoSubmit","setSubmitting","setStatus","resetForm","setErrors","useUpdateEffect","debouncedSubmit","debounce","useEnhancedFormik","handleSentModalClosed","hasUrl","sentUrl","timer","window","location","clearTimeout","mapValues","FormikProvider","fullWidth","sendLabel","AnimatePresence","ThemedModal","compact","overlay","showHeader","onClose","handleClose","FiCheck","sentText","SubscriptionForm","useBlockTheme","useWebsiteData","combined","additionalStyle","useMergedStyles","handleSubmit","feedbackApi","blockId","data","submitEvent","CustomEvent","detail","document","dispatchEvent","BlockBase","POINTS","Spinner","borderWidth","duration","normalized","normalizeSize","width","height","round","animationDuration","WebkitAnimationDuration","MozAnimationDuration","cn","spinner","def","str","withPoints","points","MoreButton","ImageIcon","svgRef","IconBase","viewBox","d","stroke","strokeWidth","strokeLinecap","strokeLinejoin","ForwardRef","Thumbnail","LazyImage","mode","src","alt","isIntersecting","isIntersect","setIsIntersecting","setIsIntersect","observer","IntersectionObserver","entry","rootBounds","rootMargin","threshold","element","observe","unobserve","useIntersect","isLoaded","onLoad","onError","useLoadImage","img","visible","ServicesGridItem","themeStyles","getMediaSizeUrl","useUploads","photoUrl","MediaSizes","Half","thumbnail","title","emptyPlaceholder","IoMdImage","price","formattedDiscount","discount","discountPrice","lineThrough","formatted","ServicePhoto","forwardRef","slide","slideImage","Large","zoomIcon","common","FiZoomIn","imagePreloader","LoadingIndicator","lazy","loadPrevNext","preloaderClass","loadedClass","loaded","ServicePhotos","photos","isActive","isPrev","isNext","navigationPrevRef","navigationNextRef","paginationElRef","shouldSwiperLoad","setShouldSwiperLoad","swiper","setSwiper","isLightbox","setIsLightbox","currentLightBoxSlideIndex","setCurrentLightBoxSlideIndex","hasMultiplePhotos","hasNavElements","showSwiper","isSwipeable","openLightBox","closeLightBox","handleSlide","pagination","el","clickable","renderBullet","dot","clickableClass","clickablePagination","bulletActiveClass","activeBullet","handleLoad","updateAutoHeight","swiperContainer","Swiper","nested","autoHeight","navigation","prevEl","nextEl","speed","watchOverflow","loop","onSwiper","preloader","controlsContainer","controls","noSwiping","control","FiChevronLeft","FiChevronRight","closeButtonWrapper","closeButton","Suspense","fallback","LightBox","activeIndex","images","url","BuyButton","service","onCartAdd","productCurrency","api","useFrontAPI","generateUrl","useNavigationUtils","router","useCoreContext","currentOrder","saveOrderId","useSavedOrders","pageId","usePageData","isInCart","productId","orderId","orderPath","orders","toView","isDifferentCurrency","_currentOrder$items$","_currentOrder$items$$","orderCurrency","restrictCurrenciesMessage","toggleRestrictCurrenciesMessage","useToggle","handleBuy","quantity","modify","create","Fragment","beforeIcon","ShoppingCartIcon","Link","to","pathname","backPath","product","textAlign","ServiceActionsPane","contacts","enabledPayments","renderBlock","useRenderer","actionsBuy","ExternalUrlButton","_service$externalButt","_service$externalButt2","externalButton","externalUrl","URL","err","parseUrl","LinkBlank","href","data-id","data-title","data-element","data-event-name","urlSafeComponent","buttonContent","hostname","ServiceContent","description","backUrl","isCartAddAnimation","toggleCartAddAnimation","rootEl","serviceTitle","isDarkTheme","isLightColor","slice","backgroundImage","substring","contactsEl","_e$preventDefault","scrollTop","scrollTo","top","behavior","wrapper","active","content","dark","fixedPane","motion","div","cartBouncer","animate","bottom","exit","transition","stiffness","ShoppingCart","position","right","ServicesModal","services","onClosing","handleHash","page","history","useHistory","hasMultipleServices","contactBlocks","_ref3","blocks","isMatchedById","handleSlideChange","replace","realIndex","allowTouchMove","initialSlide","noSwipingClass","onInit","onSlideChange","_ref4","ServicesGrid","sortable","delay","useLocation","hashId","hash","slideIndexFromHash","findIndex","hasSlideFromHash","Number","isInteger","setPage","isDelayed","setDelayed","isServicesModal","setIsServicesModal","currentServiceIndex","setCurrentServiceIndex","hasMore","ceil","sliced","handleLoadMore","old","openServicesModal","closeServicesModal","useTimeoutFn","servicesList","opacity","pointerEvents","moreButtonContainer","ServicesGridBlockKind","SearchIcon","ProductItem","mediaUtils","generateProductThumbnailUrl","ProductsApi","list","loadBySlug","productSlug","collectionId","handleError","console","Sentry","captureException","MEDIA_BREAKPOINTS","minWidth","useIsDesktop","useMediaQuery","ButtonsMenu","activeCollectionId","onSelect","hasLeftBtn","moveLeft","hasRightBtn","moveRight","moveTo","isDesktop","setIndex","useMeasure","x","listScrollX","useScroll","listScrollWidth","scrollWidth","hasScroll","targetIndex","parentWidth","parentElement","clientWidth","nodes","from","querySelectorAll","scrollPosition","i","scrollLeft","currentIndex","useHorizontalTabbedScroll","backgroundDimmed","isLightBG","useBasePageColor","resolvePathname","themeStyle","button","productsCategoryTextColor","buttonActive","arrowButton","arrowBg","isTabbed","filterMode","ItemTag","_e$target$dataset","_items$index","dataset","useDeepCompareEffect","col","data-index","data-slug","ChevronDownIcon","PureButton","startIcon","endIcon","getProps","out","tabIndex","TextButton","DURATION_MAP","fast","normal","slow","createTransition","displayName","Transition","in","inProp","appear","innerRest","timeout","transitionDuration","CSSTransition","unmountOnExit","FilterMenuItem","collection","publishedProductsCount","FilterMenu","isOpen","toggle","selected","isMatchId","useClickAway","handleSelect","aria-pressed","Fade","CollectionsBar","Item","baseProductUrl","fromCollection","Products","_showCollections$","isMobileMode","collectionIds","activeCollections","collections","showCollections","Boolean","setActiveCollectionId","pick","query","limit","isMobile","include","hasNext","getProducts","store","setStore","next","publishedCount","results","productsStore","productsApi","resetStore","prevProducts","useDebounce","catch","useProductsApi","handleMore","getFromCollection","keys","cols","_showCollections$2","firstId","Grid","itemClassName","Children","CollectionView","setProducts","initProducts","useCRMData","crm","useContext","WebsiteDataContext","cloneDeep","CRM_IDENTITY","useContacts","MessengersBlockKind","ProductView","_history$location$sta","defaultCollectionId","finalUrl","getProduct","addUrl","encodeURIComponent","Date","now","documentElement","lang","start","is404","usePresenceRemoval","UserOrdersPage","usePageTheme","userOrders","finalizedOrders","order","finalized","feedback","features","provider","paymentMethod","orderStatus","timestamp","toLocaleDateString","shouldRenderPaymentStatus","immediateCompletion","handlesPaymentsStatus","usePaymentConfigs","payments","providers","entries","config","immediate","online","isSingular","isSingularOnline","useOrder","orderLoadCount","setOrderLoadCount","setOrder","loadedOrder","useAsync","complete","isNotFound","NotFoundError","reload","PAYMENT_PROVIDERS","stripe","FaStripe","FiChevronsRight","paypal","FaPaypal","supported_currencies","wayforpay","MdPayment","robokassa","PayButton","_PAYMENT_PROVIDERS$pr","_PAYMENT_PROVIDERS$pr2","CARD_OPTIONS","hidePostalCode","iconStyle","classes","base","webkitAutofill","StripeCheckoutForm","rawDisabled","onPay","useStripe","elements","useElements","inputStyles","succeeded","setSucceeded","processing","setProcessing","setDisabled","setError","iconColor","overflow","clientSecret","signatures","createStripePaymentIntent","isDisabled","confirmCardPayment","payment_method","getElement","CardElement","handleChange","empty","marginTop","merchantDomainName","orderPaymentTimeout","WayforpayButton","merchantAccount","orderReference","orderDate","returnUrl","serviceUrl","createSignature","productName","productPrice","productCount","merchantSignature","setMerchantSignature","extractProduct","RobokassaButton","merchantLogin","invId","outSum","outSumCurrency","isTest","signature","setSignature","LiqpayButton","publicKey","resultUrl","serverUrl","public_key","order_id","encode","FiTruck","FaMoneyBillAlt","PAYMENT_PROVIDER_RENDERERS","cod","handleOrder","isModal","toggleModal","stripePromise","loadStripe","Elements","contactInfo","firstName","lastName","isSupportedCurrency","createOrder","purchase_units","currency_code","breakdown","item_total","payer","given_name","surname","unit_amount","onApprove","details","capture","PayPalScriptProvider","clientId","PayPalButtons","layout","tagline","floor","random","createWayforpaySignature","BACKEND_ENDPOINTS","getWayforpayCallback","test","createRobokassaSignature","successUrl","getLiqPayCallback","createLiqpaySignature","other","handleModal","instructions","whiteSpace","Section","UserOrderPage","isPayNowModal","togglePayNowModal","isShowingCancelPrompt","showCancelPrompt","hideCancelPrompt","useBooleanHandler","orderLoading","mapper","finalizeLoading","handlePay","finalize","cancelLoading","handleCancelOrder","cancel","isJustOneOnlinePaymentMethod","onlineElements","Renderer","phoneNumber","shippingAddress","city","address","postalCode","comment","ShoppingBagIcon","MapPinIcon","CreditCardIcon","usePageColors","StepContext","createContext","getPrevStep","first","getNextStep","last","min","useStep","currentStep","setCurrentStep","steps","lastStep","isFirstStep","isLastStep","nextStep","previousStep","gotoStep","step","_steps","isDone","gotoNextStep","gotoPreviousStep","getStepName","firstStep","StepIcon","number","isCurrent","stepCurrent","StepSwitch","setSteps","toArray","child","divider","borderColor","Provider","Step","printPrice","navigator","language","Row","getIdsByKind","Divider","borderTop","IconButton","CloseIcon","MinusIcon","PlusIcon","OrderItem","onAdjust","getTransparentColor","isEditable","isMultiEditable","handleAdjust","delta","handleAdd","handleSubtract","handleRemove","Infinity","knob","row","quantityText","margin","fontWeight","subtotal","subTotal","OrderItemsList","useOrderProducts","retrieveFn","resolved","setResolved","productIds","serviceIds","Promise","all","warn","missing","StepsFooter","prev","isFetchingPrev","handlePrev","isFetchingNext","handleNext","AdjustingStep","useMatchUrl","removeOrderId","handleModifyItems","Redirect","captureSubmitError","helpers","fieldName","setFieldError","useOrderSubmit","update","INITIAL_SHIPPING_ADDRESS","ShippingAddressStep","_form$optional","_form$optional2","_form$optional3","form","doSubmit","requestCity","optional","requestState","requestPostalCode","Formik","Form","placeholder","CheckCircleIcon","CircleIcon","CheckableItem","contentClass","ListInput","groups","multiple","grid","choiceClassName","activeClassName","groupLabelClassName","fullWidthClassName","renderOption","isSelected","grouped","group","set","option","sort","a","b","indexA","renderOptions","checkMark","choice","rounded","bind","groupLabel","OptionValuePropType","PropTypes","oneOfType","bool","any","arrayOf","isRequired","onChoiceRef","PaymentStep","_immediate$","removeCurrentOrderId","hasOnlineMethods","hasImmediateMethods","isJustOneOnlinePaymentMethods","toStatus","setSelected","optionStyles","found","_ref5","INITIAL_CONTACT_INFO","ContactInfoStep","noLastName","OrderPage","_location$state","toHome","MdContactPhone","collectAddress","PaymentStatusPage","useViewOrder","resolvedStatus","toOrder","_form$successURL","FaRegFrown","FaRegSmileBeam","successMessage","successURL","PassthroughRoute","path","exact","makeProps","p","render","Route","PageProductsRouting","contexts","collectionSlug","module","exports","PLANS","flex","perView","forcePerView","slideClass","slideStyle","array","exceedsPerView","showPagination","hasPagination","slidesPerView","paginationOptions","BaseSwiper","resizeObserver","spaceBetween","SwiperSlide","nonInteractive","require","SwiperCore","use","Pagination","Lazy","Navigation","Autoplay","EffectFade","EffectFlip","satisfies","versionString"],"mappings":"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","file":"6.62c3fc3d5d5a7d6d8508.js","sourcesContent":["import { memoize } from 'lodash';\n\nconst CURRENCY_SYMBOL = new Map([['USD', 'en-US'], ['EUR', 'de-DE']]);\n\nconst resolveFormatter = memoize(\n    (locale, currency) => {\n        if (CURRENCY_SYMBOL.has(currency)) {\n            locale = CURRENCY_SYMBOL.get(currency);\n        }\n\n        return new Intl.NumberFormat(locale, {\n            style: 'currency',\n            currency: currency,\n            currencyDisplay: CURRENCY_SYMBOL.has(currency) ? 'symbol' : 'code',\n            minimumFractionDigits: 0,\n            useGrouping: false,\n        });\n    },\n    (l, c) => `${l}${c}`\n);\n\nconst formatPrice = (amount, currency, locale) => {\n    return resolveFormatter(locale, currency).format(amount);\n};\n\nexport default formatPrice;\n","const defaults = {\n    baseUrl: '/api',\n};\n\n// const meta = document.querySelector('meta[name=\"csrf-token\"]');\n// const csrfToken = meta ? meta.content : undefined;\n\nconst ApiError = (status, statusText) => {\n    const error = Error(statusText);\n    error.status = status;\n    error.type = 'api';\n    return error;\n};\n\nfunction urlSearch(obj) {\n    if (typeof obj !== 'object') return '';\n    const arr = [];\n\n    for (let prop in obj) {\n        const val = obj[prop];\n        if (val !== null && val !== undefined) arr.push(`${prop}=${val}`);\n    }\n\n    return arr.length > 0 ? '?' + arr.join('&') : '';\n}\n\nconst ValidationError = (errors) => {\n    const error = new Error('Validation error');\n    error.type = 'validation';\n    error.errors = errors;\n    return error;\n};\n\nconst AuthorizationError = (message) => {\n    const error = new Error(message);\n    error.type = 'authorization';\n    return error;\n};\n\nfunction isAbsolute(endpoint) {\n    return endpoint.startsWith('http://') || endpoint.startsWith('https://');\n}\n\nexport class BaseApi {\n    constructor(options) {\n        this.options = { ...defaults, ...options };\n    }\n\n    get(endpoint) {\n        return this.request(endpoint);\n    }\n\n    post(endpoint, body) {\n        return this.request(endpoint, { method: 'POST', body });\n    }\n\n    put(endpoint, body) {\n        return this.request(endpoint, { method: 'PUT', body });\n    }\n\n    delete(endpoint) {\n        return this.request(endpoint, { method: 'DELETE' });\n    }\n\n    async request(endpoint, options) {\n        if (Array.isArray(endpoint)) {\n            let params;\n            [endpoint, params] = endpoint;\n            endpoint = endpoint + urlSearch(params);\n        }\n\n        if (!isAbsolute(endpoint)) endpoint = this.options.baseUrl + endpoint;\n\n        const { method, headers, body, ...rest } = { method: 'GET', ...options };\n\n        const response = await fetch(endpoint, {\n            method: ['PUT', 'DELETE'].includes(method.toUpperCase()) ? 'POST' : method,\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'X-HTTP-Method-Override': method.toUpperCase(),\n                // 'X-CSRF-Token': csrfToken,\n                ...headers,\n            },\n            body: body ? JSON.stringify(body) : undefined,\n            ...rest,\n        });\n\n        if (!response.ok) {\n            switch (response.status) {\n                case 400: {\n                    const { errors } = await response.json();\n                    throw ValidationError(errors);\n                }\n                case 401:\n                case 403:\n                    throw AuthorizationError(response.statusText);\n                default:\n                    throw ApiError(response.status, response.statusText);\n            }\n        }\n\n        if (response.status !== 204) {\n            return response.json();\n        }\n    }\n}\n\nexport default (options) => new BaseApi(options);\n","import { BaseApi } from './baseApi';\n\nexport class FeedbackApi extends BaseApi {\n    submit(workspaceId, websiteId, payload) {\n        return this.post(`/workspaces/${workspaceId}/websites/${websiteId}/feedback`, payload);\n    }\n}\n\nexport default ((options) => new FeedbackApi(options))();\n","import { object, string } from 'yup';\n\nimport { __t } from '../trans';\n\nexport const defaultDynamicFieldLengthLimit = 250;\nexport const mapDynamicFieldToName = ({ _id }, index) => _id || `field-${index}`;\nexport const mapDynamicInputsToValidationSchema = ({ items }) =>\n    object({\n        ...items.reduce((acc, item, index) => {\n            const field = mapDynamicFieldToName(item, index);\n            let validator = string()\n                .trim()\n                .max(item.size || defaultDynamicFieldLengthLimit, __t('field_too_long'));\n\n            if (item.required) {\n                validator = validator.required(__t('field_required'));\n            }\n\n            switch (item.type) {\n                case 'email': {\n                    validator = validator.email(__t('field_email'));\n\n                    break;\n                }\n                case 'phone': {\n                    validator = validator.matches(/\\+?[\\d\\-\\s()]{5,}/, {\n                        name: 'phone',\n                        message: __t('field_phone'),\n                        excludeEmptyString: true,\n                    });\n\n                    break;\n                }\n            }\n\n            acc[field] = validator;\n\n            return acc;\n        }, {}),\n    });\n","export const isPaid = ({ plan, status, paid }, allowPastDue = false) => {\n    if (plan && (status === 'trialing' || plan === 'basic' || plan === 'unlimited')) {\n        return true;\n    }\n\n    return paid || (allowPastDue && status === 'past_due');\n};\n\nexport const isBasic = (billing, allowPastDue = false) => billing.plan === 'basic' || !isPaid(billing, allowPastDue);\n","export class AccessRequestError extends Error {\n    constructor(message, code, plan, permission, target) {\n        super(message);\n        this.status = 403;\n        this.code = code;\n        this.plan = plan;\n        this.permission = permission;\n        this.target = target || plan;\n    }\n}\n","import { isPaid } from './isPaid';\nimport { AccessRequestError } from './permissions';\n\nexport class AccessRequestErrorBuilder {\n    constructor({ workspace, allowPastDue }, permissions) {\n        this.workspace = workspace;\n        this.permissions = permissions;\n        this.billing = workspace.billing || {};\n        this.plan = this.billing.plan;\n        this.assumePaid = isPaid(this.billing, allowPastDue);\n        this.subject = null;\n        this.permission = null;\n    }\n\n    setPermission(permission) {\n        this.permission = permission;\n\n        return this;\n    }\n\n    setSubject(subject) {\n        this.subject = subject;\n\n        return this;\n    }\n\n    build() {\n        const { workspace, plan, permission, subject } = this;\n        const paid = this.assumePaid || this.permissions.isGranted(workspace, permission, subject, 'basic');\n        const granted = this.permissions.isGranted(workspace, permission, subject);\n        const upgrade = granted ? plan : this.permissions.lookupUpgrade(workspace, permission, subject);\n\n        if (granted && paid) {\n            return null;\n        }\n\n        const shouldPay = granted && !paid;\n\n        if (shouldPay) {\n            return new AccessRequestError(`Pay for ${plan}`, 'unpaid', plan, permission);\n        }\n\n        if (upgrade) {\n            return new AccessRequestError(`Upgrade to ${upgrade}`, 'upgrade', plan, permission, upgrade);\n        }\n\n        return new AccessRequestError('Access forbidden', 'forbidden', plan, permission);\n    }\n}\n","import memoize from 'memoize-one';\nimport plans from '@mssgme/plans';\n\nexport const getPlans = () => {\n    return Object.values(plans);\n};\n\nconst getId = (plan) => plan.id;\nconst isPaid = (plan) => plan.paddle || plan.liqpay;\nconst isUnpaid = (plan) => !plan.paddle && !plan.liqpay;\nconst isDeprecated = (plan) => plan.deprecated;\nconst isPublished = (plan) => plan.published;\n\nexport const getPlanTypes = memoize(() => {\n    const plans = getPlans();\n    const paid = plans.filter(isPaid).map(getId);\n    const unpaid = ['unlimited', ...plans.filter(isUnpaid).map(getId)];\n    const deprecated = plans.filter(isDeprecated).map(getId);\n    const actual = plans.filter(isPublished).map(getId);\n    const upgradeable = ['basic', ...actual];\n\n    return {\n        BASIC: 'basic',\n        UNLIMITED: 'unlimited',\n        UNPAID: unpaid,\n        PAID: paid,\n        UPGRADEABLE: upgradeable,\n        DEPRECATED: deprecated,\n        ACTUAL: actual,\n    };\n});\n\nexport const getPlanIds = () => {\n    return getPlans().map((plan) => plan.id);\n};\n\nexport const getPlanDefinition = (plan) => {\n    return plan && getPlans().find((definition) => definition.id === plan);\n};\n\nexport const getPlanAllowedQuantity = (plan, quantity) => {\n    const definition = getPlanDefinition(plan);\n    const fixed = definition.fixedQuantity;\n\n    if (fixed) {\n        if (Array.isArray(fixed)) {\n            const [min, max] = fixed.map(Number);\n\n            return Math.max(min, Math.min(quantity || 1, max));\n        }\n\n        return +fixed;\n    }\n\n    return quantity;\n};\n","import { memoize } from 'lodash';\n\nexport const ACTION_CREATE = 'create';\nexport const ACTION_DELETE = 'delete';\nexport const ACTION_VIEW = 'view';\nexport const ACTION_EDIT = 'edit';\nexport const ACTION_ANY = '?';\nexport const ACTION_EVERY = '*';\nexport const ACTION_ALL = [ACTION_CREATE, ACTION_VIEW, ACTION_EDIT, ACTION_DELETE];\n\nexport const ACTION_IDS = [ACTION_CREATE, ACTION_VIEW, ACTION_EDIT, ACTION_DELETE, ACTION_EVERY, ACTION_ANY];\n\nconst actionsSet = new Set(ACTION_IDS);\n\n/**\n * @param {string} permission Permission string to parse\n * @returns {{resource: string, actions: string[]}} Parsed resource and actions list\n */\nexport const parse = memoize((permission) => {\n    const [resource, rawActions = ACTION_EVERY] = permission.split(':');\n    const actions = new Set();\n\n    if (rawActions) {\n        for (const action of rawActions.split(',')) {\n            if (action === ACTION_EVERY) {\n                for (const name of ACTION_ALL) {\n                    actions.add(name);\n                }\n            } else if (actionsSet.has(action)) {\n                actions.add(action);\n            } else {\n                throw new Error(`Unknown action \"${action}\"`);\n            }\n        }\n    } else {\n        for (const name of ACTION_ALL) {\n            actions.add(name);\n        }\n    }\n\n    return {\n        resource,\n        actions: [...actions],\n    };\n});\n\nexport class AccessPermissionRequest {\n    constructor(workspace, subject, role, resourceOrPermission, actions) {\n        this.workspace = workspace;\n        this.subject = subject;\n        this.role = role;\n\n        if (actions) {\n            this.resource = resourceOrPermission;\n            this.actions = actions;\n        } else {\n            this.fill(resourceOrPermission);\n        }\n    }\n\n    get description() {\n        return `[@${this.role} ${this.resource}${this.isEvery() ? '' : ':' + this.actions.join(',')}]${\n            this.subject ? ' @ ' + JSON.stringify(this.subject) : ''\n        }`;\n    }\n\n    get currentUser() {\n        return this.workspace?.owner;\n    }\n\n    get currentUserId() {\n        const user = this.currentUser;\n\n        return user ? String(user._id || user) : null;\n    }\n\n    /**\n     * @param {string} permission Permission string to parse\n     * @returns {this} `this`\n     */\n    fill(permission) {\n        return Object.assign(this, parse(permission));\n    }\n\n    /**\n     * @param {string} permission Permission string to parse\n     * @returns {boolean} `True` if this request matches `permission`\n     */\n    match(permission) {\n        const { resource, actions } = parse(permission);\n\n        return this.on(resource) && this.isEvery(actions);\n    }\n\n    /**\n     * @param {string[]} actions Actions list\n     * @returns {AccessPermissionRequest} Copy of this request, but matching only provided `actions`\n     */\n    only(actions) {\n        return new AccessPermissionRequest(this.workspace, this.subject, this.role, this.resource, actions);\n    }\n\n    on(resource) {\n        return this.resource === resource;\n    }\n\n    includes(action) {\n        return this.actions.includes(action);\n    }\n\n    is(action) {\n        return this.actions.length === 1 && this.actions[0] === action;\n    }\n\n    isAny() {\n        return this.actions.includes(ACTION_ANY);\n    }\n\n    isEvery(actions = ACTION_ALL) {\n        return actions.every((action) => this.actions.includes(action));\n    }\n}\n","import { versionCheck } from '../../../helpers';\n\nexport class Voter {\n    /**\n     * @param {AccessPermissionRequest} request ACL request\n     * @returns {boolean} Truthy if this voter supports this request\n     */\n    // eslint-disable-next-line no-unused-vars\n    supports(request) {\n        return false;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request ACL request\n     * @param {string} version Semver version matcher (e.g. `'>2.0'`, `'^5.1.x'`, `'~2.11||<3.1.0-alpha.1'`)\n     * @returns {boolean} Returns <code>true</code> if semver `version` is matches request.\n     */\n    supportsVersion(request, version) {\n        return versionCheck(request.workspace.projectVersion, version);\n    }\n\n    // eslint-disable-next-line jsdoc/require-returns-check\n    /**\n     * @param {AccessPermissionRequest} request ACL request\n     * @returns {boolean|undefined|void} Returns <code>undefined</code> if this voter abstains from decision,\n     * <code>true</code> if access should be granted, <code>false</code> - if denied.\n     */\n    // eslint-disable-next-line no-unused-vars\n    vote(request) {}\n}\n","import { ACTION_CREATE, ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class WebsitesVoter extends Voter {\n    static getLimitByRole(role) {\n        switch (role) {\n            case 'basic':\n            case 'start400':\n            case 'pro400':\n                return 1;\n            case 'business400':\n                return 10;\n            default:\n                return 3;\n        }\n    }\n\n    supports(request) {\n        return request.resource === 'websites';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE) && !this.canCreate(request)) {\n            return false;\n        }\n\n        if (request.role === 'basic') {\n            if (request.includes(ACTION_EDIT) && !this.canEditBasic(request)) {\n                return false;\n            }\n        }\n\n        //\n        return true;\n    }\n\n    canCreate(request) {\n        const websitesCount = request.workspace.quantities.websites;\n        const roleLimit = WebsitesVoter.getLimitByRole(request.role);\n\n        return websitesCount < roleLimit;\n    }\n\n    canEditBasic(request) {\n        const values = request.subject;\n\n        if (!values) {\n            return true;\n        }\n\n        // if (!values.branding) {\n        //     return false;\n        // }\n\n        // if (values.seo?.title || values.seo?.description) {\n        //     return false;\n        // }\n\n        // if (values.tracking?.google || values.tracking?.facebook || values.tracking?.yandex) {\n        //     return false;\n        // }\n\n        //\n        return true;\n    }\n}\n","import { ACTION_CREATE } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PagesVoter extends Voter {\n    static getLimitByRole(role) {\n        switch (role) {\n            case 'basic':\n                return 1;\n            case 'business400':\n                return 10;\n            case 'start400':\n            case 'pro400':\n            default:\n                return 3;\n        }\n    }\n\n    supports(request) {\n        return request.resource === 'pages';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE) && !this.canCreate(request)) {\n            return false;\n        }\n\n        //\n        return true;\n    }\n\n    canCreate(request) {\n        const pagesCount = request.subject?.website?.counters?.pages || 0;\n        const roleLimit = PagesVoter.getLimitByRole(request.role);\n\n        return pagesCount < roleLimit;\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PageBlocksVoter extends Voter {\n    /**\n     * @param {ACLVoter} acl ACL voter instance\n     */\n    constructor(acl) {\n        super();\n        this.acl = acl;\n    }\n\n    supports(request) {\n        return request.resource === 'page-blocks';\n    }\n\n    vote(request) {\n        const grants = this.acl.vote(request);\n\n        if (grants && (request.includes(ACTION_CREATE) || request.includes(ACTION_EDIT)) && !this.canEdit(request)) {\n            return false;\n        }\n\n        //\n        return grants;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request Request in question\n     * @returns {boolean} True if request is granted\n     */\n    canEdit(request) {\n        if (!request.subject) {\n            return true;\n        }\n\n        const kind = request.subject.kind;\n\n        return this.acl.grantsInArrayPayload(request, (kindOrDescriptor) => {\n            if (typeof kindOrDescriptor === 'string') {\n                return kindOrDescriptor === kind;\n            }\n\n            if (kindOrDescriptor.kind !== kind) {\n                return false;\n            }\n\n            return this.supportsVersion(request, kindOrDescriptor.version);\n        });\n    }\n}\n","import { ACTION_CREATE, ACTION_VIEW, ACTION_EDIT, ACTION_DELETE, ACTION_ANY, ACTION_ALL } from '../request';\n\nconst TOTAL_ACTIONS = ACTION_ALL.length;\nconst ALL_ACCESS = {\n    [ACTION_CREATE]: true,\n    [ACTION_VIEW]: true,\n    [ACTION_EDIT]: true,\n    [ACTION_DELETE]: true,\n};\n\nexport class Resource {\n    /**\n     * @param {string} name\n     * @param {{[string]: boolean}} access\n     */\n    constructor(name, access) {\n        this.name = name;\n        this.access = access || { ...ALL_ACCESS };\n        this._any = null;\n    }\n\n    /**\n     * @param {Resource} resource\n     * @returns {this}\n     */\n    merge(resource) {\n        Object.assign(this.access, resource.access);\n        this._any = null;\n\n        return this;\n    }\n\n    get grantsAny() {\n        if (this._any === null) {\n            let total = 0;\n\n            for (const value of Object.values(this.access)) {\n                total++;\n\n                if (value) {\n                    this._any = true;\n\n                    return true;\n                }\n            }\n\n            this._any = total === TOTAL_ACTIONS ? false : undefined;\n        }\n\n        return this._any;\n    }\n\n    /**\n     * @param {string} action\n     * @returns {boolean}\n     */\n    isGranted(action) {\n        return action === ACTION_ANY ? this.grantsAny : this.access[action];\n    }\n}\n","import { ACTION_ANY } from '../request';\n\nexport class Role {\n    /**\n     * @param {string} name\n     * @param {Role|null} [parent]\n     */\n    constructor(name, parent) {\n        this.name = name;\n        this.parent = parent;\n        this.resources = [];\n    }\n\n    /**\n     * @returns {string[]}\n     */\n    getResourceIds() {\n        return this.resources.map((resource) => resource.name);\n    }\n\n    /**\n     * @param {Resource} resource\n     * @returns {Resource}\n     */\n    addResource(resource) {\n        const existing = this.getResource(resource.name);\n\n        if (existing) {\n            return existing.merge(resource);\n        }\n\n        this.resources.push(resource);\n\n        return resource;\n    }\n\n    /**\n     * @param {string} name\n     * @returns {Resource}\n     */\n    getResource(name) {\n        return this.resources.find((resource) => resource.name === name);\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request Permission request descriptor\n     * @param {boolean} [strict] Check only this role (no parent role checks)\n     * @returns {boolean} True if granted\n     */\n    isGranted(request, strict = false) {\n        let examine;\n        const resource = this.getResource(request.resource);\n\n        if (resource) {\n            let granted;\n\n            if (request.isAny()) {\n                granted = resource.isGranted(ACTION_ANY);\n\n                if (granted !== undefined) {\n                    return granted;\n                }\n            } else {\n                examine = new Set(request.actions);\n\n                for (const action of request.actions) {\n                    const got = resource.isGranted(action);\n\n                    if (got === false) {\n                        return false;\n                    }\n\n                    if (got === true) {\n                        examine.delete(action);\n                    }\n                }\n\n                if (examine.size) {\n                    request = request.only([...examine]);\n                } else {\n                    return true;\n                }\n            }\n        }\n\n        return (!strict && this.parent && this.parent.isGranted(request)) || false;\n    }\n}\n","export class ACL {\n    constructor() {\n        this.roles = [];\n    }\n\n    /**\n     * @returns {string[]}\n     */\n    getRoleIds() {\n        return this.roles.map((role) => role.name);\n    }\n\n    /**\n     * @returns {string[]}\n     */\n    getRuleIds() {\n        return [...new Set([].concat(...this.roles.map((role) => role.getResourceIds())))];\n    }\n\n    /**\n     * @param {Role} role\n     * @returns {Role}\n     */\n    addRole(role) {\n        if (this.getRole(role.name)) {\n            throw new Error(`Multiple definitions of \"${role.name}\" role`);\n        }\n\n        this.roles.push(role);\n\n        return role;\n    }\n\n    /**\n     * @param {string} name\n     * @returns {Role}\n     */\n    getRole(name) {\n        return this.roles.find((layer) => layer.name === name);\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    isGranted(request) {\n        const role = this.getRole(request.role);\n\n        if (!role) {\n            return false;\n        }\n\n        return role.isGranted(request);\n    }\n}\n","import { parse } from '../request';\nimport { Resource } from './resource';\nimport { Role } from './role';\nimport { ACL } from './acl';\n\nexport class ACLLoader {\n    constructor(definitions) {\n        this.definitions = definitions;\n    }\n\n    load() {\n        const acl = new ACL();\n\n        for (const {\n            id,\n            rules: { extend, grant, reject },\n        } of this.definitions) {\n            const parent = extend && acl.getRole(extend);\n            const role = acl.addRole(new Role(id, parent));\n\n            for (const [rules, granted] of [[grant, true], [reject, false]]) {\n                if (rules) {\n                    for (const rule of rules) {\n                        role.addResource(this.parseRuleDefinition(rule, granted));\n                    }\n                }\n            }\n        }\n\n        return acl;\n    }\n\n    parseRuleDefinition(value, granted) {\n        if (typeof value === 'object') {\n            const { rule, ...payload } = value;\n            const parsed = this.parseRuleDefinition(rule, granted);\n\n            parsed.payload = payload;\n\n            return parsed;\n        }\n\n        const { resource, actions } = parse(value);\n\n        return new Resource(resource, actions.reduce((acc, action) => ((acc[action] = granted), acc), {}));\n    }\n}\n","import { getPlans } from '../../plans';\n\nimport { Permissions } from './permissions';\nimport {\n    ACLVoter,\n    CollectionsVoter,\n    MessengersVoter,\n    PageBlocksPublishVoter,\n    PageBlocksVoter,\n    PageStylingVoter,\n    PagesVoter,\n    PageTemplatesVoter,\n    PageThemesVoter,\n    ProductsVoter,\n    SubscriptionFormFieldVoter,\n    UnlimitedPlanVoter,\n    VersionVoter,\n    WebsitesVoter,\n} from './voters/impl';\nimport { ACLLoader } from './acl/loader';\n\nexport { AccessPermissionRequest } from './request';\nexport { AccessRequestError } from './requestError';\nexport { WebsitesVoter } from './voters/impl';\n\nlet acl;\n\nexport const aclVoter = new ACLVoter(() => (acl || (acl = new ACLLoader(getPlans()).load())));\n\nexport const permissions = new Permissions(aclVoter, [\n    new UnlimitedPlanVoter(),\n    new VersionVoter({\n        'ru-integrations': '<5.14',\n    }),\n    // new LinksVoter(),\n    // new DesignVoter(),\n    // new ProfileVoter(),\n    // new ReviewsVoter(),\n    new CollectionsVoter(),\n    new MessengersVoter(),\n    new ProductsVoter(),\n    new WebsitesVoter(),\n    new PagesVoter(),\n    new PageTemplatesVoter(),\n    new PageThemesVoter(aclVoter),\n    new PageStylingVoter(aclVoter),\n    new PageBlocksVoter(aclVoter),\n    new PageBlocksPublishVoter(aclVoter),\n    new SubscriptionFormFieldVoter(),\n    aclVoter,\n]);\n","import { Voter } from '../voter';\n\nexport class ACLVoter extends Voter {\n    constructor(loader) {\n        super();\n        this.loader = loader;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request Request in question\n     * @returns {boolean} True if request supported by this voter\n     */\n    // eslint-disable-next-line no-unused-vars\n    supports(request) {\n        return true;\n    }\n\n    vote(request) {\n        return this.acl.isGranted(request);\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request Request in question\n     * @param {string|function(*): boolean} matches Permission matching predicate\n     * @returns {boolean} <code>True</code> - if grant status given, else <code>False</code>\n     */\n    grantsInArrayPayload(request, matches) {\n        const predicate = typeof matches === 'function' ? matches : (item) => item === matches;\n        let role = this.acl.getRole(request.role);\n\n        while (role) {\n            const resource = role.getResource(request.resource);\n\n            if (resource) {\n                if (resource.payload) {\n                    const { grant, reject } = resource.payload;\n\n                    if (grant && (grant === '*' || grant.some(predicate))) {\n                        return true;\n                    }\n\n                    if (reject && (reject === '*' || reject.some(predicate))) {\n                        return false;\n                    }\n                } else if (role.isGranted(request, true)) {\n                    return true;\n                }\n            }\n\n            role = role.parent;\n        }\n\n        return false;\n    }\n\n    /**\n     * @returns {ACL} Loaded ACL table\n     */\n    get acl() {\n        if (!this._acl) {\n            this._acl = this.loader();\n        }\n\n        return this._acl;\n    }\n}\n","import { getPlanTypes } from '../../plans';\n\nimport { AccessPermissionRequest } from './request';\nimport { Voters } from './voters';\n\nexport class Permissions extends Voters {\n    constructor(aclVoter, voters) {\n        super(voters);\n        this.aclVoter = aclVoter;\n    }\n\n    get acl() {\n        return this.aclVoter.acl;\n    }\n\n    /**\n     *  Query the permissions for the specified workspace member to perform actions, possibly against specific target.\n     *\n     * @param {{ billing: * }} workspace Queried workspace\n     * @param {string} permission Permission string (resource[:(action|?|*)])\n     * @param {*} [subject] Target, against which the query is executed\n     * @param {string} [role] User role (tariff plan)\n     * @returns {boolean} Result of querying\n     */\n    isGranted(workspace, permission, subject, role) {\n        return this.vote(new AccessPermissionRequest(workspace, subject, role || workspace.billing?.plan, permission));\n    }\n\n    /**\n     * @param {{ billing: * }} workspace Queried workspace entity descriptor\n     * @param {string} permission Permission string (resource[:(action|?|*)])\n     * @param {*} [subject] Target, against which the query is executed\n     * @returns {string|void} Plan ID if upgrade found\n     */\n    lookupUpgrade(workspace, permission, subject) {\n        const { UPGRADEABLE } = getPlanTypes();\n        const roles = this.acl.getRoleIds();\n        let current = true;\n        let index = roles.indexOf(workspace.billing?.plan);\n        let role;\n\n        while ((role = roles[index++])) {\n            if (!(current || UPGRADEABLE.includes(role))) {\n                continue;\n            }\n\n            const granted = this.vote(new AccessPermissionRequest(workspace, subject, role, permission));\n\n            if (granted) {\n                return role;\n            }\n\n            current = false;\n        }\n    }\n}\n","/**\n * @property {Voter[]} voters\n */\nexport class Voters {\n    constructor(voters = []) {\n        this.voters = voters;\n    }\n\n    /**\n     * @param {Voter} voter\n     */\n    addVoter(voter) {\n        this.voters.push(voter);\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    vote(request) {\n        for (const voter of this.voters) {\n            if (!voter.supports(request)) {\n                continue;\n            }\n\n            const granted = voter.vote(request);\n\n            if (granted !== undefined) {\n                return granted;\n            }\n        }\n\n        return true;\n    }\n}\n","import { Voter } from '../voter';\n\nexport class UnlimitedPlanVoter extends Voter {\n    supports(request) {\n        return request.role === 'unlimited' && request.resource !== 'page-templates';\n    }\n\n    vote() {\n        return true;\n    }\n}\n","import { Voter } from '../voter';\n\nexport class VersionVoter extends Voter {\n    constructor(constraints) {\n        super();\n        this.constraints = constraints;\n    }\n\n    supports(request) {\n        return !!this.constraints[request.resource];\n    }\n\n    vote(request) {\n        if (!this.supportsVersion(request, this.constraints[request.resource])) {\n            return false;\n        }\n\n        // returning undefined here means 'abstain' from voting\n        // so, we restrict permission if version check fails by returning 'false',\n        // and 'abstain' from voting (essentially allowing the other voters to decide) otherwise by returning 'undefined'\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT, ACTION_DELETE } from '../../request';\nimport { Voter } from '../voter';\n\nexport class CollectionsVoter extends Voter {\n    supports(request) {\n        return request.resource === 'collections';\n    }\n\n    vote(request) {\n        if (request.role === 'basic') {\n            if (request.includes(ACTION_CREATE)) {\n                return false;\n            }\n\n            if (request.includes(ACTION_EDIT)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_EDIT)) {\n            if (!this.canEdit(request)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_DELETE)) {\n            if (!this.canDelete(request)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canEdit(request) {\n        return request.subject && !request.subject.default;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canDelete(request) {\n        return !request.subject.default;\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class MessengersVoter extends Voter {\n    supports(request) {\n        return request.role === 'basic' && request.resource === 'messengers' && this.supportsVersion(request, '>=2.11');\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE)) {\n            if (!this.canCreate(request)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_EDIT)) {\n            if (!this.canEdit(request)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canCreate(request) {\n        // can check for enabled messengers count instead,\n        // but creation of already existing messenger should rise 'Already exists' error,\n        // not 'Access forbidden' error\n        return this.canEdit(request);\n    }\n\n    canEdit({ workspace, subject }) {\n        if (!subject) {\n            return true;\n        }\n\n        const enabled = workspace.card.messengers.find((m) => m.enabled);\n\n        return !(enabled && enabled.messenger !== subject.messenger);\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class ProductsVoter extends Voter {\n    supports(request) {\n        return request.role === 'basic' && request.resource === 'products';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE)) {\n            if (!this.canCreate(request)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_EDIT)) {\n            if (!this.canEdit(request)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canCreate(request) {\n        return this.canEdit(request);\n    }\n\n    canEdit({ subject, workspace }) {\n        if (subject?.slug) {\n            return true;\n        }\n\n        return workspace.card.products.count < 10;\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT, ACTION_DELETE } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PageTemplatesVoter extends Voter {\n    supports(request) {\n        return request.resource === 'page-templates';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE)) {\n            if (!this.canCreate(request)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_EDIT)) {\n            if (!this.canEdit(request)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_DELETE)) {\n            if (!this.canDelete(request)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canCreate(request) {\n        const count = request.workspace.quantities.templates;\n\n        switch (request.role) {\n            case 'unlimited':\n                return count < 20;\n\n            default:\n                return false;\n        }\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canDelete(request) {\n        return this.canEdit(request);\n    }\n\n    canEdit(request) {\n        if (!request.subject?._id) {\n            return true;\n        }\n\n        return String(request.subject.author) === request.currentUserId;\n    }\n}\n","import { ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PageThemesVoter extends Voter {\n    /**\n     * @param {ACLVoter} acl ACL voter instance\n     */\n    constructor(acl) {\n        super();\n        this.acl = acl;\n    }\n\n    supports(request) {\n        return request.resource === 'page-themes';\n    }\n\n    vote(request) {\n        const grant = this.acl.vote(request);\n\n        if (grant && request.includes(ACTION_EDIT) && !this.canEdit(request)) {\n            return false;\n        }\n\n        //\n        return grant;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canEdit(request) {\n        return request.subject ? this.acl.grantsInArrayPayload(request, request.subject.colorId) : true;\n    }\n}\n","import { ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PageStylingVoter extends Voter {\n    /**\n     * @param {ACLVoter} acl ACL voter instance\n     */\n    constructor(acl) {\n        super();\n        this.acl = acl;\n    }\n\n    supports(request) {\n        return request.resource === 'page-styling';\n    }\n\n    vote(request) {\n        const grant = this.acl.vote(request);\n\n        if (grant && request.includes(ACTION_EDIT) && !this.canEdit(request)) {\n            return false;\n        }\n\n        //\n        return grant;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canEdit(request) {\n        return request.subject ? this.acl.grantsInArrayPayload(request, request.subject.type) : true;\n    }\n}\n","import { PageBlocksVoter } from './blocks';\n\nexport class PageBlocksPublishVoter extends PageBlocksVoter {\n    supports(request) {\n        return request.resource === 'page-blocks-publish';\n    }\n\n    vote(request) {\n        return super.vote(request) && this.canEdit(request);\n    }\n}\n","import { ACTION_CREATE } from '../../request';\nimport { Voter } from '../voter';\n\nexport class SubscriptionFormFieldVoter extends Voter {\n    supports(request) {\n        return request.role === 'basic' && request.resource === 'subscription-form-field';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE) && !this.canCreate(request)) {\n            return false;\n        }\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canCreate({ subject }) {\n        const lockedItem = subject?.items?.find(({ type }) => type !== 'email');\n\n        return !lockedItem;\n    }\n}\n","import { AccessRequestErrorBuilder } from './errorBuilder';\nimport { permissions } from './permissions';\n\n/**\n * @param {{ workspace: *; allowPastDue?: boolean }} context Restriction context\n * @param {string} permission Rule to check in the format \"<resource name>\" [ \":\" (\"*\" | \"?\" | \"<action name>\") ]\n * @param {* | ((error: AccessRequestError|undefined) => void)} [subjectOrCallback] Restriction subject\n * @param {(error: AccessRequestError|undefined, subject?: *) => void|false} [callback] If specified, callback would be called with the check error as first arg\n * @returns {AccessRequestError|null} Error if check fails\n */\nexport const checkRestrictions = (context, permission, subjectOrCallback, callback) => {\n    if (__DEV__ && Array.isArray(permission)) {\n        throw new Error(`Permission should not be an array, got \"${permission}\"`);\n    }\n\n    let subject = subjectOrCallback;\n\n    if (typeof subject === 'function') {\n        callback = subject;\n        subject = null;\n    }\n\n    const builder = new AccessRequestErrorBuilder(context, permissions).setPermission(permission);\n    let error = null;\n\n    if (subject && Array.isArray(subject)) {\n        for (const item of subject) {\n            const itemError = builder.setSubject(item).build();\n\n            if (callback) {\n                if (false !== callback(itemError, item)) {\n                    error = itemError;\n                    break;\n                }\n            } else if (itemError) {\n                return itemError;\n            }\n        }\n\n        if (callback) {\n            callback(error);\n        }\n    } else {\n        error = builder.setSubject(subject).build();\n\n        if (callback) {\n            callback(error, subject);\n        }\n    }\n\n    return error;\n};\n\nexport const checkRestrictionsOrThrow = (context, permission, subject) => {\n    const error = checkRestrictions(context, permission, subject);\n\n    if (error) {\n        throw error;\n    }\n};\n","import deepEqual from 'fast-deep-equal';\nimport { useEffect, useRef, useState } from 'react';\nimport { EventEmitter } from 'events';\n\nimport { checkRestrictions } from '@mssgme/shared';\nimport { useWorkspace } from './useWorkspace';\nimport { useEventCallback } from './useEventCallback';\n\n// TODO: refactor, use redux, context or useSyncExternalStore instead of EventEmitter\nexport function createHooks() {\n    const ee = new EventEmitter();\n\n    ee.setMaxListeners(100);\n\n    const show = (...args) => ee.emit('show', ...args);\n    const hide = () => ee.emit('hide');\n\n    function useWarning() {\n        const [state, setState] = useState({ isPresented: false, warning: null });\n\n        useEffect(() => {\n            const onShow = (warning) => setState({ isPresented: true, warning });\n            const onHide = () => setState((prevState) => ({ ...prevState, isPresented: false }));\n\n            ee.on('show', onShow);\n            ee.on('hide', onHide);\n\n            return () => {\n                ee.removeListener('show', onShow);\n                ee.removeListener('hide', onHide);\n            };\n        }, []);\n\n        return {\n            ...state,\n            show,\n            hide,\n        };\n    }\n\n    function useRestriction(rule, subject) {\n        const workspace = useWorkspace();\n        const ref = useRef(null);\n        const [warning, setWarning] = useState(null);\n\n        const checkRule = useEventCallback(\n            (rule, subject) => checkRestrictions({ workspace }, rule, subject, setWarning)\n        );\n        const showWarning = useEventCallback((w) => show(w || warning));\n        const clearWarning = useEventCallback(() => setWarning(null));\n        const handleBlockedEvent = useEventCallback((e) => {\n            if (e?.preventDefault) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n\n            show(warning);\n        });\n\n        if (!ref.current) {\n            ref.current = [rule, subject];\n        } else if (subject !== ref.current[1]) {\n            const isObject = subject && typeof subject === 'object';\n\n            if (!(isObject && deepEqual(subject, ref.current[1]))) {\n                ref.current = [rule, subject];\n            }\n        }\n\n        useEffect(() => {\n            if (rule) {\n                checkRule(rule, subject);\n            }\n        }, ref.current);\n\n        return {\n            warning,\n            hasWarning: !!warning,\n            showWarning,\n            clearWarning,\n            hideWarning: hide,\n            handleBlockedEvent: warning ? handleBlockedEvent : undefined,\n            checkRule,\n        };\n    }\n\n    return { useWarning, useRestriction };\n}\n\nconst { useWarning, useRestriction } = createHooks();\n\nexport { useWarning, useRestriction };\n","import { useSelector } from 'react-redux';\n\nexport function useWorkspace() {\n    return useSelector((state) => state.workspace);\n}\n","import { useCallback, useMemo, useReducer, useRef } from 'react';\nimport { useMountedState } from 'react-use';\nimport { get } from 'lodash';\n\nimport { ValidationError, ForbiddenError } from '@mssgme/api-client';\nimport { useWarning } from './useRestrictions';\n\nlet lastRequestId = 0;\n\nconst defaultState = {\n    pending: false,\n    fulfilled: false,\n    rejected: false,\n    error: null,\n    result: null,\n};\n\nconst initialState = {\n    ...defaultState,\n    requestId: -1,\n    requestCount: 0,\n};\n\nfunction reducer(state, { type, requestId, ...rest }) {\n    if (state.requestId > requestId) {\n        return state;\n    }\n\n    switch (type) {\n        case 'pending':\n            return { ...state, ...defaultState, requestId, pending: true, requestCount: state.requestCount + 1 };\n        case 'fulfilled':\n            return { ...state, ...defaultState, requestId, fulfilled: true, result: rest.result };\n        case 'rejected':\n            return { ...state, ...defaultState, requestId, rejected: true, error: rest.error };\n        default:\n            throw new Error();\n    }\n}\n\n/**\n * @template {*} R\n * @template {function(): Promise<R>} T\n * @param {T} fn Traced callback\n * @param {*[]} deps Callback dependencies\n * @returns {{\n *  pending: true,\n *  run: T\n * } | {\n *  fulfilled: true,\n *  result: R,\n *  run: T\n * } | {\n *  rejected: true,\n *  error: Error,\n *  validationErrors: *,\n *  getValidationError: function(string): *,\n *  run: T\n * }} Fetcher descriptor\n */\nexport function useFetching(fn, deps = []) {\n    const ref = useRef(fn);\n    const isMounted = useMountedState();\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const { show } = useWarning();\n\n    ref.current = fn;\n\n    const run = useCallback(async (...args) => {\n        function safeDispatch(...args) {\n            if (isMounted()) {\n                dispatch(...args);\n            }\n        }\n\n        const requestId = lastRequestId++;\n\n        safeDispatch({ type: 'pending', requestId });\n\n        try {\n            const result = await ref.current(...args);\n            safeDispatch({ type: 'fulfilled', requestId, result });\n        } catch (error) {\n            safeDispatch({ type: 'rejected', requestId, error });\n\n            // can be handled explicitly in business logic, otherwise handle automatically\n            if (ForbiddenError.isPermissionBlock(error)) {\n                show(error);\n            }\n        }\n    }, deps);\n\n    return useMemo(() => {\n        const validationErrors = ValidationError.is(state.error) ? state.error.errors : {};\n        const getValidationError = (name) => get(validationErrors, name);\n\n        return {\n            ...state,\n            validationErrors,\n            getValidationError,\n            run,\n        };\n    }, [state, run]);\n}\n","import React, { useCallback } from 'react';\nimport { useFormikContext } from 'formik';\n\nimport { Button } from '../Inputs';\nimport { SubmitButtonProps } from './types';\n\nexport default function SubmitButton({\n    as: Component = Button,\n    isInitialHidden = false,\n    onClick = undefined,\n    ...rest\n}) {\n    const { submitForm, dirty, isSubmitting } = useFormikContext();\n    const isHidden = !dirty && isInitialHidden;\n\n    const handleClick = useCallback((e) => {\n        e.preventDefault();\n        submitForm();\n    });\n\n    if (isHidden) return null;\n\n    return <Component isFetching={isSubmitting} disabled={!dirty} onClick={onClick || handleClick} {...rest} />;\n}\n\nSubmitButton.propTypes = SubmitButtonProps;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2B3ofJ5E\",\"counter\":\"_3-b9pfi-\",\"input\":\"_2DRCzfDh\",\"inlineEdit\":\"YPgCGw-v\",\"error\":\"_1_PCEXDn\",\"sizeNormal\":\"DzCEGuof\",\"small\":\"hVVuxPYt\",\"grey\":\"_2AB3cyPB\",\"disabled\":\"jZa3dVTS\",\"select\":\"_3ZdF5RHe\",\"input-wrapper\":\"_1GswEJx-\",\"inputWrapper\":\"_1GswEJx-\",\"builderInput\":\"_2jRUtpby\",\"hexInput\":\"_28ye7akn\",\"contextBlock\":\"_28j5RRRN\",\"clearAddon\":\"_26G-OSX_\",\"icon\":\"_1AAPpJVf\",\"root_grey\":\"rf7_RATV\",\"rootGrey\":\"rf7_RATV\",\"before\":\"_25tSvmqV\",\"after\":\"_3GByWsk_\",\"hasRightAddon\":\"_13_oLbQh\",\"hidden\":\"_2zAg-NV4\",\"padding-right\":\"_3o8wApXg\",\"paddingRight\":\"_3o8wApXg\",\"clearable\":\"_1NP8_n7i\"};","import PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport composeRefs from '@seznam/compose-react-refs';\nimport React, { useCallback, useRef } from 'react';\nimport { useMount } from 'react-use';\nimport { FiX } from 'react-icons/fi';\n\nimport { cls } from '@mssgme/helpers';\nimport { renderNode } from '../../../helpers';\n\nimport styles from './styles.scss';\n\nInput.propTypes = {\n    containerClassName: PropTypes.string,\n    inputClassName: PropTypes.string,\n    className: PropTypes.string,\n    hasError: PropTypes.bool,\n    autoFocus: PropTypes.bool,\n    refInput: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    icon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    beforeInput: PropTypes.any,\n    afterInput: PropTypes.any,\n    maxLength: PropTypes.number,\n    type: PropTypes.oneOf(['text', 'email', 'search', 'number', 'password', 'tel', 'datetime-local', 'hidden']),\n    size: PropTypes.oneOf(['small', 'normal']),\n    value: PropTypes.string,\n    disabled: PropTypes.bool,\n    inputStyle: PropTypes.oneOf(['default', 'grey']),\n    isSelectAddon: PropTypes.bool,\n    clearable: PropTypes.bool,\n    hexInput: PropTypes.bool,\n    hidden: PropTypes.bool,\n    builderInput: PropTypes.bool,\n};\n\nInput.defaultProps = {\n    containerClassName: '',\n    hasError: false,\n    disabled: false,\n    type: 'text',\n    inputStyle: 'default',\n    builderInput: false,\n    autoFocus: false,\n    isSelectAddon: true,\n};\n\nconst renderAddon = (node, className, isSelect) => {\n    let addon = renderNode(node);\n\n    if (addon) {\n        if (typeof addon === 'string' || !isSelect) {\n            addon = <div className={classNames(styles.contextBlock, className)}>{addon}</div>;\n        } else if (isSelect) {\n            addon = React.cloneElement(addon, cls(classNames(addon.props.className, styles.select), addon.props));\n        }\n    }\n\n    return addon;\n};\n\nexport default function Input({\n    className,\n    containerClassName,\n    inputClassName,\n    hasError,\n    icon: Icon,\n    size,\n    beforeInput,\n    afterInput,\n    hexInput,\n    hidden,\n    maxLength,\n    value,\n    disabled,\n    refInput,\n    inputStyle,\n    builderInput,\n    autoFocus,\n    isSelectAddon,\n    clearable,\n    ...rest\n}) {\n    const isFilled = clearable && !!value;\n    const handleClear = useCallback(() => rest.onChange?.({ target: { name: rest.name, value: '' } }), [\n        rest.name,\n        rest.onChange,\n    ]);\n\n    const _beforeInput = renderAddon(beforeInput, className, isSelectAddon);\n    const _afterInput = renderAddon(afterInput, className, isSelectAddon);\n\n    const _rootClassName = classNames(\n        styles.root,\n        {\n            [styles.icon]: Icon,\n            [styles.before]: _beforeInput,\n            [styles.after]: _afterInput,\n            [styles.hidden]: hidden,\n            [styles.hexInput]: hexInput,\n            [styles.disabled]: disabled,\n            [styles.builderInput]: builderInput,\n            [styles.clearable]: isFilled,\n        },\n        inputStyle && styles[`root_${inputStyle}`],\n        containerClassName\n    );\n    const _inputClassName = classNames(\n        className,\n        styles.input,\n        {\n            [styles.error]: hasError,\n            [styles.paddingRight]: maxLength,\n            [styles.small]: size === 'small',\n            [styles.sizeNormal]: size === 'normal',\n        },\n        inputStyle && styles[inputStyle],\n        inputClassName\n    );\n    const valueLength = value ? String(value).trim().length : 0;\n    const ref = useRef();\n\n    useMount(() => {\n        if (autoFocus) {\n            setTimeout(() => ref.current?.focus(), 100);\n        }\n    });\n\n    return (\n        <div className={_rootClassName}>\n            {Icon && <Icon size={25} color=\"#C7C7CC\" />}\n            {_beforeInput}\n            <div className={styles.inputWrapper}>\n                <input\n                    ref={composeRefs(ref, refInput)}\n                    className={_inputClassName}\n                    value={value}\n                    maxLength={maxLength}\n                    disabled={disabled}\n                    {...rest}\n                />\n                {maxLength && <span className={styles.counter}>{maxLength - valueLength}</span>}\n                {isFilled && (\n                    <div\n                        className={classNames(styles.clearAddon, !_afterInput && styles.hasRightAddon)}\n                        onClick={handleClear}\n                    >\n                        <FiX size={14} style={{ marginBottom: -1 }} />\n                    </div>\n                )}\n            </div>\n            {_afterInput}\n        </div>\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"j05O8Kqk\",\"root\":\"_1T-3Pm-I\",\"counter\":\"_3JWkk3hT\",\"error\":\"_1v3R6Nod\",\"padding-right\":\"KVOrN3Dt\",\"paddingRight\":\"KVOrN3Dt\",\"builderInput\":\"_1lP6I7Pv\",\"normal\":\"iJibajlA\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport TextareaAutosize from 'react-textarea-autosize';\n\nimport styles from './styles.scss';\n\nexport default function Textarea({ className, hasError, maxLength, value, size, builderInput, ...rest }) {\n    const _className = classNames(styles.root, className, {\n        [styles.error]: hasError,\n        [styles.paddingRight]: maxLength,\n        [styles[size]]: !!size,\n        [styles.builderInput]: builderInput,\n    });\n    const _value = value || '';\n\n    return (\n        <div className={styles.container}>\n            <TextareaAutosize value={_value} className={_className} maxLength={maxLength} {...rest} />\n            {maxLength && <span className={styles.counter}>{maxLength - _value.trim().length}</span>}\n        </div>\n    );\n}\n\nTextarea.propTypes = {\n    className: PropTypes.string,\n    hasError: PropTypes.bool,\n    maxLength: PropTypes.number,\n    minRows: PropTypes.number,\n    maxRows: PropTypes.number,\n    size: PropTypes.oneOf(['normal']),\n    value: PropTypes.string,\n    builderInput: PropTypes.bool,\n};\n\nTextarea.defaultProps = {\n    minRows: 2,\n    maxRows: 5,\n    builderInput: false,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"JbT8d0t8\",\"right\":\"_3fbTNNoe\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './styles.scss';\n\nconst FormRow = ({ className, hasError, align, children, as: Tag = 'div', ...rest }) => (\n    <Tag className={classNames(className, styles.root, { [styles.right]: align === 'right' })} {...rest}>\n        {children}\n    </Tag>\n);\n\nFormRow.propTypes = {\n    className: PropTypes.string,\n    hasError: PropTypes.bool,\n    children: PropTypes.any,\n    as: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType, PropTypes.func]),\n    align: PropTypes.oneOf(['left', 'right']),\n};\n\nFormRow.defaultProps = {\n    hasError: false,\n};\n\nexport default FormRow;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3bntFHH4\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './styles.scss';\n\nconst Label = ({ className, hasError, children, ...rest }) => (\n    <label className={classNames(styles.root, className)} {...rest}>\n        {children}\n    </label>\n);\n\nLabel.propTypes = {\n    className: PropTypes.string,\n    hasError: PropTypes.bool,\n    children: PropTypes.any,\n};\n\nLabel.defaultProps = {\n    hasError: false,\n};\n\nexport default Label;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_1cnTjnAM\",\"nonCritical\":\"_3hRipkpF\",\"shake\":\"_3QPDy911\",\"animated\":\"_2GF_HvGn\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport styles from './styles.scss';\n\nFormErrors.propTypes = {\n    error: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n    critical: PropTypes.bool,\n    shake: PropTypes.bool,\n    errorStyle: PropTypes.object,\n};\n\nexport default function FormErrors({ error, critical = true, shake, errorStyle }) {\n    if (!error) return null;\n\n    const errors = Array.isArray(error) ? error : [error];\n\n    return (\n        <ul\n            className={classNames(styles.root, {\n                [styles.nonCritical]: !critical,\n                [styles.shake]: shake,\n                [styles.animated]: shake,\n            })}\n            style={errorStyle}\n        >\n            {errors.map((msg, index) => (\n                <li key={index}>{msg}</li>\n            ))}\n        </ul>\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"label-container\":\"_3JlfBHF5\",\"labelContainer\":\"_3JlfBHF5\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Input } from '../Inputs';\nimport FormRow from '../FormRow';\nimport Label from '../Label';\nimport FormErrors from '../FormErrors';\n\nimport styles from './styles.scss';\n\nconst labelStyle = { paddingLeft: 10, color: '#333', marginBottom: 4 };\nexport default function FormField({\n    component: Component = Input,\n    id,\n    label,\n    required,\n    labelClassName,\n    inputClassName,\n    errorStyle,\n    shakeError,\n    errors,\n    wrapAs,\n    children,\n    ...rest\n}) {\n    return (\n        <FormRow as={wrapAs}>\n            {label && (\n                <div className={styles.labelContainer}>\n                    <Label\n                        style={rest.builderInput ? labelStyle : null}\n                        htmlFor={id}\n                        hasError={!!errors}\n                        className={labelClassName}\n                    >\n                        {label} {required && <span>*</span>}\n                    </Label>\n                </div>\n            )}\n            <Component id={id} className={inputClassName} hasError={!!errors} {...rest} />\n            {children}\n            {errors && <FormErrors error={errors} errorStyle={errorStyle} shake={shakeError} />}\n        </FormRow>\n    );\n}\n\nFormField.propTypes = {\n    component: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n    wrapAs: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType, PropTypes.func]),\n    label: PropTypes.string,\n    id: PropTypes.string,\n    labelClassName: PropTypes.string,\n    inputClassName: PropTypes.string,\n    errorStyle: PropTypes.object,\n    children: PropTypes.node,\n    placeholder: PropTypes.string,\n    required: PropTypes.bool,\n    shakeError: PropTypes.bool,\n    errors: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.array]),\n};\n","import { useMemo } from 'react';\n\nimport { ProductsBlockKind } from '@mssgme/shared';\nimport { useElementTheme, useTheme } from '@mssgme/ui';\n\nexport const useModalThemes = (kind = ProductsBlockKind) => {\n    const baseTheme = useTheme();\n    const { theme, style } = useElementTheme({ baseTheme, elementPath: `blocks.${kind.toLowerCase()}`, compile: true });\n\n    return useMemo(\n        () => ({\n            theme,\n            style,\n            // todo: find out why this is needed (`colors.background` vs `page.backgroundColor`)\n            modalStyle: { ...style, backgroundColor: baseTheme.colors.background },\n            contentStyle: { ...theme, ...style, backgroundColor: baseTheme.colors.background },\n        }),\n        [theme, style]\n    );\n};\n","import { useMemo } from 'react';\n\nexport const useCustomInputTheme = (customTheme) => {\n    return useMemo(\n        () =>\n            customTheme && {\n                input: {\n                    backgroundColor: customTheme.inputBackgroundColor,\n                    color: customTheme.inputTextColor,\n                    border: 'none',\n                    borderRadius: customTheme.borderRadius,\n                },\n                error: {\n                    color: customTheme.inputTextColor,\n                    padding: '2px 8px',\n                    backgroundColor: customTheme.inputBackgroundColor,\n                    display: 'inline-block',\n                    borderRadius: customTheme.borderRadius,\n                },\n            },\n        [customTheme]\n    );\n};\n","import { SubscriptionFormBlockKind } from '@mssgme/shared';\nimport { useModalThemes } from './useModalThemes';\nimport { useCustomInputTheme } from './useCustomInputTheme';\n\nexport const useInputTheme = () => {\n    const { theme } = useModalThemes(SubscriptionFormBlockKind);\n\n    return useCustomInputTheme(theme);\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"input\":\"_2Hf-7TD7\",\"label\":\"VD2M--7_\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useField } from 'formik';\n\nimport { __t } from '@mssgme/shared';\nimport { FormField } from '@mssgme/ui';\nimport { useInputTheme, useCustomInputTheme } from '../../../hooks';\n\nimport styles from './TextField.scss';\n\nconst propTypes = {\n    ...FormField.propTypes,\n    theme: PropTypes.object,\n    name: PropTypes.string.isRequired,\n};\n\nexport function TextField({ theme, ...props }) {\n    const defaultStyle = useInputTheme(theme);\n    const customStyle = useCustomInputTheme(theme);\n    const [field, meta] = useField(props);\n    const style = customStyle || defaultStyle;\n\n    return (\n        <FormField\n            shakeError\n            type=\"text\"\n            errors={meta.touched && meta.error}\n            label={props.label ? null : __t(props.name)}\n            style={style.input}\n            errorStyle={style.error}\n            inputClassName={styles.input}\n            labelClassName={styles.label}\n            {...field}\n            {...props}\n        />\n    );\n}\n\nTextField.propTypes = propTypes;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"qsFFCJh2\"};","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { mapDynamicFieldToName } from '@mssgme/shared';\nimport { cls } from '@mssgme/helpers';\nimport { Input, Textarea } from '@mssgme/ui';\nimport { TextField } from '../Inputs';\n\nimport styles from './DynamicFormInputs.scss';\n\nconst handleEnterKey = (e) => {\n    if (e.key === 'Enter') {\n        e.preventDefault();\n    }\n};\n\nexport const DynamicFormInput = ({ index, input, as, type, defaultMaxSize, theme }) => {\n    const maxLength = input.size || defaultMaxSize;\n    const isTextField = maxLength <= 250;\n\n    return (\n        <TextField\n            name={mapDynamicFieldToName(input, index)}\n            label={input.label}\n            required={input.required}\n            maxLength={maxLength}\n            wrapAs={as}\n            component={isTextField ? Input : Textarea}\n            type={type || 'text'}\n            onKeyPress={isTextField ? handleEnterKey : undefined}\n            theme={theme}\n        />\n    );\n};\n\nDynamicFormInput.propTypes = {\n    input: PropTypes.shape({\n        _id: PropTypes.string,\n        label: PropTypes.string,\n        required: PropTypes.bool,\n        size: PropTypes.number,\n    }).isRequired,\n    index: PropTypes.number.isRequired,\n    as: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType]),\n    type: PropTypes.string,\n    defaultMaxSize: PropTypes.number.isRequired,\n    theme: PropTypes.object,\n};\n\nconst inputTypes = {\n    name: 'text',\n    email: 'email',\n    phone: 'tel',\n    text: 'text',\n};\n\nexport const DynamicFormInputs = ({ block, theme, defaultMaxSize, ...rest }) => {\n    return (\n        <ul {...cls([styles.root, styles[theme.gridMode]], rest)}>\n            {block.items.map((item, index) => (\n                <DynamicFormInput\n                    as=\"li\"\n                    key={item._id || index}\n                    index={index}\n                    input={item}\n                    type={inputTypes[item.type]}\n                    defaultMaxSize={defaultMaxSize}\n                    theme={theme}\n                />\n            ))}\n        </ul>\n    );\n};\n\nDynamicFormInputs.propTypes = {\n    block: PropTypes.shape({\n        items: PropTypes.arrayOf(\n            PropTypes.shape({\n                _id: PropTypes.string,\n                label: PropTypes.string,\n                required: PropTypes.bool,\n                size: PropTypes.number,\n            })\n        ).isRequired,\n    }).isRequired,\n    theme: PropTypes.object.isRequired,\n    defaultMaxSize: PropTypes.number.isRequired,\n};\n","import TinyColor2 from 'tinycolor2';\n\nconst wrap = (color) => (color?.getBrightness ? color : new TinyColor2(color));\n\nexport default (backgroundColor, color, text) => {\n    const factor1 = wrap(backgroundColor).getBrightness();\n    const factor2 = wrap(color).getBrightness();\n\n    if (Math.abs(factor1 - factor2) < 30) {\n        return {\n            backgroundColor,\n            color: wrap(text)\n                .setAlpha(0.9)\n                .toRgbString(),\n            border: color,\n        };\n    }\n\n    return {\n        backgroundColor,\n        color,\n        border: color,\n    };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3qe-gVKI\",\"contentAlignLeft\":\"_24kddiH0\"};","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\n\nimport { cls, getContourColor, keyHash } from '@mssgme/helpers';\nimport { Button } from '@mssgme/ui';\n\nimport styles from './ThemedButton.scss';\n\nexport const ThemedButton = ({ theme, isFetching, disabled, contour, style: baseStyle, contentAlignLeft, ...rest }) => {\n    const style = useMemo(() => {\n        if (contour) {\n            const { backgroundColor, color, border } = getContourColor(\n                theme.backgroundColor,\n                theme.buttonBackground,\n                theme.buttonTextColor\n            );\n\n            return {\n                backgroundColor,\n                color,\n                border: `1px solid ${border}`,\n                ...baseStyle,\n            };\n        }\n\n        return {\n            backgroundColor: theme.buttonBackground,\n            color: theme.buttonTextColor,\n            ...baseStyle,\n        };\n    }, [contour, theme, keyHash(baseStyle)]);\n\n    return (\n        <Button\n            tag=\"a\"\n            size=\"standart\"\n            isFetching={isFetching}\n            disabled={disabled}\n            style={style}\n            loaderColor={style.color}\n            {...cls([styles.root, contentAlignLeft && styles.contentAlignLeft], rest)}\n        />\n    );\n};\n\nThemedButton.propTypes = {\n    ...Button.propTypes,\n    theme: PropTypes.object.isRequired,\n    contour: PropTypes.bool,\n    contentAlignLeft: PropTypes.bool,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"buttonContainer\":\"_35FFwmIV\",\"successContent\":\"Pbq8WWuk\",\"icon\":\"_3tc4nquV\",\"closeIcon\":\"G81q4QWv\",\"text\":\"_3Aqm6-Qf\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useAsyncFn } from 'react-use';\nimport { AnimatePresence } from 'framer-motion';\nimport { FiCheck, FiX } from 'react-icons/fi';\nimport { mapValues } from 'lodash';\n\nimport {\n    __t,\n    defaultDynamicFieldLengthLimit,\n    mapDynamicFieldToName,\n    mapDynamicInputsToValidationSchema,\n} from '@mssgme/shared';\nimport { FormikProvider, LandingsPropTypes, SubmitButton, useEnhancedFormik } from '@mssgme/ui';\nimport { DynamicFormInputs, ThemedButton, ThemedModal } from '../../../UI';\n\nimport styles from './SubscriptionFormContent.scss';\n\nexport const SubscriptionFormContent = ({ block, theme, onSubmit: rawSubmit, interactive, ...rest }) => {\n    const [sent, setSent] = useState(null);\n    const validationSchema = useMemo(() => mapDynamicInputsToValidationSchema(block), [block]);\n    const FormTag = interactive ? 'form' : 'div';\n\n    const [{ loading, error }, onSubmit] = useAsyncFn(\n        async (values) => {\n            if (false === (await rawSubmit(values))) {\n                return;\n            }\n\n            const items = block.items.map((item, index) => {\n                const field = mapDynamicFieldToName(item, index);\n                const value = values[item._id] ?? values[field];\n\n                return {\n                    key: field,\n                    label: item.label,\n                    value,\n                };\n            });\n            const pairs = items.filter(({ value }) => value);\n\n            setSent(pairs);\n        },\n        [rawSubmit]\n    );\n\n    const formik = useEnhancedFormik({\n        initialValues: useMemo(() =>\n            block.items.reduce((acc, item, index) => ((acc[mapDynamicFieldToName(item, index)] = ''), acc), {})\n        ),\n        validationSchema,\n        onSubmit,\n    });\n\n    const handleSentModalClosed = useCallback(() => {\n        setSent(false);\n        formik.resetForm();\n    }, [formik]);\n\n    useEffect(() => {\n        if (sent && block.hasUrl && block.sentUrl) {\n            const timer = setTimeout(() => (window.location = block.sentUrl), 1000);\n\n            return () => clearTimeout(timer);\n        }\n    }, [sent, block.hasUrl, block.sentUrl, formik]);\n\n    useEffect(() => {\n        formik.setErrors(mapValues(error?.errors, (value) => __t(value)));\n    }, [error]);\n\n    return (\n        <FormikProvider value={formik}>\n            <FormTag id={`form_${block._id}`} {...rest}>\n                <DynamicFormInputs theme={theme} block={block} defaultMaxSize={defaultDynamicFieldLengthLimit} />\n\n                <div className={styles.buttonContainer}>\n                    <SubmitButton\n                        as={ThemedButton}\n                        theme={theme}\n                        isInitialHidden={false}\n                        fullWidth\n                        isFetching={loading}\n                        disabled={!block.items.length}\n                        style={{\n                            backgroundColor: theme.buttonBackground,\n                            color: theme.buttonTextColor,\n                            borderRadius: theme.borderRadius,\n                        }}\n                    >\n                        {block.sendLabel}\n                    </SubmitButton>\n                </div>\n            </FormTag>\n\n            <AnimatePresence>\n                {sent && (\n                    <ThemedModal compact overlay showHeader={false} onClose={handleSentModalClosed}>\n                        {(handleClose) => (\n                            <div className={styles.successContent}>\n                                <div className={styles.closeIcon} onClick={handleClose}>\n                                    <FiX size={26} />\n                                </div>\n                                <FiCheck size={60} className={styles.icon} />\n                                <p className={styles.text}>{block.sentText}</p>\n                            </div>\n                        )}\n                    </ThemedModal>\n                )}\n            </AnimatePresence>\n        </FormikProvider>\n    );\n};\n\nSubscriptionFormContent.propTypes = {\n    block: LandingsPropTypes.block.isRequired,\n    theme: PropTypes.object.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    interactive: PropTypes.bool,\n};\n","import { useState, useEffect, useMemo } from 'react';\nimport { useUpdateEffect } from 'react-use';\nimport { useFormik } from 'formik';\nimport { debounce, get } from 'lodash';\n\nimport { useFetching } from '@mssgme/hooks';\n\n/**\n * @template {object} FormValues\n * @typedef {(values: FormValues, formik: ReturnType<typeof useFormik>) => void} OnChangeMethod\n * @typedef {(values: FormValues, helpers: FormikHelpers<FormValues>) => (void | Promise<*>)} SubmitMethod\n * @param {object} config Config\n * @param {Partial<FormValues>} config.initialValues Initial values\n * @param {OnChangeMethod} config.onChange Change listener\n * @param {SubmitMethod} config.onSubmit Submit listener\n * @param {string} [config.errorsPrefix] If validation errors, generated by submit listener, would be nested under `errorsPrefix` path\n * @param {boolean} [config.resetOnSuccess=false] Reset form on successful submit\n * @param {boolean} [config.autoSubmit=false] Auto-submit if the form is dirty, accounting for debounce\n * @param {number} [config.autoSubmitDebounce=400] Auto-submit debounce\n * @returns {*} Enhanced Formik context\n */\nexport default function useEnhancedFormik({\n    initialValues,\n    onChange,\n    onSubmit,\n    errorsPrefix,\n    resetOnSuccess = false,\n    autoSubmit = false,\n    autoSubmitDebounce = 400,\n    ...rest\n}) {\n    const [warnings, setWarnings] = useState({});\n    const submit = useFetching(onSubmit);\n\n    const formik = useFormik({\n        initialValues,\n        onSubmit: (...args) => submit.run(...args),\n        ...rest,\n    });\n\n    const validationErrors = errorsPrefix ? get(submit.validationErrors, errorsPrefix) : submit.validationErrors;\n    const shouldAutoSubmit = autoSubmit && formik.dirty;\n\n    useEffect(() => {\n        if (submit.fulfilled) {\n            formik.setSubmitting(false);\n            formik.setStatus('success');\n            if (resetOnSuccess) formik.resetForm();\n        }\n    }, [submit.fulfilled]);\n\n    useEffect(() => {\n        if (submit.rejected) {\n            // TODO: handle errors in sentry\n            formik.setSubmitting(false);\n            formik.setStatus('failure');\n        }\n    }, [submit.rejected]);\n\n    useEffect(() => void formik.setErrors(validationErrors), [validationErrors]);\n\n    // TODO: move into independent component\n    useUpdateEffect(() => void (onChange && onChange(formik.values, formik)), [formik.values]);\n\n    const debouncedSubmit = useMemo(() => debounce(formik.submitForm, autoSubmitDebounce), [\n        autoSubmitDebounce,\n        formik.submitForm,\n    ]);\n\n    useUpdateEffect(() => {\n        if (shouldAutoSubmit) {\n            void debouncedSubmit();\n        }\n    }, [debouncedSubmit, shouldAutoSubmit]);\n\n    return { warnings, setWarnings, submit, errorsPrefix, ...formik };\n}\n","import React, { useCallback } from 'react';\n\nimport { SubscriptionFormBlockKind } from '@mssgme/shared';\nimport { feedbackApi } from '@mssgme/lib';\nimport { LandingsPropTypes, useMergedStyles } from '@mssgme/ui';\n\nimport { useBlockTheme, useWebsiteData } from '../../../hooks';\nimport { BlockBase } from '../BlockBase';\nimport { SubscriptionFormContent } from './SubscriptionFormContent';\n\nexport default function SubscriptionForm({ block, style: baseStyle, interactive, ...rest }) {\n    const { theme, style } = useBlockTheme(block);\n    const website = useWebsiteData();\n    const combined = useMergedStyles(style, baseStyle);\n\n    const handleSubmit = useCallback(\n        async (values) => {\n            if (!interactive) {\n                return;\n            }\n\n            await feedbackApi.submit(website.workspace, website._id, { blockId: block._id, data: values });\n\n            const submitEvent = new CustomEvent('formSubmitted', {\n                detail: block._id,\n            });\n\n            document.dispatchEvent(submitEvent);\n        },\n        [website, interactive]\n    );\n\n    return (\n        <BlockBase\n            as={SubscriptionFormContent}\n            interactive={interactive}\n            block={block}\n            style={combined}\n            theme={theme}\n            onSubmit={handleSubmit}\n            {...rest}\n        />\n    );\n}\n\nSubscriptionForm.propTypes = {\n    ...BlockBase.propTypes,\n    block: LandingsPropTypes.block.isRequired,\n};\n\nSubscriptionForm.defaultProps = BlockBase.defaultProps;\n\nSubscriptionForm.kind = SubscriptionFormBlockKind;\n","import { useMemo } from 'react';\nimport { keyHash } from '@mssgme/helpers';\n\nexport function useMergedStyles(baseStyle, additionalStyle) {\n    return useMemo(\n        () => (baseStyle && additionalStyle) ? { ...baseStyle, ...additionalStyle } : (baseStyle || additionalStyle),\n        [keyHash(baseStyle), keyHash(additionalStyle)]\n    );\n}\n","import SubscriptionForm from './SubscriptionForm';\n\nexport default SubscriptionForm;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3Pb-B5RH\",\"spinner\":\"_2S9bt9mk\",\"rotate\":\"_11rFdkOa\",\"black\":\"_2du6YMP-\",\"gray\":\"_20M_pSzf\",\"white\":\"_3-o3pxPo\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\n\nimport styles from './Spinner.scss';\n\nexport const POINTS = ['%', 'px', 'pt', 'em'];\nexport const COLORS = ['black', 'white', 'gray'];\n\nSpinner.propTypes = {\n    className: PropTypes.string,\n    size: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    borderWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    color: PropTypes.oneOf(COLORS),\n    duration: PropTypes.number,\n};\n\nSpinner.defaultProps = {\n    size: 40,\n    duration: 0.8,\n    color: 'black',\n};\n\nexport default function Spinner({ className, borderWidth, size, duration, color, ...rest }) {\n    const style = useMemo(() => {\n        const normalized = normalizeSize(size);\n        const normalizedBorderWidth = normalizeSize(borderWidth || Math.round(+normalized * 0.05));\n\n        return {\n            width: normalized,\n            height: normalized,\n            borderWidth: normalizedBorderWidth,\n            animationDuration: `${duration}s`,\n            WebkitAnimationDuration: `${duration}s`,\n            MozAnimationDuration: `${duration}s`,\n        };\n    }, [size, duration, borderWidth]);\n\n    return (\n        <div className={cn(styles.root, className)}>\n            <div className={cn(styles.spinner, styles[color])} style={style} {...rest} />\n        </div>\n    );\n}\n\nexport function normalizeSize(size, def = 'px') {\n    if (!size) return;\n\n    const str = String(size);\n    const withPoints = POINTS.find((points) => str.indexOf(points) > 0);\n\n    return withPoints ? size : `${size}${def}`;\n}\n","import Spinner from './Spinner';\n\nexport default Spinner;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_1aGC9hdN\",\"disabled\":\"R67GzQRa\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport { __t } from '@mssgme/shared';\nimport styles from './styles.scss';\n\nexport const MoreButton = ({ disabled, className, ...rest }) => (\n    <span className={classNames(styles.root, { [styles.disabled]: disabled }, className)} {...rest}>\n        {__t('show_more')}\n    </span>\n);\n\nMoreButton.propTypes = {\n    disabled: PropTypes.bool,\n    className: PropTypes.string,\n};\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction ImageIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2z\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n            <path\n                d=\"M8.5 10a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM21 15l-5-5L5 21\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(ImageIcon);\nexport default ForwardRef;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"DGSQtavY\"};","import React from 'react';\n\nimport { ImageIcon } from '@mssgme/icons';\n\nimport styles from './Thumbnail.scss';\n\nexport default function Thumbnail() {\n    return <ImageIcon className={styles.root} />;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_xoBULhV\",\"img\":\"_1pWoQkAV\",\"fit\":\"XCY58nZg\",\"spinner\":\"_2f8_zoFb\",\"visible\":\"_1Z20qEZ1\",\"inline\":\"_3-n_7lQl\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport { cls } from '@mssgme/helpers';\nimport Spinner from '../Spinner';\nimport useLoadImage from './useLoadImage';\nimport useIntersect from './useIntersect';\nimport Thumbnail from './Thumbnail';\n\nimport styles from './LazyImage.scss';\n\nexport default function LazyImage({ mode, src, alt, containerClassName, ...rest }) {\n    const { ref, isIntersecting, isIntersect } = useIntersect();\n    const { isFetching, isLoaded, onLoad, onError, error } = useLoadImage();\n\n    return (\n        <div ref={ref} className={classNames(styles.root, styles[mode], containerClassName)}>\n            {isFetching && mode !== 'inline' && <Spinner size=\"50%\" color=\"gray\" className={styles.spinner} />}\n            {error && <Thumbnail />}\n            <img\n                src={isIntersect ? src : null}\n                alt={alt}\n                onLoad={onLoad}\n                onError={onError}\n                {...cls([styles.img, isLoaded && isIntersecting && styles.visible], rest)}\n            />\n        </div>\n    );\n}\n\nLazyImage.propTypes = {\n    className: PropTypes.string,\n    containerClassName: PropTypes.string,\n    mode: PropTypes.oneOf(['fit', 'inline']),\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n};\n\nLazyImage.defaultProps = {\n    mode: 'fit',\n};\n","import { useRef, useEffect, useMemo, useState } from 'react';\n\nexport default function useIntersect() {\n    const ref = useRef(null);\n    const [isIntersecting, setIsIntersecting] = useState(false);\n    const [isIntersect, setIsIntersect] = useState(false);\n\n    const observer = useMemo(\n        () =>\n            new IntersectionObserver(\n                function onIntersect([entry]) {\n                    if (entry?.isIntersecting) {\n                        setIsIntersecting(true);\n                        setIsIntersect(true);\n                    } else if (entry.rootBounds) {\n                        setIsIntersecting(false);\n                    }\n                },\n                {\n                    root: null,\n                    rootMargin: '100px 0px 100px 0px',\n                    threshold: 0.01,\n                }\n            ),\n        []\n    );\n\n    useEffect(() => {\n        const element = ref.current;\n\n        if (!element) {\n            return;\n        }\n\n        observer.observe(element);\n\n        return () => {\n            observer.unobserve(element);\n        };\n    }, [ref.current]);\n\n    return {\n        ref,\n        isIntersecting,\n        isIntersect,\n    };\n}\n","import { useCallback, useState } from 'react';\n\nexport default function useLoadImage() {\n    const [state, setState] = useState({ isFetching: true, isLoaded: false, error: null });\n\n    const onLoad = useCallback(() => setState({ isFetching: false, isLoaded: true, error: null }), []);\n    const onError = useCallback((error) => setState({ isFetching: false, isLoaded: false, error }), []);\n\n    return {\n        ...state,\n        onLoad,\n        onError,\n    };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"-XoAMny0\",\"thumbnail\":\"C_R44W3m\",\"emptyPlaceholder\":\"_335lD0ul\",\"meta\":\"_3haFePjs\",\"title\":\"_19uOjj9I\",\"price\":\"_1YA6epaj\",\"discountPrice\":\"_26QDH8kd\",\"lineThrough\":\"_1iPjetGG\",\"list\":\"_1BKtItoB\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { IoMdImage } from 'react-icons/io';\n\nimport { __t } from '@mssgme/shared';\nimport { LazyImage } from '@mssgme/ui';\nimport { useUploads, MediaSizes } from '../../../hooks';\n\nimport styles from './ServicesGridItem.scss';\n\nexport const ServicesGridItem = ({ item, themeStyles, ...rest }) => {\n    const { getMediaSizeUrl } = useUploads();\n    const photoUrl = getMediaSizeUrl(item.photoUrl, MediaSizes.Half);\n\n    return (\n        <div className={cn(styles.item, styles[themeStyles.gridMode])} {...rest}>\n            <div className={styles.thumbnail} style={{ backgroundColor: themeStyles.backgroundColor }}>\n                {photoUrl ? (\n                    <LazyImage src={photoUrl} alt={item.title} />\n                ) : (\n                    <div className={styles.emptyPlaceholder}>\n                        <IoMdImage size=\"40%\" color=\"#fff\" />\n                    </div>\n                )}\n            </div>\n            <div className={styles.meta} style={{ color: themeStyles.color }}>\n                <div>\n                    <h6 className={styles.title}>{item.title}</h6>\n                    {item.price && (\n                        <div className={styles.price}>\n                            {item.price.formattedDiscount &&\n                                (item.price.discount === 0 ? (\n                                    <span className={styles.discountPrice}>{__t('free')}</span>\n                                ) : (\n                                    <span className={styles.discountPrice}>{item.price.formattedDiscount}</span>\n                                ))}\n                            {item.price.amount === 0 ? (\n                                __t('free')\n                            ) : (\n                                <span className={item.price.formattedDiscount ? styles.lineThrough : null}>\n                                    {item.price.formatted}\n                                </span>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nServicesGridItem.propTypes = {\n    item: PropTypes.object.isRequired,\n    themeStyles: PropTypes.object.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"_3jhxiqOr\",\"opacity\":\"_3pgdaWXY\",\"root\":\"_3pwAbyVF\",\"active\":\"_1-6fDei8\",\"closeButtonWrapper\":\"_8dj21P8K\",\"closeButton\":\"_1GBc3ikw\",\"swiperContainer\":\"_1Qp4_m7K\",\"preloader\":\"_13WBnBK-\",\"swiper\":\"_22hloKnO\",\"slide\":\"_1RK4GSWG\",\"slideImage\":\"_30NJpZlb\",\"imagePreloader\":\"_1H56Dfu4\",\"loaded\":\"_8AKZkImA\",\"zoomIcon\":\"_3aTNt7_W\",\"controlsContainer\":\"tgROkwx3\",\"hidden\":\"_3-DxphH3\",\"controls\":\"_194m9rIu\",\"control\":\"_1YtkZ4xL\",\"pagination\":\"_10qA4vZk\",\"clickablePagination\":\"JzPCNBQm\",\"dot\":\"_8xCE8Iq9\",\"activeBullet\":\"_1XEkIJZQ\",\"content\":\"_19JYevFe\",\"dark\":\"C5PmAxFx\",\"title\":\"_3DJQ7C_B\",\"price\":\"_3blmRIIw\",\"lineThrough\":\"_1blY4HxK\",\"description\":\"_1vGt9qoh\",\"externalButton\":\"_2NsswoAb\",\"buttonContent\":\"_2cLgzYIF\",\"url\":\"_2gleBV4K\",\"blurred\":\"ZjSNusp0\",\"contacts\":\"_2Wm6Xm44\",\"actionsBuy\":\"_2TIFgmpV\",\"fixedPane\":\"_1vKLNpVO\",\"noSwiping\":\"_1Cw4az2m\",\"cartBouncer\":\"_1ZEctz9U\"};","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { FiZoomIn } from 'react-icons/fi';\n\nimport { cls } from '@mssgme/helpers';\nimport { LoadingIndicator } from '@mssgme/ui';\nimport { MediaSizes, useUploads } from '../../hooks';\n\nimport styles from './ServiceContent.scss';\n\nexport const ServicePhoto = React.forwardRef(function ServicePhoto(\n    { photoUrl, title, index, style, onLoad, onClick, ...rest },\n    ref\n) {\n    const { getMediaSizeUrl } = useUploads();\n    const handleClick = useCallback(() => void onClick(index), [index, onClick]);\n\n    return (\n        <div ref={ref} {...cls(styles.slide, rest)}>\n            <div className={styles.slideImage}>\n                <img\n                    {...{ 'data-src': getMediaSizeUrl(photoUrl, MediaSizes.Large) }}\n                    className=\"swiper-lazy\"\n                    alt={title}\n                    onLoad={onLoad}\n                    onClick={handleClick}\n                />\n                <div className={styles.zoomIcon} style={style.common}>\n                    <FiZoomIn size={14} />\n                </div>\n                <div className={styles.imagePreloader} style={style.background}>\n                    <div>\n                        <LoadingIndicator />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n});\n\nServicePhoto.propTypes = {\n    photoUrl: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    index: PropTypes.number.isRequired,\n    style: PropTypes.object.isRequired,\n    onLoad: PropTypes.func.isRequired,\n    onClick: PropTypes.func.isRequired,\n};\n","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { FiChevronLeft, FiChevronRight, FiX } from 'react-icons/fi';\n\nimport { LoadingIndicator, Swiper } from '@mssgme/ui';\nimport { LightBox } from '../LightBox';\nimport { ServicePhoto } from './ServicePhoto';\n\nimport styles from './ServiceContent.scss';\n\nconst lazy = {\n    loadPrevNext: true,\n    preloaderClass: styles.imagePreloader,\n    loadedClass: styles.loaded,\n};\n\nexport const ServicePhotos = ({ photos, title, isActive, isPrev, isNext, themeStyles, style, onClose }) => {\n    const navigationPrevRef = React.useRef(null);\n    const navigationNextRef = React.useRef(null);\n    const paginationElRef = useRef(null);\n    const [shouldSwiperLoad, setShouldSwiperLoad] = useState(false);\n    const [swiper, setSwiper] = useState(null);\n    const [isLightbox, setIsLightbox] = useState(false);\n    const [currentLightBoxSlideIndex, setCurrentLightBoxSlideIndex] = useState(0);\n\n    const hasMultiplePhotos = photos.length > 1;\n    const hasNavElements = !!paginationElRef.current && !!navigationPrevRef.current && !!navigationNextRef.current;\n    const showSwiper = shouldSwiperLoad && (!hasMultiplePhotos || hasNavElements);\n    const isSwipeable = isActive || isPrev || isNext;\n\n    const openLightBox = useCallback(() => setIsLightbox(true), []);\n    const closeLightBox = useCallback(() => setIsLightbox(false), []);\n\n    const handleSlide = useCallback((index) => {\n        setCurrentLightBoxSlideIndex(index);\n        openLightBox();\n    });\n\n    const pagination = useMemo(\n        () =>\n            hasMultiplePhotos && {\n                el: paginationElRef.current,\n                clickable: true,\n                renderBullet: (index, className) => {\n                    return `<div class=\"${className} ${styles.dot}\"><div style=\"background-color: ${\n                        themeStyles ? themeStyles.color : 'null'\n                    }\"></div></div>`;\n                },\n                clickableClass: styles.clickablePagination,\n                bulletActiveClass: styles.activeBullet,\n            },\n        [paginationElRef.current, hasMultiplePhotos, themeStyles]\n    );\n\n    const handleLoad = useCallback(() => void (swiper && swiper.updateAutoHeight()), [swiper]);\n\n    useEffect(() => {\n        if (isSwipeable) {\n            setShouldSwiperLoad(true);\n        }\n    }, [isSwipeable]);\n\n    return (\n        <div className={styles.swiperContainer}>\n            {showSwiper ? (\n                <Swiper\n                    className={styles.swiper}\n                    nested\n                    autoHeight\n                    lazy={lazy}\n                    pagination={pagination}\n                    navigation={{\n                        prevEl: navigationPrevRef.current,\n                        nextEl: navigationNextRef.current,\n                    }}\n                    speed={600}\n                    watchOverflow={hasMultiplePhotos}\n                    loop={hasMultiplePhotos}\n                    onSwiper={setSwiper}\n                >\n                    {photos.map((photoUrl, index) => (\n                        <ServicePhoto\n                            key={photoUrl + index}\n                            index={index}\n                            photoUrl={photoUrl}\n                            title={title}\n                            style={style}\n                            onLoad={handleLoad}\n                            onClick={handleSlide}\n                        />\n                    ))}\n                </Swiper>\n            ) : (\n                <div className={styles.preloader}>\n                    <div>\n                        <LoadingIndicator />\n                    </div>\n                </div>\n            )}\n            {hasMultiplePhotos && (\n                <div className={cn(styles.controlsContainer, { [styles.hidden]: !showSwiper })}>\n                    <div className={cn(styles.controls, styles.noSwiping)} style={style.pagination}>\n                        <div className={styles.control} ref={navigationPrevRef}>\n                            <FiChevronLeft size={16} />\n                        </div>\n                        <div className={styles.pagination} ref={paginationElRef} />\n                        <div className={styles.control} ref={navigationNextRef}>\n                            <FiChevronRight size={16} />\n                        </div>\n                    </div>\n                </div>\n            )}\n            <div\n                className={cn(styles.closeButtonWrapper, styles.noSwiping)}\n                onClick={onClose}\n                style={{ display: 'flex' }}\n            >\n                <div className={styles.closeButton} style={style.common}>\n                    <FiX size={14} />\n                </div>\n            </div>\n\n            {isLightbox && (\n                <React.Suspense fallback={null}>\n                    <LightBox\n                        activeIndex={currentLightBoxSlideIndex}\n                        images={photos.map((url) => ({ url }))}\n                        onClose={closeLightBox}\n                    />\n                </React.Suspense>\n            )}\n        </div>\n    );\n};\n\nServicePhotos.propTypes = {\n    photos: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n    isActive: PropTypes.bool,\n    isPrev: PropTypes.bool,\n    isNext: PropTypes.bool,\n    title: PropTypes.string.isRequired,\n    themeStyles: PropTypes.object,\n    style: PropTypes.object.isRequired,\n    onClose: PropTypes.func,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"yGbJMyhr\"};","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useAsyncFn, useToggle } from 'react-use';\nimport { Link } from 'react-router-dom';\n\nimport { __t } from '@mssgme/shared';\nimport { ShoppingCartIcon } from '@mssgme/icons';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { useCoreContext, useFrontAPI, useModalThemes, usePageData, useSavedOrders } from '../../hooks';\nimport { ThemedButton } from '../ThemedButton';\nimport { ThemedModal } from '../ThemedModal';\n\nimport styles from './BuyButton.scss';\n\nconst propTypes = {\n    service: PropTypes.object.isRequired,\n    interactive: PropTypes.bool,\n    onCartAdd: PropTypes.func,\n    productCurrency: PropTypes.string,\n};\n\nfunction BuyButton({ service, interactive, onCartAdd, productCurrency, ...rest }) {\n    const api = useFrontAPI();\n    const { generateUrl } = useNavigationUtils();\n    const { router } = useCoreContext();\n    const { currentOrder, saveOrderId } = useSavedOrders();\n    const { _id: pageId } = usePageData();\n    const { contentStyle } = useModalThemes();\n    const isInCart = useMemo(() => !!currentOrder?.items.find((item) => item.productId === service._id), [\n        currentOrder,\n        service._id,\n    ]);\n    const orderId = currentOrder?._id;\n    const orderPath = useMemo(() => router.orders.toView(orderId, generateUrl('.')), [orderId]);\n    const isDifferentCurrency = useMemo(() => {\n        const orderCurrency = currentOrder?.items[0]?.price?.currency;\n\n        return !!(orderCurrency && orderCurrency !== productCurrency);\n    }, [currentOrder?.items, productCurrency]);\n    const [restrictCurrenciesMessage, toggleRestrictCurrenciesMessage] = useToggle(false);\n    const [{ loading }, handleBuy] = useAsyncFn(async () => {\n        if (isInCart || !interactive) {\n            return;\n        }\n\n        // restrict adding products with different currencies\n        if (isDifferentCurrency) {\n            toggleRestrictCurrenciesMessage(true);\n\n            return;\n        }\n\n        const payload = { items: [{ productId: service._id, quantity: 1 }] };\n        let result;\n\n        if (orderId) {\n            result = await api.orders.modify({ orderId, payload });\n        } else {\n            result = await api.orders.create({ pageId, payload });\n\n            saveOrderId(result._id);\n        }\n\n        onCartAdd && onCartAdd();\n\n        return result;\n    }, [interactive, service._id, pageId, orderId, isInCart, isDifferentCurrency, saveOrderId]);\n\n    return (\n        <>\n            <ThemedButton\n                fullWidth\n                className={styles.root}\n                theme={contentStyle}\n                disabled={!interactive}\n                isFetching={loading}\n                beforeIcon={isInCart && <ShoppingCartIcon />}\n                {...(isInCart\n                    ? {\n                        tag: Link,\n                        to: {\n                            pathname: orderPath,\n                            state: service.slug ? { backPath: router.product.toView(service.slug) } : null,\n                        },\n                    }\n                    : { onClick: handleBuy })}\n                {...rest}\n            >\n                {isInCart ? __t('to_cart') : __t('buy')}\n            </ThemedButton>\n            {restrictCurrenciesMessage && (\n                <ThemedModal\n                    overlay\n                    compact\n                    padding\n                    title={__t('error_occurred')}\n                    onClose={toggleRestrictCurrenciesMessage}\n                >\n                    <div style={{ textAlign: 'center' }}>{__t('different_currencies_error')}</div>\n                </ThemedModal>\n            )}\n        </>\n    );\n}\n\nBuyButton.propTypes = propTypes;\n\nexport default BuyButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cls } from '@mssgme/helpers';\nimport { useRenderer } from '../../hooks';\nimport BuyButton from './BuyButton';\n\nimport styles from './ServiceContent.scss';\n\nexport const ServiceActionsPane = ({\n    contacts,\n    service,\n    interactive,\n    enabledPayments,\n    onCartAdd,\n    currency,\n    ...rest\n}) => {\n    const renderBlock = useRenderer();\n\n    return (\n        <div {...cls(styles.contacts, rest)}>\n            {enabledPayments && (\n                <div className={styles.actionsBuy} style={{ marginBottom: contacts?.length ? 0 : 12 }}>\n                    <BuyButton\n                        service={service}\n                        productCurrency={currency}\n                        interactive={interactive}\n                        onCartAdd={onCartAdd}\n                    />\n                </div>\n            )}\n\n            {contacts?.map(renderBlock)}\n        </div>\n    );\n};\n\nServiceActionsPane.propTypes = {\n    contacts: PropTypes.arrayOf(PropTypes.shape({ kind: PropTypes.string.isRequired })),\n    service: PropTypes.object.isRequired,\n    interactive: PropTypes.bool,\n    enabledPayments: PropTypes.bool,\n    onCartAdd: PropTypes.func.isRequired,\n    currency: PropTypes.string,\n};\n","export default (url) => {\n    try {\n        return url && new URL(url);\n    } catch (err) {\n        return null;\n    }\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { __t } from '@mssgme/shared';\nimport { parseUrl, urlSafeComponent } from '@mssgme/helpers';\nimport { LinkBlank } from '@mssgme/ui';\nimport { ThemedButton } from '../ThemedButton';\nimport styles from './ServiceContent.scss';\n\nexport const ExternalUrlButton = ({ service, themeStyles }) => {\n    const url = service.externalButton?.url || service.externalUrl;\n    const parsed = url && parseUrl(url);\n\n    if (!url) {\n        return null;\n    }\n\n    return (\n        <ThemedButton\n            fullWidth\n            tag={LinkBlank}\n            theme={themeStyles}\n            href={url}\n            data-id={service._id}\n            data-title={service.title || service.name}\n            data-element=\"custom-link\"\n            data-event-name={urlSafeComponent(url)}\n            className={styles.externalButton}\n        >\n            <div className={styles.buttonContent}>\n                <span>{service.externalButton?.title || __t('visit_website')}</span>\n                {!!parsed && <span className={styles.url}>{parsed.hostname}</span>}\n            </div>\n        </ThemedButton>\n    );\n};\n\nExternalUrlButton.propTypes = {\n    service: PropTypes.object.isRequired,\n    themeStyles: PropTypes.object.isRequired,\n};\n","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { useToggle } from 'react-use';\nimport { AnimatePresence, motion } from 'framer-motion';\n\nimport { __t } from '@mssgme/shared';\nimport { isLightColor } from '@mssgme/helpers';\nimport { useWebsiteData } from '../../hooks';\nimport { ServicePhotos } from './ServicePhotos';\nimport { ServiceActionsPane } from './ServiceActionsPane';\nimport { ExternalUrlButton } from './ExternalUrlButton';\nimport { ShoppingCart } from '../ShoppingCart';\n\nimport styles from './ServiceContent.scss';\n\nexport function ServiceContent({\n    service: { description, price },\n    service,\n    contacts,\n    isActive,\n    isPrev,\n    isNext,\n    interactive,\n    themeStyles,\n    backUrl,\n    onClose,\n}) {\n    const { enabledPayments } = useWebsiteData();\n    const [isCartAddAnimation, toggleCartAddAnimation] = useToggle(false);\n    const rootEl = useRef(null);\n    const serviceTitle = service.title || service.name;\n    const isDarkTheme = !isLightColor(themeStyles.backgroundColor);\n    const style = useMemo(() => {\n        const { color, backgroundColor } = themeStyles;\n\n        return {\n            common: {\n                color,\n                backgroundColor,\n            },\n            color: {\n                color,\n            },\n            background: {\n                backgroundColor,\n            },\n            pagination: {\n                backgroundColor: backgroundColor.slice(0, -2) + '80',\n                color,\n            },\n            contacts: {\n                backgroundImage: `linear-gradient(to bottom, ${backgroundColor.substring(\n                    0,\n                    7\n                )}00 0%, ${backgroundColor} 18px, ${backgroundColor} 100%)`,\n            },\n        };\n    }, [themeStyles]);\n\n    const isSwipeable = isActive || isPrev || isNext;\n    const hasActions = enabledPayments || !!contacts?.length;\n\n    const contactsEl = hasActions && (\n        <ServiceActionsPane\n            style={style.contacts}\n            contacts={contacts}\n            service={service}\n            interactive={interactive}\n            enabledPayments={enabledPayments}\n            onCartAdd={toggleCartAddAnimation}\n            currency={price?.currency}\n        />\n    );\n\n    const handleClose = useCallback(\n        (e) => {\n            e?.preventDefault?.();\n\n            onClose(backUrl);\n        },\n        [backUrl, onClose]\n    );\n\n    useEffect(() => {\n        if (rootEl.current && rootEl.current.scrollTop !== 0) {\n            rootEl.current.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n    }, [isSwipeable]);\n\n    useEffect(() => {\n        if (!isCartAddAnimation) {\n            return;\n        }\n\n        const timer = setTimeout(() => toggleCartAddAnimation(false), 1000);\n\n        return () => {\n            clearTimeout(timer);\n        };\n    }, [isCartAddAnimation]);\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={cn(styles.root, { [styles.active]: isActive })} ref={rootEl} style={style.color}>\n                <ServicePhotos\n                    photos={service.photos}\n                    title={serviceTitle}\n                    isActive={isActive}\n                    isPrev={isPrev}\n                    isNext={isNext}\n                    themeStyles={themeStyles}\n                    style={style}\n                    onClose={handleClose}\n                />\n\n                <div className={cn(styles.content, isDarkTheme && styles.dark)}>\n                    <div>\n                        <h1 className={styles.title}>{serviceTitle}</h1>\n\n                        {price && (\n                            <div className={styles.price} style={style.color}>\n                                {price.formattedDiscount && (\n                                    <span className={styles.discountPrice}>\n                                        {price.discount === 0 ? __t('free') : price.formattedDiscount}\n                                    </span>\n                                )}\n                                {price.amount === 0 ? (\n                                    __t('free')\n                                ) : (\n                                    <span className={price.formattedDiscount ? styles.lineThrough : null}>\n                                        {price.formatted}\n                                    </span>\n                                )}\n                            </div>\n                        )}\n\n                        <ExternalUrlButton themeStyles={themeStyles} service={service} />\n                    </div>\n                    {description && <p className={styles.description}>{description}</p>}\n                    {contactsEl && <div className={styles.fixedPane}>{contactsEl}</div>}\n\n                    <AnimatePresence>\n                        {isCartAddAnimation && (\n                            <motion.div\n                                className={styles.cartBouncer}\n                                animate={{ bottom: 16 }}\n                                exit={{ bottom: -60 }}\n                                transition={{ type: 'spring', stiffness: 100 }}\n                            >\n                                <ShoppingCart style={{ position: 'absolute', bottom: 0, right: 0 }} />\n                            </motion.div>\n                        )}\n                    </AnimatePresence>\n                </div>\n            </div>\n\n            {contactsEl}\n        </div>\n    );\n}\n\nServiceContent.propTypes = {\n    service: PropTypes.object.isRequired,\n    contacts: PropTypes.array,\n    isActive: PropTypes.bool.isRequired,\n    isPrev: PropTypes.bool.isRequired,\n    isNext: PropTypes.bool.isRequired,\n    interactive: PropTypes.bool,\n    themeStyles: PropTypes.object.isRequired,\n    onClose: PropTypes.func.isRequired,\n    backUrl: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"_2XbhEsS0\",\"swiper\":\"QnbvWe1q\",\"noSwiping\":\"_2zN_ACNB\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { isMatchedById } from '@mssgme/shared';\nimport { Swiper } from '@mssgme/ui';\nimport { usePageData } from '../../../hooks';\nimport { ServiceContent, ThemedModal } from '../../../UI';\n\nimport styles from './ServicesModal.scss';\n\nexport function ServicesModal({\n    services,\n    contacts,\n    activeIndex,\n    interactive,\n    onClose,\n    onClosing,\n    themeStyles,\n    handleHash,\n}) {\n    const page = usePageData();\n    const history = useHistory();\n    const hasMultipleServices = services.length > 1;\n\n    const contactBlocks = useMemo(\n        () =>\n            contacts\n                .filter(({ enabled }) => enabled)\n                .map(({ blockId }) => page.blocks.find(isMatchedById(blockId))),\n        [page, contacts]\n    );\n\n    const handleSlideChange = useCallback(\n        (swiper) => {\n            if (handleHash) {\n                history.replace('#' + services[swiper.realIndex]._id);\n            }\n        },\n        [handleHash, services]\n    );\n\n    return (\n        <ThemedModal overlay handleHash showHeader={false} onClose={onClose}>\n            <div className={styles.content}>\n                <Swiper\n                    className={styles.swiper}\n                    allowTouchMove={hasMultipleServices}\n                    initialSlide={activeIndex}\n                    noSwipingClass={styles.noSwiping}\n                    speed={600}\n                    pagination={false}\n                    onInit={handleSlideChange}\n                    onSlideChange={handleSlideChange}\n                >\n                    {services.map((service, index) =>\n                        Object.assign(\n                            ({ isActive, isPrev, isNext }) => (\n                                <ServiceContent\n                                    themeStyles={themeStyles}\n                                    service={service}\n                                    contacts={contactBlocks}\n                                    isActive={isActive}\n                                    isPrev={isPrev}\n                                    isNext={isNext}\n                                    interactive={interactive}\n                                    onClose={onClose}\n                                />\n                            ),\n                            { key: service._id || index }\n                        )\n                    )}\n                </Swiper>\n            </div>\n        </ThemedModal>\n    );\n}\n\nServicesModal.propTypes = {\n    services: PropTypes.array.isRequired,\n    contacts: PropTypes.array.isRequired,\n    activeIndex: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onClosing: PropTypes.func,\n    themeStyles: PropTypes.object.isRequired,\n    handleHash: PropTypes.bool,\n    interactive: PropTypes.bool,\n};\n\nServicesModal.defaultProps = {\n    handleHash: true,\n    interactive: true,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"servicesList\":\"_1tPoDiYt\",\"list\":\"_11aOBJzF\",\"moreButtonContainer\":\"_1WE-HNBa\",\"blurred\":\"VgXs12px\"};","import PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useLocation, useHistory } from 'react-router';\nimport { useTimeoutFn } from 'react-use';\n\nimport { __t, ServicesGridBlockKind } from '@mssgme/shared';\nimport { LandingsPropTypes, Spinner } from '@mssgme/ui';\nimport { useBlockTheme } from '../../../hooks';\nimport { MoreButton } from '../../../UI';\nimport { BlockBase } from '../BlockBase';\nimport { ServicesGridItem } from './ServicesGridItem';\nimport { ServicesModal } from './ServicesModal';\n\nimport styles from './ServicesGrid.scss';\n\nconst ITEMS_PER_PAGE = 6;\n\n// TODO: Migrate/convert all service grid items to normal products and remove this block. Replace with Products block.\n\nexport default function ServicesGrid({ block, sortable, interactive, delay = 0, ...rest }) {\n    const location = useLocation();\n    const history = useHistory();\n    const hashId = location.hash && location.hash.slice(1);\n    const slideIndexFromHash = hashId && block.items.findIndex((item) => item._id === hashId);\n    const hasSlideFromHash = Number.isInteger(slideIndexFromHash) && slideIndexFromHash >= 0;\n    const { theme } = useBlockTheme(block);\n    const [page, setPage] = useState(1);\n    const [isDelayed, setDelayed] = useState(!!delay);\n    const [isServicesModal, setIsServicesModal] = useState(false);\n    const [currentServiceIndex, setCurrentServiceIndex] = useState(0);\n    const total = block.items.length;\n    const pages = Math.ceil(total / ITEMS_PER_PAGE);\n    const hasMore = page < pages;\n    const sliced = hasMore ? block.items.slice(0, page * ITEMS_PER_PAGE) : block.items;\n\n    const handleLoadMore = useCallback(() => setPage((old) => old + 1), []);\n    const openServicesModal = useCallback(() => {\n        setIsServicesModal(true);\n    }, []);\n    const closeServicesModal = useCallback(() => {\n        setIsServicesModal(false);\n        history.push(location.pathname);\n    }, [location.pathname]);\n\n    useEffect(() => {\n        if (hasSlideFromHash && !sortable) {\n            setCurrentServiceIndex(slideIndexFromHash);\n            openServicesModal();\n        }\n    }, [hasSlideFromHash]);\n\n    useTimeoutFn(() => setDelayed(false), delay);\n\n    if (isDelayed) {\n        return (\n            <BlockBase {...rest}>\n                <Spinner />\n            </BlockBase>\n        );\n    }\n\n    return (\n        <BlockBase lazy {...rest}>\n            {sliced.length ? (\n                <ul className={cn(styles.servicesList, styles[theme.gridMode])}>\n                    {sliced.map((item, index) => (\n                        <li key={item._id || index}>\n                            <ServicesGridItem\n                                item={item}\n                                themeStyles={theme}\n                                onClick={() => {\n                                    setCurrentServiceIndex(index);\n                                    openServicesModal();\n                                }}\n                            />\n                        </li>\n                    ))}\n                </ul>\n            ) : (\n                <ul\n                    className={cn(styles.servicesList, styles[theme.gridMode])}\n                    style={{ opacity: 0.7, pointerEvents: 'none' }}\n                >\n                    <li>\n                        <ServicesGridItem\n                            themeStyles={theme}\n                            item={{\n                                title: __t('title'),\n                                price: { amount: 9.99, formatted: '$19.99', formattedDiscount: '$9.99' },\n                            }}\n                        />\n                    </li>\n                    <li>\n                        <ServicesGridItem\n                            themeStyles={theme}\n                            item={{\n                                title: __t('title'),\n                                price: { amount: 9.99, formatted: '$19.99', formattedDiscount: '$9.99' },\n                            }}\n                        />\n                    </li>\n                </ul>\n            )}\n\n            {hasMore && (\n                <div className={styles.moreButtonContainer}>\n                    <MoreButton\n                        onClick={handleLoadMore}\n                        style={{\n                            backgroundColor: theme.backgroundColor,\n                            color: theme.color,\n                            borderRadius: theme.borderRadius,\n                        }}\n                    />\n                </div>\n            )}\n            {isServicesModal && (\n                <ServicesModal\n                    handleHash={interactive}\n                    themeStyles={theme}\n                    contacts={block.contacts}\n                    services={block.items}\n                    activeIndex={currentServiceIndex}\n                    interactive={interactive}\n                    onClose={closeServicesModal}\n                />\n            )}\n        </BlockBase>\n    );\n}\n\nServicesGrid.propTypes = {\n    ...BlockBase.propTypes,\n    block: LandingsPropTypes.block.isRequired,\n    delay: PropTypes.number,\n};\n\nServicesGrid.defaultProps = BlockBase.defaultProps;\n\nServicesGrid.kind = ServicesGridBlockKind;\n","import ServicesGrid from './ServicesGrid';\n\nexport default ServicesGrid;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction SearchIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M11 19a8 8 0 100-16 8 8 0 000 16zM21 21l-4.35-4.35\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(SearchIcon);\nexport default ForwardRef;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2KH1UV2J\",\"disabled\":\"_6MqLJcxA\",\"thumbnail\":\"_1qewrm71\",\"emptyPlaceholder\":\"_2BfWiASX\",\"meta\":\"_15DjKOTm\",\"title\":\"_3nacUjt2\",\"price\":\"_2FnTybXH\",\"discountPrice\":\"_2FePtAvK\",\"lineThrough\":\"VV_yIBHb\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { IoMdImage } from 'react-icons/io';\n\nimport { __t, mediaUtils } from '@mssgme/shared';\nimport { LazyImage } from '@mssgme/ui';\n\nimport styles from './styles.scss';\n\nexport const ProductItem = ({ tag: Tag, product: { name, price, published, photoUrl }, themeStyles, ...rest }) => {\n    return (\n        <Tag className={classNames(styles.root, !published && styles.disabled)} {...rest}>\n            <div className={styles.thumbnail} style={{ backgroundColor: themeStyles.backgroundColor }}>\n                {photoUrl ? (\n                    <LazyImage src={mediaUtils.generateProductThumbnailUrl(photoUrl)} alt={name} />\n                ) : (\n                    <div className={styles.emptyPlaceholder}>\n                        <IoMdImage size=\"40%\" color=\"#fff\" />\n                    </div>\n                )}\n            </div>\n            <div className={styles.meta} style={{ color: themeStyles.color }}>\n                <span className={styles.title}>{name}</span>\n                {price && (\n                    <span className={styles.price}>\n                        {price.formattedDiscount &&\n                            (price.discount === 0 ? (\n                                <span className={styles.discountPrice}>{__t('free')}</span>\n                            ) : (\n                                <span className={styles.discountPrice}>{price.formattedDiscount}</span>\n                            ))}\n                        {price.amount === 0 ? (\n                            __t('free')\n                        ) : (\n                            <span className={price.formattedDiscount ? styles.lineThrough : null}>\n                                {price.formatted}\n                            </span>\n                        )}\n                    </span>\n                )}\n            </div>\n        </Tag>\n    );\n};\n\nProductItem.propTypes = {\n    product: PropTypes.object.isRequired,\n    themeStyles: PropTypes.object,\n    tag: PropTypes.any,\n};\n\nProductItem.defaultProps = {\n    tag: 'div',\n    themeStyles: {},\n};\n","import { BaseApi } from './baseApi';\n\nexport class ProductsApi extends BaseApi {\n    list(workspaceId, params) {\n        return this.get([`/workspaces/${workspaceId}/products`, params]);\n    }\n\n    load(workspaceId, productId) {\n        return this.get([`/workspaces/${workspaceId}/products/${productId}`]);\n    }\n\n    loadBySlug(workspaceId, productSlug, collectionId) {\n        return this.get([`/workspaces/${workspaceId}/products/${collectionId}/${productSlug}`]);\n    }\n}\n\nexport default ((options) => new ProductsApi(options))();\n","export const handleError = (error) => {\n    error = error || new Error('Unhandled error');\n\n    console.error(error);\n\n    if (window.Sentry) {\n        window.Sentry.captureException(error);\n    }\n};\n","import { useMediaQuery } from 'react-responsive';\n\nexport const MEDIA_BREAKPOINTS = {\n    desktop: { minWidth: 1025 },\n    aboveMobile: { minWidth: 601 },\n    belowDesktop: { maxWidth: 1024 },\n    tablet: { maxWidth: 1024, minWidth: 768 },\n    mobile: { maxWidth: 600 },\n};\n\nexport function useBreakpoints() {\n    const isDesktop = useMediaQuery(MEDIA_BREAKPOINTS['desktop']);\n    const isAboveMobile = useMediaQuery(MEDIA_BREAKPOINTS['aboveMobile']);\n    const isBelowDesktop = useMediaQuery(MEDIA_BREAKPOINTS['belowDesktop']);\n    const isTablet = useMediaQuery(MEDIA_BREAKPOINTS['tablet']);\n    const isMobile = useMediaQuery(MEDIA_BREAKPOINTS['mobile']);\n\n    return { isDesktop, isAboveMobile, isBelowDesktop, isTablet, isMobile };\n}\n\nexport const useIsMobile = () => {\n    return !!useMediaQuery(MEDIA_BREAKPOINTS['mobile']);\n};\n\nexport const useIsDesktop = () => {\n    return !!useMediaQuery(MEDIA_BREAKPOINTS['desktop']);\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3dvk4qMK\",\"item\":\"_3awBxbh9\",\"active\":\"zyqy27XG\",\"list\":\"_2agEy5u-\",\"clipLeft\":\"_1gV7--Yd\",\"clipRight\":\"_3kz8zbIR\",\"controlContainerLeft\":\"_25EQ80Ed\",\"controlContainerRight\":\"_3JnavzXx\",\"control\":\"hhPWLPiY\"};","import PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDeepCompareEffect } from 'react-use';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport { __t } from '@mssgme/shared';\nimport { resolvePathname } from '@mssgme/helpers';\nimport { useHorizontalTabbedScroll } from '@mssgme/ui';\nimport { useBasePageColor } from '../../../../hooks';\n\nimport styles from './ButtonsMenu.scss';\n\nexport const ButtonsMenu = ({ items, interactive, activeCollectionId, theme, onSelect, ...rest }) => {\n    const location = useLocation();\n    const { root, hasLeftBtn, moveLeft, list, hasRightBtn, moveRight, moveTo } = useHorizontalTabbedScroll(\n        items.length\n    );\n    const { backgroundColor, backgroundDimmed, isLightBG } = useBasePageColor();\n    const baseUrl = useMemo(() => resolvePathname(location.pathname, 'c'), [location.pathname]);\n    const themeStyle = useMemo(\n        () => ({\n            button: {\n                backgroundColor: theme.backgroundColor,\n                color: theme.productsCategoryTextColor || theme.color,\n                borderRadius: theme.borderRadius,\n            },\n            buttonActive: {\n                backgroundColor: theme.buttonBackground,\n                color: theme.buttonTextColor,\n                borderRadius: theme.borderRadius,\n            },\n            arrowButton: { color: theme.color },\n            arrowBg: { color: backgroundColor },\n        }),\n        [theme, backgroundColor, backgroundDimmed, isLightBG]\n    );\n\n    const isTabbed = theme.filterMode === 'tabs';\n    const ItemTag = interactive ? Link : 'div';\n    const handleClick = useCallback(\n        (e) => {\n            if (!isTabbed) {\n                return;\n            }\n\n            e.preventDefault();\n\n            const slug = e.target.dataset?.slug;\n            const index = items.findIndex((item) => item.slug === slug);\n            const id = items[index]?._id;\n\n            if (id === activeCollectionId) {\n                // onSelect(null);\n            } else {\n                moveTo(index);\n                onSelect(id);\n            }\n        },\n        [isTabbed, activeCollectionId, items, moveTo, onSelect]\n    );\n\n    useDeepCompareEffect(() => {\n        if (items.length) {\n            moveTo(0);\n            onSelect(items[0]._id);\n        }\n    }, [items]);\n\n    return (\n        <div className={styles.root} ref={root} {...rest}>\n            {hasLeftBtn && (\n                <div key={`le-${backgroundColor}`} className={styles.controlContainerLeft} onClick={moveLeft}>\n                    <div className={styles.control} style={themeStyle.arrowButton}>\n                        &larr;\n                    </div>\n                </div>\n            )}\n\n            <ul className={cn(styles.list, hasLeftBtn && styles.clipLeft, hasRightBtn && styles.clipRight)} ref={list}>\n                {items.map((col, index) => {\n                    const isActive = isTabbed && activeCollectionId === col._id;\n\n                    return (\n                        <li\n                            key={col._id}\n                            data-index={index}\n                            className={cn({ [styles.item]: true, [styles.active]: isActive })}\n                        >\n                            <ItemTag\n                                style={isActive ? themeStyle.buttonActive : themeStyle.button}\n                                data-slug={col.slug}\n                                onClick={handleClick}\n                                {...interactive && { to: `${baseUrl}/${col.slug}` }}\n                            >\n                                {col.default ? __t('all_products') : col.name}\n                            </ItemTag>\n                        </li>\n                    );\n                })}\n            </ul>\n\n            {hasRightBtn && (\n                <div key={`ri-${backgroundColor}`} className={styles.controlContainerRight} onClick={moveRight}>\n                    <div className={styles.control} style={themeStyle.arrowButton}>\n                        &rarr;\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nButtonsMenu.propTypes = {\n    items: PropTypes.array.isRequired,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","import { useCallback, useRef, useState } from 'react';\nimport { useMeasure, useScroll } from 'react-use';\n\nimport { useIsDesktop } from './useBreakpoints';\n\nexport const useHorizontalTabbedScroll = (items, tag = 'li') => {\n    const isDesktop = useIsDesktop();\n    const list = useRef(null);\n    const [index, setIndex] = useState(0);\n    const [root, { width }] = useMeasure();\n    const { x: listScrollX } = useScroll(list);\n\n    const listScrollWidth = (list.current && list.current.scrollWidth) || width;\n    const hasScroll = isDesktop && listScrollWidth > width;\n    const hasLeftBtn = hasScroll && listScrollX > 0;\n    const hasRightBtn = hasScroll && listScrollX + width < listScrollWidth - 1;\n\n    const moveTo = useCallback(\n        (targetIndex) => {\n            if (targetIndex < 0 || targetIndex > items - 1) {\n                return;\n            }\n\n            const parentWidth = list.current.parentElement.clientWidth;\n            const nodes = Array.from(list.current.querySelectorAll(tag));\n            let scrollPosition = 0;\n\n            for (let i = 0; i < targetIndex; i++) {\n                scrollPosition += nodes[i].clientWidth + 8;\n            }\n\n            list.current.scrollLeft = scrollPosition - (parentWidth - 32) / 2 + nodes[targetIndex].clientWidth / 2 - 4;\n            setIndex(targetIndex);\n        },\n        [items, index, listScrollWidth]\n    );\n    const moveLeft = useCallback(() => moveTo(index - 1), [moveTo]);\n    const moveRight = useCallback(() => moveTo(index + 1), [moveTo]);\n\n    return { root, hasLeftBtn, moveLeft, list, hasRightBtn, moveRight, moveTo, currentIndex: index };\n};\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction ChevronDownIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(ChevronDownIcon);\nexport default ForwardRef;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nPureButton.propTypes = {\n    as: PropTypes.elementType,\n    className: PropTypes.string,\n    startIcon: PropTypes.node,\n    endIcon: PropTypes.node,\n    styles: PropTypes.shape({\n        button: PropTypes.string,\n        startIcon: PropTypes.string,\n        endIcon: PropTypes.string,\n    }),\n};\n\nPureButton.defaultProps = {\n    as: 'button',\n    styles: {},\n};\n\nexport default function PureButton({ as: Component, className, startIcon, endIcon, children, styles, ...rest }) {\n    return (\n        <Component className={cn(styles.button, className)} {...getProps(Component, rest)}>\n            {startIcon && <span className={styles.startIcon}>{startIcon}</span>}\n            {children}\n            {endIcon && <span className={styles.endIcon}>{endIcon}</span>}\n        </Component>\n    );\n}\n\nexport function getProps(el, props) {\n    const { type, disabled, ...rest } = props;\n    const out = { ...rest };\n\n    if (el === 'button') {\n        out.type = type || 'button';\n        out.disabled = disabled;\n    } else {\n        out.role = 'button';\n        out.tabIndex = '0';\n        if (disabled) out['aria-disabled'] = true;\n    }\n\n    return out;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"_1cheHu2s\",\"startIcon\":\"_3QTRIM5a\",\"endIcon\":\"bgPcNmEE\"};","import React from 'react';\nimport PureButton from './PureButton';\n\nimport styles from './TextButton.scss';\n\nexport default function TextButton(props) {\n    return <PureButton styles={styles} {...props} />;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { CSSTransition } from 'react-transition-group';\n\nexport const DURATION_MAP = {\n    'extra-fast': 100,\n    fast: 200,\n    normal: 300,\n    slow: 500,\n    'extra-slow': 800,\n};\n\nexport default function createTransition(displayName, classNames) {\n    function Transition({ in: inProp, appear, duration, children, ...innerRest }) {\n        const timeout = duration in DURATION_MAP ? DURATION_MAP[duration] : duration;\n\n        const content = React.cloneElement(\n            children,\n            {\n                ...children.props,\n                style: {\n                    ...children.props.style,\n                    transitionDuration: `${timeout}ms`,\n                },\n            },\n            children.props.children\n        );\n\n        return (\n            <CSSTransition\n                unmountOnExit\n                in={inProp}\n                appear={appear}\n                timeout={timeout}\n                classNames={classNames}\n                {...innerRest}\n            >\n                {content}\n            </CSSTransition>\n        );\n    }\n\n    Transition.propTypes = {\n        in: PropTypes.bool,\n        appear: PropTypes.bool,\n        duration: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.keys(DURATION_MAP))]),\n    };\n\n    Transition.defaultProps = {\n        in: false,\n        appear: false,\n        duration: 'slow',\n    };\n\n    Transition.displayName = displayName;\n\n    return Transition;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"appear\":\"_32enWlY6\",\"enter\":\"_3PKh3JN6\",\"appearActive\":\"DQAGI999\",\"enterActive\":\"_2ZrdWXif\",\"exit\":\"_3x6BX_AB\",\"exitActive\":\"_2zI1LOuA\"};","import createTransition from './createTransition';\nimport styles from './Fade.scss';\n\nexport default createTransition('Fade', styles);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2dUvypCw\",\"select\":\"_5GfWMbLF\",\"button\":\"_1RWnUF4N\",\"label\":\"_146sE58Z\",\"arrow\":\"_17yoFmZR\",\"option\":\"_3-EPpWFr\",\"active\":\"_2mmR5s76\",\"optionLabel\":\"Hm8d5GxS\",\"badge\":\"yfPVOd0T\",\"dropdown\":\"_3ViuLY5O\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useRef } from 'react';\nimport { useClickAway, useToggle } from 'react-use';\n\nimport { __t } from '@mssgme/shared';\nimport { isMatchId } from '@mssgme/helpers';\nimport { ChevronDownIcon } from '@mssgme/icons';\nimport { Fade, TextButton } from '@mssgme/ui';\n\nimport styles from './FilterMenu.scss';\n\nexport const FilterMenuItem = ({ collection, active, onSelect }) => {\n    const handleClick = useCallback(() => onSelect(collection._id), [onSelect, collection]);\n\n    return (\n        <div className={cn(styles.option, active && styles.active)} onClick={handleClick}>\n            <span className={styles.optionLabel}>{collection.default ? __t('all_products') : collection.name}</span>\n            <span className={styles.badge}>{collection.publishedProductsCount}</span>\n        </div>\n    );\n};\n\nFilterMenuItem.propTypes = {\n    collection: PropTypes.object.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    active: PropTypes.bool,\n};\n\nexport const FilterMenu = ({ items, activeCollectionId, theme, interactive, onSelect, ...rest }) => {\n    const root = useRef();\n    const [isOpen, toggle] = useToggle();\n    const selected = items.find(isMatchId(activeCollectionId));\n\n    useClickAway(root, () => toggle(false));\n\n    const handleSelect = useCallback((id) => {\n        onSelect(id);\n        toggle(false);\n    });\n\n    return (\n        <div className={styles.root} {...rest}>\n            <div className={styles.select} ref={root}>\n                <TextButton aria-pressed={isOpen} className={styles.button} onClick={toggle}>\n                    <span className={styles.label}>\n                        {selected && (selected.default ? __t('all_products') : selected.name)}\n                        {selected && <span>&nbsp;({selected?.publishedProductsCount})</span>}\n                    </span>\n                    <ChevronDownIcon size={16} className={styles.arrow} />\n                </TextButton>\n\n                <Fade in={isOpen}>\n                    <div className={styles.dropdown}>\n                        {items.map((collection) => (\n                            <FilterMenuItem\n                                key={collection._id}\n                                active={collection._id === activeCollectionId}\n                                collection={collection}\n                                onSelect={handleSelect}\n                            />\n                        ))}\n                    </div>\n                </Fade>\n            </div>\n        </div>\n    );\n};\n\nFilterMenu.propTypes = {\n    items: PropTypes.array.isRequired,\n    baseUrl: PropTypes.string.isRequired,\n    buttonStyle: PropTypes.object,\n    arrowsStyle: PropTypes.object,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { ButtonsMenu } from './ButtonsMenu';\nimport { FilterMenu } from './FilterMenu';\n\nexport function CollectionsBar({ theme, ...rest }) {\n    return theme.filterMode === 'filter' ? (\n        <FilterMenu theme={theme} {...rest} />\n    ) : (\n        <ButtonsMenu theme={theme} {...rest} />\n    );\n}\n\nCollectionsBar.propTypes = {\n    items: PropTypes.array.isRequired,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"zqQ_UzIa\",\"title\":\"_2YZlafSS\",\"list\":\"v4gRAsY4\",\"mobileMode\":\"_2d3Wg2J0\",\"empty\":\"_8ORnZ2Rf\",\"icon\":\"_149SoVjF\",\"description\":\"l6CXojOX\",\"moreBtnContainer\":\"_3OrypCfY\",\"moreBtn\":\"_3N_b-4yz\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { useMountedState } from 'react-use';\nimport { get, pick } from 'lodash';\n\nimport { __t, ProductsBlockKind } from '@mssgme/shared';\nimport { cls, isMatchId, isMobile, keyHash } from '@mssgme/helpers';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { LandingsPropTypes, Spinner } from '@mssgme/ui';\nimport { SearchIcon } from '@mssgme/icons';\nimport { ProductItem } from '../../../../products';\nimport { useBlockTheme, useProductsApi, useWebsiteData } from '../../../hooks';\nimport { MoreButton } from '../../../UI';\nimport { BlockBase } from '../BlockBase';\nimport { CollectionsBar } from './CollectionsBar';\n\nimport styles from './Products.scss';\n\nexport const Item = ({ product, baseProductUrl, fromCollection, interactive, ...rest }) => {\n    const to = useMemo(\n        () =>\n            interactive\n                ? {\n                    pathname: `${baseProductUrl}/${product.slug}`,\n                    state: { fromCollection },\n                }\n                : undefined,\n        [baseProductUrl, interactive, product]\n    );\n\n    return <ProductItem product={product} tag={interactive ? Link : 'div'} to={to} {...rest} />;\n};\n\nItem.propTypes = {\n    product: PropTypes.object.isRequired,\n    interactive: PropTypes.bool,\n    fromCollection: PropTypes.string,\n    baseProductUrl: PropTypes.string,\n    style: PropTypes.object,\n};\n\nexport default function Products({ block, interactive, isMobileMode, ...rest }) {\n    const website = useWebsiteData();\n    const isMounted = useMountedState();\n    const location = useLocation();\n    const { generateUrl } = useNavigationUtils();\n    const { theme, style } = useBlockTheme(block);\n    const collectionIds = get(block, 'collections.include', []);\n    const activeCollections = website.collections.filter((col) => col.published && col.publishedProductsCount);\n    const showCollections = collectionIds.length\n        ? collectionIds.map((id) => activeCollections.find(isMatchId(id))).filter(Boolean)\n        : activeCollections;\n    const isTabbed = theme.filterMode !== 'buttons';\n    const [activeCollectionId, setActiveCollectionId] = useState(showCollections[0]?._id || null);\n\n    const options = pick(block, ['products', 'total', 'sort']);\n    const query = useMemo(\n        () => ({\n            ...options,\n            limit: isMobile() ? 6 : 12,\n            collections: activeCollectionId && isTabbed ? { include: [activeCollectionId] } : block.collections,\n        }),\n        [website.collections, keyHash(options), activeCollectionId, isTabbed]\n    );\n    const { hasNext, isFetching, items, getProducts } = useProductsApi({\n        workspaceId: website.workspace,\n        websiteId: website._id,\n        query,\n    });\n    const handleMore = useCallback(() => getProducts(), [getProducts]);\n    const baseProductUrl = useMemo(() => generateUrl('p'), [location.pathname]);\n    const defaultStyle = useMemo(() => ({ color: theme.color }), [theme]);\n    const getFromCollection = (product) => Object.keys(product.cols || {}).find((id) => collectionIds.includes(id));\n\n    useEffect(() => {\n        const firstId = showCollections[0]?._id;\n\n        if (firstId !== activeCollectionId && !showCollections.find(isMatchId(activeCollectionId))) {\n            if (isMounted()) {\n                setActiveCollectionId(firstId);\n            }\n        }\n    }, [activeCollectionId, showCollections]);\n\n    return (\n        <BlockBase {...cls([styles.root, isMobileMode && styles.mobileMode], rest)}>\n            {!!block.title && (\n                <div className={styles.title} style={defaultStyle}>\n                    {block.title}\n                </div>\n            )}\n\n            {showCollections.length > 1 && (\n                <CollectionsBar\n                    theme={theme}\n                    style={defaultStyle}\n                    items={showCollections}\n                    interactive={interactive}\n                    activeCollectionId={activeCollectionId}\n                    onSelect={setActiveCollectionId}\n                />\n            )}\n\n            <ul className={styles.list}>\n                {items.map((product) => (\n                    <li key={product._id}>\n                        <Item\n                            product={product}\n                            interactive={interactive}\n                            baseProductUrl={baseProductUrl}\n                            fromCollection={activeCollectionId || getFromCollection(product)}\n                            themeStyles={theme}\n                            style={defaultStyle}\n                        />\n                    </li>\n                ))}\n\n                {!(items.length || isFetching) && (\n                    <li key=\"empty-list\" className={styles.empty} style={defaultStyle}>\n                        <SearchIcon className={styles.icon} size={48} />\n                        <div className={styles.description}>{__t('no_products')}</div>\n                    </li>\n                )}\n            </ul>\n\n            {isFetching ? (\n                <Spinner />\n            ) : (\n                hasNext && (\n                    <div className={styles.moreBtnContainer}>\n                        <MoreButton\n                            className={styles.moreBtn}\n                            style={style}\n                            onClick={handleMore}\n                            disabled={isFetching}\n                        />\n                    </div>\n                )\n            )}\n        </BlockBase>\n    );\n}\n\nProducts.propTypes = {\n    ...BlockBase.propTypes,\n    block: LandingsPropTypes.block.isRequired,\n};\n\nProducts.defaultProps = BlockBase.defaultProps;\n\nProducts.kind = ProductsBlockKind;\n","import { useState } from 'react';\nimport { useDebounce, useMountedState } from 'react-use';\n\nimport { handleError, productsApi } from '@mssgme/lib';\nimport { useFetching } from '@mssgme/hooks';\n\nexport const useProductsApi = ({ workspaceId, websiteId, query }) => {\n    const isMounted = useMountedState();\n    const [store, setStore] = useState({ hasNext: false, next: null, publishedCount: 0, items: [], isFetching: true });\n    const { pending: isFetching, run: getProducts } = useFetching(\n        async (resetStore) => {\n            const { results, next, ...productsStore } = await productsApi.list(workspaceId, {\n                limit: query.limit,\n                next: resetStore ? null : store.next,\n                collection: query.collections.include,\n                website: websiteId,\n                published: true,\n            });\n\n            if (!isMounted()) {\n                return;\n            }\n\n            setStore((prevProducts) => {\n                const items = resetStore ? results : prevProducts.items.concat(results);\n                const hasNext = productsStore.hasNext && !(query.total && items.length >= query.total);\n\n                return {\n                    ...productsStore,\n                    next: (hasNext && next) || null,\n                    items: query.total ? items.slice(0, query.total) : items,\n                    hasNext,\n                };\n            });\n        },\n        [store.next, query]\n    );\n\n    useDebounce(() => void getProducts(true).catch(handleError), 100, [query]);\n\n    return {\n        ...store,\n        isFetching: store.isFetching || isFetching,\n        getProducts,\n    };\n};\n","import Products from './Products';\n\nexport default Products;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Eihnl-9N\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './styles.scss';\n\nexport function Grid({ children, itemClassName }) {\n    return (\n        <ul className={styles.root}>\n            {React.Children.map(children, (item, index) => (\n                <li key={index} className={itemClassName}>\n                    {item}\n                </li>\n            ))}\n        </ul>\n    );\n}\n\nGrid.propTypes = {\n    children: PropTypes.node,\n    itemClassName: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"_1tZ4uWus\",\"moreBtnContainer\":\"_1tySfxGC\",\"moreBtn\":\"_1Gt8GCb-\",\"animated\":\"_3SAjP8Or\",\"revealItem\":\"_30YTujS8\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useState } from 'react';\nimport { useAsyncFn, useDeepCompareEffect } from 'react-use';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { __t } from '@mssgme/shared';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { productsApi } from '@mssgme/lib';\nimport { Spinner } from '@mssgme/ui';\nimport { ProductItem } from '../../../products';\nimport { useModalThemes } from '../../hooks';\nimport { Grid, MoreButton, ThemedModal } from '../../UI';\n\nimport styles from './CollectionView.scss';\n\nexport const CollectionView = ({ workspaceId, websiteId, collection }) => {\n    const history = useHistory();\n    const { style } = useModalThemes();\n    const { generateUrl } = useNavigationUtils();\n    const [{ next, results }, setProducts] = useState({\n        next: null,\n        results: [],\n    });\n    const backPath = generateUrl('../..');\n\n    const [{ loading: isFetching }, getProducts] = useAsyncFn(\n        async (next, resetStore) => {\n            const productsStore = await productsApi.list(workspaceId, {\n                next,\n                collection: collection._id,\n                website: websiteId,\n                published: true,\n            });\n\n            setProducts((prevProducts) => ({\n                ...productsStore,\n                results: resetStore ? productsStore.results : prevProducts.results.concat(productsStore.results),\n            }));\n        },\n        [workspaceId, websiteId, collection._id]\n    );\n\n    const handleClose = useCallback(() => history.push(backPath), [backPath]);\n    const handleMore = useCallback(() => getProducts(next), [next, getProducts]);\n\n    useDeepCompareEffect(() => {\n        const initProducts = async () => {\n            await getProducts(null, true);\n        };\n\n        void initProducts();\n    }, [collection, getProducts]);\n\n    return (\n        <ThemedModal overlay title={collection.default ? __t('all_products') : collection.name} onClose={handleClose}>\n            <div className={styles.content}>\n                {results.length > 0 && (\n                    <Grid itemClassName={styles.animated}>\n                        {results.map((item) => (\n                            <ProductItem\n                                key={item._id}\n                                product={item}\n                                tag={Link}\n                                to={{\n                                    pathname: generateUrl(`../../c/${collection.slug}/p/${item.slug}`),\n                                    state: {\n                                        fromCollection: collection._id,\n                                    },\n                                }}\n                                themeStyles={style}\n                            />\n                        ))}\n                    </Grid>\n                )}\n\n                {isFetching ? (\n                    <Spinner />\n                ) : (\n                    !!next && (\n                        <div className={cn(styles.moreBtnContainer, styles.animated)}>\n                            <MoreButton\n                                className={styles.moreBtn}\n                                style={style}\n                                onClick={handleMore}\n                                disabled={isFetching}\n                            />\n                        </div>\n                    )\n                )}\n            </div>\n        </ThemedModal>\n    );\n};\n\nCollectionView.propTypes = {\n    workspaceId: PropTypes.string.isRequired,\n    websiteId: PropTypes.string,\n    isAdmin: PropTypes.bool,\n    collection: PropTypes.shape({\n        _id: PropTypes.string.isRequired,\n        slug: PropTypes.string.isRequired,\n        name: PropTypes.string.isRequired,\n        default: PropTypes.bool,\n    }).isRequired,\n};\n","import { useContext, useMemo } from 'react';\nimport { cloneDeep, merge } from 'lodash';\n\nimport { CRM_IDENTITY } from '../../products';\nimport { WebsiteDataContext } from './useWebsiteData';\n\nexport const useCRMData = () => {\n    const { crm } = useContext(WebsiteDataContext);\n\n    return useMemo(() => merge(cloneDeep(CRM_IDENTITY), crm), [crm]);\n};\n","import { useMemo } from 'react';\n\nimport { MessengersBlockKind } from '@mssgme/shared';\nimport { useCRMData } from '../hooks';\n\nexport function useContacts(map) {\n    const { contacts: { messengers } } = useCRMData();\n\n    return useMemo(\n        () =>\n            messengers.length ? [\n                {\n                    kind: MessengersBlockKind,\n                    messengers: map ? messengers.map(map) : messengers,\n                    enabled: true,\n                },\n            ] : undefined,\n        [messengers, map]\n    );\n}\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useAsyncFn } from 'react-use';\n\nimport { productsApi } from '@mssgme/lib';\nimport { __t } from '@mssgme/shared';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { usePresenceRemoval } from '@mssgme/ui';\nimport { ServiceContent, ThemedModal } from '../../UI';\nimport { useContacts, useModalThemes, useWebsiteData } from '../../hooks';\n\nconst addUrl = (product, finalUrl) => {\n    const text = encodeURIComponent(\n        `${__t('buy_template')} ${product.title || product.name} - ${finalUrl}/p/${product.slug}`\n    );\n    const ref = `buy_${product._id}_${Date.now()}_${document.documentElement.lang}`;\n    const params = {\n        text,\n        ref,\n        start: ref,\n    };\n\n    return (messenger) => {\n        return { ...messenger, params };\n    };\n};\n\nexport function ProductView({ workspaceId, defaultCollectionId, productSlug, interactive = true, ...props }) {\n    const history = useHistory();\n    const fromCollection = history.location.state?.fromCollection || defaultCollectionId;\n    const { generateUrl } = useNavigationUtils();\n    const { contentStyle } = useModalThemes();\n    const { finalUrl } = useWebsiteData();\n    const backPath = useMemo(() => generateUrl('../..'), [history.location]);\n\n    const [{ value: product, error }, getProduct] = useAsyncFn(\n        () => productsApi.loadBySlug(workspaceId, productSlug, fromCollection),\n        [workspaceId, productSlug, fromCollection]\n    );\n    const contacts = useContacts(useMemo(() => product && addUrl(product, finalUrl)), [product, finalUrl]);\n    const is404 = error?.status === 404;\n\n    const handleClose = useCallback(() => history.push(backPath), [backPath]);\n\n    useEffect(() => {\n        if (fromCollection) {\n            void getProduct();\n        }\n    }, [productSlug, fromCollection]);\n\n    usePresenceRemoval();\n\n    return (\n        <ThemedModal overlay showHeader={!!error} title={error ? __t('error') : ''} onClose={handleClose}>\n            {(handleClose) =>\n                error ? (\n                    <div style={{ padding: 16, display: 'flex' }}>\n                        {is404 ? __t('product_not_found') : __t('no_products')}\n                    </div>\n                ) : product ? (\n                    <ServiceContent\n                        {...props}\n                        themeStyles={contentStyle}\n                        service={product}\n                        contacts={contacts}\n                        isActive\n                        isPrev={false}\n                        isNext={false}\n                        interactive={interactive}\n                        backUrl={backPath}\n                        onClose={handleClose}\n                    />\n                ) : null\n            }\n        </ThemedModal>\n    );\n}\n\nProductView.propTypes = {\n    productSlug: PropTypes.string.isRequired,\n    workspaceId: PropTypes.string.isRequired,\n    defaultCollectionId: PropTypes.string.isRequired,\n    interactive: PropTypes.bool,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"ordersList\":\"_31gbTMWf\",\"orderHeader\":\"_3khO0JNN\",\"orderContent\":\"_3VDlZaSO\"};","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { __t } from '@mssgme/shared';\nimport { usePageTheme, useSavedOrders } from '../../hooks';\nimport { ThemedModal } from '../../UI';\n\nimport styles from './UserOrdersPage.scss';\n\nexport function UserOrdersPage() {\n    const { generateUrl } = useNavigationUtils();\n    const { theme } = usePageTheme();\n    const { userOrders } = useSavedOrders();\n    const finalizedOrders = userOrders.filter((order) => order.finalized && order.feedback);\n    const shouldRenderPaymentStatus = (provider, orderStatus) => {\n        const immediate = ['cod', 'other'];\n\n        return !immediate.includes(provider) && orderStatus !== 'rejected';\n    };\n\n    return (\n        <ThemedModal overlay compact title={__t('my_orders')} onClose={generateUrl('..')} padding>\n            <ul className={styles.ordersList}>\n                {finalizedOrders.map((order) => (\n                    <li key={order._id}>\n                        <Link to={generateUrl(order._id)} style={theme.blocks.features}>\n                            <div className={styles.orderHeader}>\n                                <div>\n                                    <h2>\n                                        {__t('order_term')} #{order.feedback.order}\n                                    </h2>\n                                    <div>\n                                        <span\n                                            style={{\n                                                color: theme.colors.background,\n                                                backgroundColor: theme.colors.text,\n                                            }}\n                                        >\n                                            {__t(`order_status_${order.feedback.status}`)}\n                                        </span>\n                                        {shouldRenderPaymentStatus(order.paymentMethod, order.feedback.status) && (\n                                            <span\n                                                style={{\n                                                    color: theme.colors.background,\n                                                    backgroundColor: theme.colors.text,\n                                                }}\n                                            >\n                                                {__t(`payment_status_${order.status}`)}\n                                            </span>\n                                        )}\n                                    </div>\n                                </div>\n                                <div>\n                                    <div>\n                                        <span>{new Date(order.feedback.timestamp).toLocaleDateString()}</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className={styles.orderContent}>\n                                <div>\n                                    <h3>{__t('products')}</h3>\n                                    <span>\n                                        {order.items.map((item) => `${item.name} x${item.quantity}`).join(', ')}\n                                    </span>\n                                </div>\n                                <div>\n                                    {order.total.amount} {order.total.currency}\n                                </div>\n                            </div>\n                        </Link>\n                    </li>\n                ))}\n            </ul>\n        </ThemedModal>\n    );\n}\n","import { useMemo } from 'react';\n\nimport { useCRMData } from './useCRMData';\n\nexport const immediateCompletion = ['cod', 'other', 'transfer'];\nexport const handlesPaymentsStatus = (provider) => !immediateCompletion.includes(provider);\n\nexport const usePaymentConfigs = () => {\n    const { payments } = useCRMData();\n\n    return useMemo(() => {\n        const providers = Object.entries(payments || {}).filter(([, config]) => config.enabled);\n        const immediate = [];\n        const online = [];\n\n        for (const entry of providers) {\n            if (handlesPaymentsStatus(entry[0])) {\n                online.push(entry);\n            } else {\n                immediate.push(entry);\n            }\n        }\n\n        return {\n            payments,\n            providers,\n            immediate,\n            online,\n            isSingular: providers.length <= 1,\n            isSingularOnline: online.length <= 1,\n        };\n    }, [payments]);\n};\n","import { useCallback, useEffect, useState } from 'react';\n\nimport { useFrontAPI } from '../hooks';\nimport { useAsync } from 'react-use';\nimport { NotFoundError } from '@mssgme/api-client';\n\nexport function useOrder(orderId) {\n    const api = useFrontAPI();\n    const [orderLoadCount, setOrderLoadCount] = useState(0);\n    const [order, setOrder] = useState(null);\n    const { loading, error, value: loadedOrder } = useAsync(\n        () => api.orders.show({ orderId, query: { complete: true } }),\n        [orderId, orderLoadCount]\n    );\n    const isNotFound = error && NotFoundError.is(error);\n\n    const reload = useCallback(() => setOrderLoadCount((old) => old + 1), []);\n\n    useEffect(() => {\n        if (loadedOrder) {\n            setOrder(loadedOrder);\n        }\n    }, [loadedOrder]);\n\n    return {\n        isNotFound,\n        loading,\n        order,\n        error,\n        reload,\n        immediate: loadedOrder,\n    };\n}\n","import { FaPaypal, FaStripe } from 'react-icons/fa';\nimport { FiChevronsRight } from 'react-icons/fi';\nimport { MdPayment } from 'react-icons/md';\n\nexport const PAYMENT_PROVIDERS = {\n    stripe: {\n        label: 'Stripe',\n        icon: FaStripe,\n    },\n    liqpay: {\n        label: 'LiqPay',\n        icon: FiChevronsRight,\n    },\n    paypal: {\n        label: 'PayPal',\n        icon: FaPaypal,\n        supported_currencies: [\n            'AUD',\n            'BRL',\n            'CAD',\n            'CNY',\n            'CZK',\n            'DKK',\n            'EUR',\n            'HKD',\n            'HUF',\n            'ILS',\n            'JPY',\n            'MYR',\n            'MXN',\n            'TWD',\n            'NZD',\n            'NOK',\n            'PHP',\n            'PLN',\n            'GBP',\n            'RUB',\n            'SGD',\n            'SEK',\n            'CHF',\n            'THB',\n            'USD',\n        ],\n    },\n    wayforpay: {\n        label: 'Wayforpay',\n        icon: MdPayment,\n    },\n    robokassa: {\n        label: 'Robokassa',\n        icon: MdPayment,\n    },\n};\n","import React from 'react';\n\nimport { __t, PAYMENT_PROVIDERS } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useModalThemes, usePaymentConfigs } from '../../hooks';\nimport { ThemedButton } from '../../UI';\n\nexport const PayButton = ({ provider, ...props }) => {\n    const { isSingular } = usePaymentConfigs();\n    const { contentStyle } = useModalThemes();\n    const label = PAYMENT_PROVIDERS[provider]?.label || provider;\n    const Icon = PAYMENT_PROVIDERS[provider]?.icon;\n\n    return (\n        <ThemedButton\n            fullWidth\n            tag=\"button\"\n            type=\"submit\"\n            beforeIcon={Icon && <Icon size={24} />}\n            theme={contentStyle}\n            contentAlignLeft\n            {...props}\n        >\n            {__t(isSingular ? 'pay' : 'payWith', { provider: label })}\n        </ThemedButton>\n    );\n};\n\nPayButton.propTypes = {\n    provider: LandingsPropTypes.paymentMethod,\n};\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useAsync, useMountedState } from 'react-use';\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js';\nimport { pick } from 'lodash';\n\nimport { FormErrors } from '@mssgme/ui';\nimport { useFrontAPI, useInputTheme } from '../hooks';\nimport { PayButton } from './PayButton';\n\nimport styles from './StripeCheckoutForm.scss';\n\nconst CARD_OPTIONS = {\n    hidePostalCode: true,\n    iconStyle: 'solid',\n    classes: {\n        base: styles.cardBase,\n        webkitAutofill: styles.cardAutofill,\n    },\n};\n\nconst propTypes = {\n    orderId: PropTypes.string.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nfunction StripeCheckoutForm({ orderId, disabled: rawDisabled, onPay }) {\n    const stripe = useStripe();\n    const elements = useElements();\n    const api = useFrontAPI();\n    const isMounted = useMountedState();\n    const inputStyles = useInputTheme();\n    const [succeeded, setSucceeded] = useState(false);\n    const [processing, setProcessing] = useState(false);\n    const [disabled, setDisabled] = useState(true);\n    const [error, setError] = useState(null);\n\n    const { style, options } = useMemo(\n        () => ({\n            options: {\n                ...CARD_OPTIONS,\n                disabled: processing || succeeded,\n                style: {\n                    base: {\n                        iconColor: inputStyles.input.color,\n                        color: inputStyles.input.color,\n                        // ...pick(inputStyles.input, ['backgroundColor', 'color']),\n                        '::placeholder': pick(inputStyles.input, ['backgroundColor', 'color']),\n                        '::selection': { backgroundColor: 'currentColor' },\n                        ':-webkit-autofill': {\n                            color: inputStyles.input.color,\n                        },\n                    },\n                },\n            },\n            style: {\n                ...inputStyles.input,\n                overflow: 'hidden',\n            },\n        }),\n        [processing, succeeded, inputStyles.input]\n    );\n\n    const { value: clientSecret } = useAsync(\n        async () => (await api.orders.signatures.createStripePaymentIntent({ orderId })).clientSecret,\n        [orderId]\n    );\n\n    const isDisabled = processing || disabled || succeeded || rawDisabled || !clientSecret;\n\n    const handleSubmit = useCallback(\n        async (e) => {\n            e.preventDefault();\n            setProcessing(true);\n\n            try {\n                const payload = await stripe.confirmCardPayment(clientSecret, {\n                    payment_method: {\n                        card: elements.getElement(CardElement),\n                    },\n                });\n\n                setError(payload.error ? `Payment failed ${payload.error.message}` : null);\n\n                if (!payload.error) {\n                    setSucceeded(true);\n\n                    onPay('stripe', payload);\n                }\n            } finally {\n                if (isMounted()) {\n                    setProcessing(false);\n                }\n            }\n        },\n        [stripe, elements, clientSecret, onPay]\n    );\n\n    const handleChange = useCallback(async (e) => {\n        setDisabled(e.empty || !!e.error);\n        setError(e.error ? e.error.message : '');\n    });\n\n    return (\n        <form onSubmit={handleSubmit}>\n            <div style={style}>\n                <CardElement onChange={handleChange} options={options} />\n            </div>\n            {error && <FormErrors error={error} shake errorStyle={inputStyles.error} />}\n\n            <PayButton disabled={isDisabled} provider=\"stripe\" style={{ marginTop: 16 }} contentAlignLeft={false} />\n        </form>\n    );\n}\n\nStripeCheckoutForm.propTypes = propTypes;\n\nexport default StripeCheckoutForm;\n","// extracted by mini-css-extract-plugin\nexport default {\"cardBase\":\"_2MpdUitw\",\"cardInvalid\":\"_2N6SmSfD\",\"cardAutofill\":\"_2hSkXJ0_\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2DOo0XIe\",\"overlapButton\":\"_3M8clJzy\"};","import PropTypes from 'prop-types';\nimport React, { Fragment, useEffect, useMemo, useState } from 'react';\nimport { PayButton } from '../../../PayButton';\n\nconst CURRENCIES = ['UAH', 'USD', 'EUR', 'RUB'];\nconst PAYMENT_URL = 'https://secure.wayforpay.com/pay';\n\nconst productShape = PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    price: PropTypes.number.isRequired,\n    count: PropTypes.number.isRequired,\n});\n\nconst propTypes = {\n    merchantAccount: PropTypes.string.isRequired,\n    merchantDomainName: PropTypes.string,\n    orderReference: PropTypes.string.isRequired,\n    orderDate: PropTypes.number.isRequired,\n    amount: PropTypes.number.isRequired,\n    currency: PropTypes.oneOf(CURRENCIES),\n    products: PropTypes.arrayOf(productShape).isRequired,\n    returnUrl: PropTypes.string,\n    serviceUrl: PropTypes.string,\n    disabled: PropTypes.bool,\n    createSignature: PropTypes.func.isRequired,\n    orderPaymentTimeout: PropTypes.number,\n};\n\nconst defaultProps = {\n    merchantDomainName: document.location.hostname,\n    orderPaymentTimeout: 0,\n};\n\nfunction WayforpayButton({\n    merchantAccount,\n    merchantDomainName,\n    orderReference,\n    orderDate,\n    amount,\n    currency,\n    products,\n    returnUrl,\n    serviceUrl,\n    createSignature,\n    orderPaymentTimeout,\n    disabled: rawDisabled,\n}) {\n    const productName = useMemo(() => products.map(({ name }) => name), [products]);\n    const productPrice = useMemo(() => products.map(({ price }) => price), [products]);\n    const productCount = useMemo(() => products.map(({ count }) => count), [products]);\n    const [merchantSignature, setMerchantSignature] = useState('');\n    const [disabled, setDisabled] = useState(true);\n    const isDisabled = disabled || rawDisabled;\n\n    useEffect(() => {\n        async function request() {\n            if (!rawDisabled) {\n                setDisabled(true);\n\n                try {\n                    const json = await createSignature({\n                        merchantAccount,\n                        merchantDomainName,\n                        orderReference,\n                        orderDate,\n                        amount,\n                        currency,\n                        productName,\n                        productPrice,\n                        productCount,\n                    });\n\n                    setMerchantSignature(json.merchantSignature);\n                } finally {\n                    setDisabled(false);\n                }\n            }\n        }\n\n        void request();\n    }, [\n        merchantAccount,\n        merchantDomainName,\n        orderReference,\n        orderDate,\n        amount,\n        currency,\n        productName,\n        productPrice,\n        productCount,\n        createSignature,\n    ]);\n\n    return (\n        <form method=\"POST\" action={PAYMENT_URL}>\n            <input type=\"hidden\" name=\"merchantAccount\" value={merchantAccount} />\n            <input type=\"hidden\" name=\"merchantDomainName\" value={merchantDomainName} />\n            <input type=\"hidden\" name=\"merchantSignature\" value={merchantSignature} />\n            <input type=\"hidden\" name=\"merchantTransactionType\" value=\"AUTO\" />\n            <input type=\"hidden\" name=\"merchantTransactionSecureType\" value=\"AUTO\" />\n            <input type=\"hidden\" name=\"orderReference\" value={orderReference} />\n            <input type=\"hidden\" name=\"orderDate\" value={orderDate} />\n            <input type=\"hidden\" name=\"amount\" value={amount} />\n            <input type=\"hidden\" name=\"currency\" value={currency} />\n            <input type=\"hidden\" name=\"orderTimeout\" value={orderPaymentTimeout} />\n            <input type=\"hidden\" name=\"orderLifetime\" value={orderPaymentTimeout} />\n            {productName.map((name, index) => (\n                <Fragment key={index}>\n                    <input type=\"hidden\" name=\"productName[]\" value={name} />\n                </Fragment>\n            ))}\n            {productPrice.map((price, index) => (\n                <Fragment key={index}>\n                    <input type=\"hidden\" name=\"productPrice[]\" value={price} />\n                </Fragment>\n            ))}\n            {productCount.map((count, index) => (\n                <Fragment key={index}>\n                    <input type=\"hidden\" name=\"productCount[]\" value={count} />\n                </Fragment>\n            ))}\n            {returnUrl && <input type=\"hidden\" name=\"returnUrl\" value={returnUrl} />}\n            {serviceUrl && <input type=\"hidden\" name=\"serviceUrl\" value={serviceUrl} />}\n\n            <PayButton disabled={isDisabled} provider=\"wayforpay\" />\n        </form>\n    );\n}\n\nWayforpayButton.propTypes = propTypes;\nWayforpayButton.defaultProps = defaultProps;\n\nexport default WayforpayButton;\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\n// import moment from 'moment';\n\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { BACKEND_ENDPOINTS, useCRMData, useFrontAPI, useWebsiteData } from '../../../hooks';\nimport WayforpayButton from './Buttons/WayforpayButton';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    disabled: PropTypes.bool,\n};\n\nfunction extractProduct({ name, price, quantity }) {\n    return { name, price: price.amount, count: quantity };\n}\n\nexport function WayforpayPayment({ order, disabled }) {\n    const { finalUrl } = useWebsiteData();\n    const { payments } = useCRMData();\n    const api = useFrontAPI();\n    /*\n     * TODO: generate orderReference considering order timeout to avoid duplicated orders in wayforpay personal\n     *       cabinet (need more logic in cart and crm for that)\n     */\n    // const orderPaymentTimeout = 86400; // 1 day\n    // const orderCreatedInLocalTime = moment\n    //     .utc(order.createdAt)\n    //     .local()\n    //     .unix();\n    // const isOrderPaymentDead = Math.round(Date.now() / 1000) - orderCreatedInLocalTime > orderPaymentTimeout;\n    const orderReference = `${order._id}_uniq${Math.floor(Math.random() * 100000)}`;\n    const orderDate = useMemo(() => Math.round(Date.now() / 1000), []);\n    const products = useMemo(() => order.items.map(extractProduct), [order]);\n    const createSignature = useCallback(\n        (payload) => api.orders.signatures.createWayforpaySignature({ orderId: order._id, payload }),\n        [order._id]\n    );\n    const returnUrl = BACKEND_ENDPOINTS.getWayforpayCallback(order);\n\n    return (\n        <WayforpayButton\n            merchantAccount={payments.wayforpay.merchantAccount}\n            merchantDomainName={finalUrl}\n            orderReference={orderReference}\n            orderDate={orderDate}\n            amount={order.total.amount}\n            currency={order.total.currency}\n            products={products}\n            createSignature={createSignature}\n            returnUrl={returnUrl}\n            disabled={disabled}\n            // orderPaymentTimeout={orderPaymentTimeout}\n        />\n    );\n}\n\nWayforpayPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\n\nimport { PayButton } from '../../../PayButton';\n\nconst CURRENCIES = ['USD', 'EUR', 'RUB', 'KZT'];\nconst PAYMENT_URL = 'https://auth.robokassa.ru/Merchant/Index.aspx';\n\nconst propTypes = {\n    merchantLogin: PropTypes.string.isRequired,\n    invId: PropTypes.string.isRequired,\n    outSum: PropTypes.number.isRequired,\n    outSumCurrency: PropTypes.oneOf(CURRENCIES),\n    createSignature: PropTypes.func.isRequired,\n    isTest: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool,\n};\n\nconst defaultProps = {\n    outSumCurrency: 'RUB',\n    isTest: false,\n};\n\nfunction RobokassaButton({\n    merchantLogin,\n    invId,\n    outSum,\n    outSumCurrency,\n    createSignature,\n    disabled: rawDisabled,\n    isTest,\n}) {\n    const [signature, setSignature] = useState('');\n    const [disabled, setDisabled] = useState(true);\n    const isDisabled = disabled || rawDisabled;\n\n    useEffect(() => {\n        async function request() {\n            setDisabled(true);\n\n            try {\n                const json = await createSignature({});\n\n                setSignature(json.signature);\n            } finally {\n                setDisabled(false);\n            }\n        }\n        void request();\n    }, []);\n\n    return (\n        <form method=\"POST\" action={PAYMENT_URL}>\n            <input type=\"hidden\" name=\"MerchantLogin\" value={merchantLogin} />\n            <input type=\"hidden\" name=\"InvId\" value={invId} />\n            <input type=\"hidden\" name=\"SignatureValue\" value={signature} />\n            <input type=\"hidden\" name=\"OutSum\" value={outSum} />\n            <input type=\"hidden\" name=\"OutSumCurrency\" value={outSumCurrency} />\n            {isTest && <input type=\"hidden\" name=\"IsTest\" value=\"1\" />}\n\n            <PayButton disabled={isDisabled} provider=\"robokassa\" />\n        </form>\n    );\n}\n\nRobokassaButton.propTypes = propTypes;\nRobokassaButton.defaultProps = defaultProps;\n\nexport default RobokassaButton;\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { encode } from 'js-base64';\n\nimport { PayButton } from '../../../PayButton';\n\nconst CURRENCIES = ['USD', 'EUR', 'RUB', 'UAH', 'BYN', 'KZT'];\nconst PAYMENT_URL = 'https://www.liqpay.ua/api/3/checkout';\nconst ACTIONS = ['pay', 'hold', 'subscribe', 'paydonate', 'auth'];\nconst VERSION = 3;\n\nconst propTypes = {\n    publicKey: PropTypes.string.isRequired,\n    action: PropTypes.oneOf(ACTIONS),\n    amount: PropTypes.number.isRequired,\n    currency: PropTypes.oneOf(CURRENCIES).isRequired,\n    description: PropTypes.string.isRequired,\n    orderId: PropTypes.string.isRequired,\n    resultUrl: PropTypes.string,\n    serverUrl: PropTypes.string,\n    disabled: PropTypes.bool,\n    createSignature: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n    action: ACTIONS[0],\n};\n\nfunction LiqpayButton({\n    publicKey,\n    action,\n    amount,\n    currency,\n    description,\n    orderId,\n    createSignature,\n    resultUrl,\n    serverUrl,\n    disabled: rawDisabled,\n}) {\n    const [disabled, setDisabled] = useState(true);\n    const [signature, setSignature] = useState('');\n    const isDisabled = disabled || rawDisabled;\n\n    const data = useMemo(() => {\n        const params = {\n            public_key: publicKey,\n            version: VERSION,\n            action,\n            amount,\n            currency,\n            description,\n            order_id: orderId,\n        };\n        if (resultUrl) params['result_url'] = resultUrl;\n        if (serverUrl) params['server_url'] = serverUrl;\n\n        return encode(JSON.stringify(params));\n    }, [publicKey, action, amount, currency, description, orderId]);\n\n    useEffect(() => {\n        async function request() {\n            if (!rawDisabled) {\n                setDisabled(true);\n\n                try {\n                    const json = await createSignature({ data });\n\n                    setSignature(json.signature);\n                } finally {\n                    setDisabled(false);\n                }\n            }\n        }\n\n        void request();\n    }, [data]);\n\n    return (\n        <form method=\"POST\" action={PAYMENT_URL}>\n            <input type=\"hidden\" name=\"data\" value={data} />\n            <input type=\"hidden\" name=\"signature\" value={signature} />\n\n            <PayButton disabled={isDisabled} provider=\"liqpay\" />\n        </form>\n    );\n}\n\nLiqpayButton.propTypes = propTypes;\nLiqpayButton.defaultProps = defaultProps;\n\nexport default LiqpayButton;\n","import { FiChevronsRight, FiTruck } from 'react-icons/fi';\nimport { FaMoneyBillAlt, FaPaypal, FaStripe } from 'react-icons/fa';\n\nimport { CashOnDeliveryPayment } from './CashOnDeliveryPayment';\nimport { StripePayment } from './StripePayment';\nimport { PayPalPayment } from './PayPalPayment';\nimport { WayforpayPayment } from './WayforpayPayment';\nimport { RobokassaPayment } from './RobokassaPayment';\nimport { LiqpayPayment } from './LiqpayPayment';\nimport { OtherPayment } from './OtherPayment';\n\nexport const PAYMENT_PROVIDERS = [\n    { provider: 'cod', icon: FiTruck },\n    { provider: 'paypal', icon: FaPaypal },\n    { provider: 'stripe', icon: FaStripe },\n    { provider: 'wayforpay', icon: FaMoneyBillAlt },\n    // { provider: 'robokassa', icon: FaMoneyBillAlt },\n    { provider: 'liqpay', icon: FiChevronsRight },\n    // { provider: 'other', icon: FaMoneyBillAlt },\n];\n\nexport const PAYMENT_PROVIDER_RENDERERS = {\n    cod: CashOnDeliveryPayment,\n    stripe: StripePayment,\n    paypal: PayPalPayment,\n    wayforpay: WayforpayPayment,\n    robokassa: RobokassaPayment,\n    liqpay: LiqpayPayment,\n    other: OtherPayment,\n};\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\n\nimport { __t } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useModalThemes } from '../../../hooks';\nimport { ThemedButton } from '../../../UI';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function CashOnDeliveryPayment({ disabled, onPay }) {\n    const { contentStyle } = useModalThemes();\n\n    const handleOrder = useCallback(() => onPay('cod'), [onPay]);\n\n    return (\n        <ThemedButton fullWidth theme={contentStyle} disabled={disabled} onClick={handleOrder}>\n            {__t('make_order')}\n        </ThemedButton>\n    );\n}\n\nCashOnDeliveryPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js/pure';\nimport { useToggle } from 'react-use';\n\nimport { __t, PAYMENT_PROVIDERS } from '@mssgme/shared';\nimport { useModalThemes, usePaymentConfigs } from '../../../hooks';\nimport { ThemedButton, ThemedModal } from '../../../UI';\nimport StripeCheckoutForm from '../../StripeCheckoutForm';\n\nconst propTypes = {\n    order: PropTypes.object.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function StripePayment({ order, disabled, onPay }) {\n    const { icon: Icon, label } = PAYMENT_PROVIDERS.stripe;\n    const { payments, isSingularOnline } = usePaymentConfigs();\n    const { contentStyle } = useModalThemes();\n    const [isModal, toggleModal] = useToggle(false);\n    const stripePromise = useMemo(() => loadStripe(payments.stripe.publicKey), [payments.stripe.publicKey]);\n\n    const elements = (\n        <Elements stripe={stripePromise}>\n            <StripeCheckoutForm orderId={order._id} disabled={disabled} onPay={onPay} />\n        </Elements>\n    );\n\n    if (isSingularOnline) {\n        return elements;\n    }\n\n    return (\n        <ThemedButton\n            fullWidth\n            beforeIcon={<Icon size={24} />}\n            theme={contentStyle}\n            disabled={disabled}\n            onClick={toggleModal}\n            contentAlignLeft\n        >\n            {__t('payWith', { provider: label })}\n\n            {isModal && (\n                <ThemedModal compact overlay padding title={label} onClose={toggleModal}>\n                    {elements}\n                </ThemedModal>\n            )}\n        </ThemedButton>\n    );\n}\n\nStripePayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { PayPalButtons, PayPalScriptProvider } from '@paypal/react-paypal-js';\n\nimport { __t, PAYMENT_PROVIDERS } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { ThemedButton } from '../../../UI';\nimport { useCRMData, useModalThemes } from '../../../hooks';\n\n// paypal buttons docs: https://paypal.github.io/react-paypal-js\n\nimport styles from './PayPalPayment.scss';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function PayPalPayment({\n    order: {\n        total,\n        items,\n        contactInfo: { firstName, lastName },\n    },\n    disabled,\n    onPay,\n}) {\n    const { icon: Icon, label, supported_currencies } = PAYMENT_PROVIDERS.paypal;\n    const { payments } = useCRMData();\n    const { contentStyle } = useModalThemes();\n    const isSupportedCurrency = supported_currencies.includes(total.currency);\n\n    const createOrder = useCallback(\n        (data, actions) =>\n            actions.order.create({\n                purchase_units: [\n                    {\n                        amount: {\n                            currency_code: total.currency,\n                            value: total.amount,\n                            breakdown: {\n                                item_total: {\n                                    currency_code: total.currency,\n                                    value: total.amount,\n                                },\n                            },\n                        },\n                        payer: {\n                            name: {\n                                given_name: firstName,\n                                surname: lastName,\n                            },\n                        },\n                        items: items.map(({ name, price, quantity }) => ({\n                            name,\n                            unit_amount: {\n                                currency_code: price.currency,\n                                value: price.amount,\n                            },\n                            quantity,\n                        })),\n                    },\n                ],\n            }),\n        [total]\n    );\n\n    const onApprove = useCallback(\n        async (data, actions) => {\n            const details = await actions.order.capture();\n            await onPay('paypal', details);\n        },\n        [onPay]\n    );\n\n    return (\n        <div className={styles.root}>\n            <ThemedButton\n                fullWidth\n                beforeIcon={<Icon size={24} />}\n                theme={contentStyle}\n                disabled={disabled || !isSupportedCurrency}\n                className={styles.overlapButton}\n                contentAlignLeft\n            >\n                {__t('payWith', { provider: label })}\n            </ThemedButton>\n\n            {isSupportedCurrency && (\n                <PayPalScriptProvider options={{ 'client-id': payments.paypal.clientId, currency: total.currency }}>\n                    <PayPalButtons\n                        style={{ layout: 'horizontal', tagline: false }}\n                        disabled={disabled}\n                        createOrder={createOrder}\n                        onApprove={onApprove}\n                    />\n                </PayPalScriptProvider>\n            )}\n        </div>\n    );\n}\n\nPayPalPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\n\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useCRMData, useFrontAPI } from '../../../hooks';\nimport RobokassaButton from './Buttons/RobokassaButton';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function RobokassaPayment({ order, disabled }) {\n    const api = useFrontAPI();\n    const {\n        payments: {\n            robokassa: { merchantLogin, test: isTest },\n        },\n    } = useCRMData();\n    const createSignature = useCallback(\n        (payload) => api.orders.signatures.createRobokassaSignature({ orderId: order._id, payload }),\n        [order._id]\n    );\n\n    return (\n        <RobokassaButton\n            merchantLogin={merchantLogin}\n            outSum={order.total.amount}\n            outSumCurrency={order.total.currency}\n            invId={order._id}\n            createSignature={createSignature}\n            disabled={disabled}\n            isTest={isTest}\n        />\n    );\n}\n\nRobokassaPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { __t } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useCRMData, useFrontAPI, BACKEND_ENDPOINTS, useWebsiteData } from '../../../hooks';\nimport LiqpayButton from './Buttons/LiqpayButton';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function LiqpayPayment({ order, disabled }) {\n    const api = useFrontAPI();\n    const orderReference = `${order._id}_uniq${Math.floor(Math.random() * 100000)}`;\n    const { payments } = useCRMData();\n    const { finalUrl } = useWebsiteData();\n    const description = `${__t('payment_for_order')}${order._id}:\\n\\n${order.items\n        .map(\n            (product, index) =>\n                `${index + 1}. ${product.name} ${product.quantity}x${product.price.amount}${product.price.currency}\\n`\n        )\n        .join('')}\\n\\n${finalUrl}`;\n    const { successUrl, serverUrl } = useMemo(\n        () => ({\n            successUrl: document.location.href,\n            serverUrl: BACKEND_ENDPOINTS.getLiqPayCallback(order),\n        }),\n        [order]\n    );\n\n    const createSignature = useCallback(\n        (payload) => api.orders.signatures.createLiqpaySignature({ orderId: order._id, payload }),\n        [order._id]\n    );\n\n    return (\n        <LiqpayButton\n            publicKey={payments.liqpay.publicKey}\n            amount={order.total.amount}\n            currency={order.total.currency}\n            orderId={orderReference}\n            description={description}\n            createSignature={createSignature}\n            resultUrl={successUrl}\n            serverUrl={serverUrl}\n            disabled={disabled}\n        />\n    );\n}\n\nLiqpayPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { useToggle } from 'react-use';\n\nimport { __t } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useCRMData, useModalThemes } from '../../../hooks';\nimport { ThemedButton, ThemedModal } from '../../../UI';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function OtherPayment({ order, disabled, onPay }) {\n    const { payments } = useCRMData();\n    const { contentStyle } = useModalThemes();\n    const [isModal, toggleModal] = useToggle();\n\n    const handleOrder = useCallback(() => onPay('other'), [onPay]);\n    const handleModal = useCallback(() => {\n        if (payments.other.instructions) {\n            toggleModal(true);\n        } else {\n            handleOrder();\n        }\n    }, [payments.other.instructions, toggleModal]);\n\n    return (\n        <div>\n            <ThemedButton fullWidth theme={contentStyle} disabled={disabled} onClick={handleModal}>\n                {__t('make_order')}\n            </ThemedButton>\n\n            {isModal && (\n                <ThemedModal compact overlay padding title={__t('payments_instructions')} onClose={toggleModal}>\n                    {(handleClose) => (\n                        <div>\n                            <div style={{ whiteSpace: 'pre-wrap' }}>{payments.other.instructions}</div>\n\n                            <ThemedButton fullWidth theme={contentStyle} disabled={disabled} onClick={handleClose}>\n                                {__t('make_order')}\n                            </ThemedButton>\n                        </div>\n                    )}\n                </ThemedModal>\n            )}\n        </div>\n    );\n}\n\nOtherPayment.propTypes = propTypes;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_31v2e_-j\",\"pane\":\"_3kogH2CO\",\"products\":\"_2OMwWxnQ\",\"messengers\":\"_2H0GXi2n\",\"sectionHeading\":\"b6TQL0Qx\",\"buttons\":\"_10pWsvHs\",\"paymentButtons\":\"_36syB53y\",\"cancelPrompt\":\"_2xrOjq_F\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cls } from '@mssgme/helpers';\nimport { usePageTheme } from '../../hooks';\n\nimport styles from './UserOrderPage.scss';\n\nexport const Section = ({ title, ...rest }) => {\n    const { theme } = usePageTheme();\n\n    return (\n        <>\n            {title && <h3 className={styles.sectionHeading}>{title}</h3>}\n            <div className={styles.pane} style={theme.blocks.features} {...cls(styles.pane, rest)} />\n        </>\n    );\n};\n\nSection.propTypes = {\n    title: PropTypes.any,\n};\n","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useAsyncFn, useToggle } from 'react-use';\nimport { AnimatePresence, motion } from 'framer-motion';\n\nimport { __t } from '@mssgme/shared';\nimport { useBooleanHandler, useNavigationUtils } from '@mssgme/hooks';\nimport {\n    handlesPaymentsStatus,\n    useContacts,\n    useFrontAPI,\n    useModalThemes,\n    usePaymentConfigs,\n    useRenderer,\n} from '../../hooks';\nimport { ThemedButton, ThemedModal } from '../../UI';\nimport { useOrder } from '../useOrder';\nimport { PAYMENT_PROVIDER_RENDERERS } from '../OrderPage';\nimport { Section } from './Section';\n\nimport styles from './UserOrderPage.scss';\n\nUserOrderPage.propTypes = {\n    orderId: PropTypes.string.isRequired,\n};\n\nexport function UserOrderPage({ orderId }) {\n    const api = useFrontAPI();\n    const payments = usePaymentConfigs();\n    const renderBlock = useRenderer();\n    const contacts = useContacts();\n    const [isPayNowModal, togglePayNowModal] = useToggle(false);\n    const [isShowingCancelPrompt, showCancelPrompt, hideCancelPrompt] = useBooleanHandler();\n    const { generateUrl } = useNavigationUtils();\n    const { contentStyle } = useModalThemes();\n    const { reload, order, loading: orderLoading, error, isNotFound } = useOrder(orderId);\n\n    const { immediate, online } = useMemo(() => {\n        const mapper = ([provider]) => [provider, PAYMENT_PROVIDER_RENDERERS[provider]];\n\n        return {\n            immediate: payments.immediate.map(mapper),\n            online: payments.online.map(mapper),\n        };\n    }, [payments]);\n    const [{ loading: finalizeLoading }, handlePay] = useAsyncFn(\n        async (paymentMethod) => {\n            await api.orders.finalize({ orderId, payload: { paymentMethod } });\n            togglePayNowModal();\n            reload();\n        },\n        [orderId]\n    );\n    const [{ loading: cancelLoading }, handleCancelOrder] = useAsyncFn(async () => {\n        await api.orders.cancel({ orderId });\n        hideCancelPrompt();\n        reload();\n    }, [orderId]);\n\n    if (!order || !order.finalized) {\n        return null;\n    }\n\n    const loading = finalizeLoading || orderLoading || cancelLoading;\n    const isJustOneOnlinePaymentMethod = !immediate.length && online.length === 1;\n    const onlineElements = online.map(\n        ([key, Renderer]) => <Renderer key={key} order={order} disabled={loading} onPay={handlePay} />\n    );\n\n    return (\n        <ThemedModal\n            overlay\n            compact\n            padding\n            className={styles.root}\n            title={`${__t('order_term')} #${order.feedback.order}`}\n            onClose={generateUrl('..')}\n        >\n            {error ? (\n                <div>{isNotFound ? __t('order_not_found') : error.message}</div>\n            ) : (\n                <div>\n                    <Section>\n                        <div>\n                            <div>{__t('order_status')}</div>\n                            <div>{__t(`order_status_${order.feedback.status}`)}</div>\n                        </div>\n                        {handlesPaymentsStatus(order.paymentMethod) && (\n                            <div>\n                                <div>{__t('payment_status')}</div>\n                                <div>{__t(`payment_status_${order.status}`)}</div>\n                            </div>\n                        )}\n                    </Section>\n\n                    <Section title={__t('your_contacts')}>\n                        <div>\n                            <div>{__t('name')}</div>\n                            <div>\n                                {order.contactInfo.lastName} {order.contactInfo.firstName}\n                            </div>\n                        </div>\n                        <div>\n                            <div>{__t('phone')}</div>\n                            <div>{order.contactInfo.phoneNumber}</div>\n                        </div>\n                        {order.shippingAddress && (\n                            <div>\n                                <div>{__t('shipping')}</div>\n                                <div>\n                                    {[\n                                        order.shippingAddress.city,\n                                        order.shippingAddress.state,\n                                        order.shippingAddress.address,\n                                        order.shippingAddress.postalCode,\n                                    ]\n                                        .filter(Boolean)\n                                        .join(', ')}\n                                </div>\n                            </div>\n                        )}\n                        {order.contactInfo.comment && (\n                            <div>\n                                <div>{__t('comment')}</div>\n                                <div>{order.contactInfo.comment}</div>\n                            </div>\n                        )}\n                    </Section>\n                    <Section className={styles.products} title={__t('order_content')}>\n                        {order.items.map((product, index) => (\n                            <div key={index}>\n                                <div>{product.name}</div>\n                                <div>\n                                    {product.quantity}x{product.price.amount} {product.price.currency}\n                                </div>\n                            </div>\n                        ))}\n                        <div>\n                            <div>{__t('order_summary')}</div>\n                            <div>\n                                {order.total.amount} {order.total.currency}\n                            </div>\n                        </div>\n                    </Section>\n\n                    {contacts && (\n                        <Section className={styles.messengers} title={__t('store_contacts')}>\n                            {contacts.map(renderBlock)}\n                        </Section>\n                    )}\n\n                    <AnimatePresence>\n                        {order.status === 'failed' && order.feedback.status !== 'rejected' && (\n                            <motion.div\n                                key=\"order-actions\"\n                                className={styles.buttons}\n                                exit={{ opacity: 0, height: 0, marginTop: '0px' }}\n                            >\n                                {isJustOneOnlinePaymentMethod ? (\n                                    onlineElements\n                                ) : (\n                                    <ThemedButton theme={contentStyle} onClick={togglePayNowModal}>\n                                        {__t('pay_order')}\n                                    </ThemedButton>\n                                )}\n\n                                <ThemedButton theme={contentStyle} contour onClick={showCancelPrompt}>\n                                    {__t('cancel_order')}\n                                </ThemedButton>\n                            </motion.div>\n                        )}\n\n                        {!isJustOneOnlinePaymentMethod && isPayNowModal && (\n                            <ThemedModal\n                                key=\"online-payment-options\"\n                                overlay\n                                compact\n                                padding\n                                className={styles.paymentButtons}\n                                title={__t('choose_payment_method')}\n                                onClose={togglePayNowModal}\n                            >\n                                {onlineElements}\n                            </ThemedModal>\n                        )}\n\n                        {isShowingCancelPrompt && (\n                            <ThemedModal\n                                key=\"order-cancellation\"\n                                overlay\n                                compact\n                                padding\n                                title={__t('order_cancellation')}\n                                onClose={hideCancelPrompt}\n                            >\n                                <div className={styles.cancelPrompt}>\n                                    {__t('order_cancellation_prompt')}\n                                </div>\n\n                                <ThemedButton\n                                    theme={contentStyle}\n                                    onClick={handleCancelOrder}\n                                    disabled={loading}\n                                >\n                                    {__t('order_cancellation_prompt_button')}\n                                </ThemedButton>\n                            </ThemedModal>\n                        )}\n                    </AnimatePresence>\n                </div>\n            )}\n        </ThemedModal>\n    );\n}\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction ShoppingBagIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4H6zM3 6h18M16 10a4 4 0 11-8 0\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(ShoppingBagIcon);\nexport default ForwardRef;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction MapPinIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 1118 0z\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n            <path\n                d=\"M12 13a3 3 0 100-6 3 3 0 000 6z\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(MapPinIcon);\nexport default ForwardRef;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction CreditCardIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M21 4H3a2 2 0 00-2 2v12a2 2 0 002 2h18a2 2 0 002-2V6a2 2 0 00-2-2zM1 10h22\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(CreditCardIcon);\nexport default ForwardRef;\n","import { useMemo } from 'react';\n\nimport { usePageTheme } from './useWebsiteTheme';\n\nexport const usePageColors = (styles) => {\n    const { theme } = usePageTheme();\n\n    return useMemo(() => {\n        const backgroundColor = styles && styles.backgroundColor;\n        const color = styles && styles.color;\n\n        return backgroundColor && color\n            ? styles\n            : {\n                backgroundColor: backgroundColor || theme.colors.background,\n                color: color || theme.colors.text,\n            };\n    }, [styles, theme.colors]);\n};\n","import { createContext } from 'react';\n\nconst StepContext = createContext(1);\n\nexport default StepContext;\n","import { useCallback, useContext } from 'react';\nimport StepContext from './StepContext';\n\nconst getPrevStep = (current, first) => Math.max(first, current - 1);\nconst getNextStep = (current, last) => Math.min(last, current + 1);\n\nfunction useStep() {\n    const { currentStep, setCurrentStep, steps } = useContext(StepContext);\n    const firstStep = 1;\n    const lastStep = steps.length;\n    const isFirstStep = currentStep === firstStep;\n    const isLastStep = currentStep === lastStep;\n    const nextStep = getNextStep(currentStep, lastStep);\n    const previousStep = getPrevStep(currentStep, firstStep);\n    const gotoStep = useCallback(\n        (step) => {\n            if (step === currentStep) {\n                return;\n            }\n\n            if (step < firstStep || step > lastStep) {\n                return;\n            }\n\n            if (step > currentStep && !steps[step - 2]?.isDone) {\n                return;\n            }\n\n            setCurrentStep(step);\n        },\n        [currentStep, firstStep, lastStep, steps]\n    );\n    const gotoNextStep = useCallback(() => setCurrentStep((current) => getNextStep(current, lastStep)), [lastStep]);\n    const gotoPreviousStep = useCallback(() => setCurrentStep((current) => getPrevStep(current, firstStep)), [\n        firstStep,\n    ]);\n    const getStepName = (step) => steps[step - 1].name;\n\n    return {\n        currentStep,\n        getStepName,\n        gotoStep,\n        gotoNextStep,\n        gotoPreviousStep,\n        firstStep,\n        lastStep,\n        isFirstStep,\n        isLastStep,\n        nextStep,\n        previousStep,\n    };\n}\n\nexport default useStep;\n","// extracted by mini-css-extract-plugin\nexport default {\"nav\":\"x1-zVrJv\",\"step\":\"_3PZiK4o6\",\"current\":\"Yj9eeavT\",\"done\":\"_367MqCEn\",\"icon\":\"HYDBXOFi\",\"mark\":\"_2db9WuMK\",\"divider\":\"_3tkHM2Ph\"};","import classNames from 'classnames';\nimport React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\n\nimport useStep from './useStep';\n\nimport styles from './StepSwitch.scss';\n\nexport const StepIcon = ({ as: Tag = 'li', step: { number, isCurrent, isDone, icon: Icon }, style }) => {\n    const { gotoStep } = useStep();\n\n    const handleClick = useCallback(() => gotoStep(number), [gotoStep, number]);\n\n    return (\n        <Tag\n            className={classNames(styles.step, {\n                [styles.done]: isDone,\n                [styles.current]: isCurrent,\n            })}\n            style={isCurrent ? style.stepCurrent : style.step}\n            onClick={handleClick}\n        >\n            <div className={styles.icon}>{Icon ? <Icon size={20} /> : number}</div>\n\n            <div className={styles.mark}>{isDone && '✔'}</div>\n        </Tag>\n    );\n};\n\nStepIcon.propTypes = {\n    as: PropTypes.elementType,\n    step: PropTypes.shape({\n        number: PropTypes.number.isRequired,\n        name: PropTypes.string.isRequired,\n        icon: PropTypes.elementType,\n        isCurrent: PropTypes.bool,\n        isDone: PropTypes.bool,\n    }).isRequired,\n    style: PropTypes.shape({\n        step: PropTypes.object,\n        stepCurrent: PropTypes.object,\n    }).isRequired,\n};\n","import React, { useState, Fragment, useMemo, useEffect } from 'react';\n\nimport { usePageColors } from '../../hooks';\nimport { StepIcon } from './StepIcon';\nimport StepContext from './StepContext';\n\nimport styles from './StepSwitch.scss';\n\nfunction StepSwitch({ children }) {\n    const [currentStep, setCurrentStep] = useState(1);\n    const [steps, setSteps] = useState(() =>\n        React.Children.toArray(children).map((child, index) => {\n            const number = index + 1;\n            return {\n                number,\n                name: child.props.name,\n                icon: child.props.icon,\n                child,\n                isDone: number < currentStep,\n                isCurrent: currentStep === number,\n            };\n        })\n    );\n    const colors = usePageColors();\n    const style = useMemo(\n        () => ({\n            divider: { backgroundColor: colors.color },\n            step: { backgroundColor: colors.backgroundColor, borderColor: colors.backgroundColor, color: colors.color },\n            stepCurrent: {\n                backgroundColor: colors.color,\n                borderColor: colors.color,\n                color: colors.backgroundColor,\n            },\n        }),\n        [colors]\n    );\n\n    useEffect(() => {\n        setSteps((old) =>\n            old.map((step) => ({\n                ...step,\n                isCurrent: step.number === currentStep,\n                isDone: step.isDone || currentStep > step.number,\n            }))\n        );\n    }, [currentStep]);\n\n    const content = steps.find((step) => step.isCurrent).child;\n\n    return (\n        <StepContext.Provider value={{ currentStep, setCurrentStep, steps }}>\n            <div>\n                <ul className={styles.nav}>\n                    {steps.map((step) => (\n                        <Fragment key={step.number}>\n                            {step.number !== 1 && <li className={styles.divider} style={style.divider} />}\n\n                            <StepIcon style={style} step={step} />\n                        </Fragment>\n                    ))}\n                </ul>\n                <div>{content}</div>\n            </div>\n        </StepContext.Provider>\n    );\n}\n\nexport default StepSwitch;\n","// extracted by mini-css-extract-plugin\nexport default {\"step\":\"v85lPsnD\",\"title\":\"_1YQ2PhE1\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './Step.scss';\n\nconst propTypes = {\n    name: PropTypes.string,\n};\n\nfunction Step({ children, name }) {\n    return (\n        <div className={styles.step}>\n            {name && <h4 className={styles.title}>{name}</h4>}\n            {children}\n        </div>\n    );\n}\n\nStep.propTypes = propTypes;\n\nexport default Step;\n","import { formatPrice } from '@mssgme/shared';\n\nexport function printPrice(price) {\n    return formatPrice(price.amount, price.currency, navigator.language);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_1cIEQnSo\",\"label\":\"_3O2qFkye\",\"value\":\"_1hQSAKZ3\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Row.scss';\n\nconst propTypes = {\n    label: PropTypes.string.isRequired,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.element]).isRequired,\n};\n\nexport function Row({ label, value, ...rest }) {\n    return (\n        <div className={styles.root} {...rest}>\n            <div className={styles.label}>{label}</div>\n            <div className={styles.value}>{value}</div>\n        </div>\n    );\n}\n\nRow.propTypes = propTypes;\n","import { useEffect, useMemo, useState } from 'react';\nimport { useAsync } from 'react-use';\n\nimport { ServicesGridBlockKind } from '@mssgme/shared';\n\nconst PRODUCT_KIND = 'product';\nconst SERVICE_KIND = 'service';\nconst getIdsByKind = (items, kind) => items.filter((item) => item.kind === kind).map(({ productId }) => productId);\n\nexport const useOrderProducts = (website, order, retrieveFn) => {\n    const [resolved, setResolved] = useState(null);\n    const { pages = [] } = website;\n    const { value } = useAsync(async () => {\n        const productIds = getIdsByKind(order.items, PRODUCT_KIND);\n        const serviceIds = getIdsByKind(order.items, SERVICE_KIND);\n        const products = [];\n        const services = [];\n\n        if (productIds.length && retrieveFn) {\n            await Promise.all(\n                productIds.map(async (productId) => {\n                    try {\n                        const product = await retrieveFn({ productId });\n\n                        if (product) {\n                            products.push(product);\n                        }\n                    } catch (e) {\n                        // eslint-disable-next-line no-console\n                        console.warn(`Product with ID \"${productId}\" not found`);\n                    }\n                })\n            );\n        }\n\n        if (serviceIds.length) {\n            let total = serviceIds.length;\n            const missing = new Set(serviceIds);\n\n            for (const page of pages) {\n                for (const block of page.blocks) {\n                    if (block.kind !== ServicesGridBlockKind) {\n                        continue;\n                    }\n\n                    for (const item of block.items) {\n                        if (missing.has(item._id)) {\n                            services.push(item);\n                            total--;\n\n                            if (total <= 0) {\n                                break;\n                            }\n                        }\n                    }\n\n                    if (total <= 0) {\n                        break;\n                    }\n                }\n\n                if (total <= 0) {\n                    break;\n                }\n            }\n        }\n\n        return {\n            products,\n            services,\n        };\n    }, [order.items, retrieveFn]);\n\n    useEffect(() => {\n        if (value) {\n            setResolved(value);\n        }\n    }, [value]);\n\n    return useMemo(\n        () =>\n            order.items.map((item) => {\n                const product =\n                    resolved &&\n                    (item.kind === PRODUCT_KIND ? resolved.products : resolved.services).find(\n                        ({ _id }) => _id === item.productId\n                    );\n\n                return {\n                    ...item,\n                    product: product || { name: item.name, price: item.price, photoUrl: '' },\n                };\n            }),\n        [order.items, resolved]\n    );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"b04KnDG6\"};","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\n\nimport { cls } from '@mssgme/helpers';\nimport { usePageColors } from '../../hooks';\n\nimport styles from './Divider.scss';\n\nexport const Divider = ({ style: baseStyle, ...props }) => {\n    const colors = usePageColors();\n    const style = useMemo(() => ({ borderTop: `1px solid ${colors.color}`, ...baseStyle }));\n\n    return <div style={style} {...cls(styles.root, props)} />;\n};\n\nDivider.propTypes = {\n    style: PropTypes.object,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"_1qCNo7At\",\"disabled\":\"_1lrfYPcp\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cls } from '@mssgme/helpers';\nimport { getProps } from './PureButton';\n\nimport styles from './IconButton.scss';\n\nIconButton.propTypes = {\n    as: PropTypes.elementType,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n};\n\nIconButton.defaultProps = {\n    as: 'button',\n};\n\nexport default function IconButton({ as: Component, children, disabled, ...rest }) {\n    return (\n        <Component {...cls([styles.button, disabled && styles.disabled], getProps(Component, rest))}>\n            {children}\n        </Component>\n    );\n}\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction CloseIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M18 6L6 18M6 6l12 12\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(CloseIcon);\nexport default ForwardRef;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction MinusIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path d=\"M5 12h14\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(MinusIcon);\nexport default ForwardRef;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction PlusIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M12 5v14M5 12h14\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(PlusIcon);\nexport default ForwardRef;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2RnXDDix\",\"divider\":\"_3rFjyJjx\",\"knob\":\"_2uC3LJzf\",\"thumbnail\":\"_1b9pzxi4\",\"meta\":\"O-47leFn\",\"title\":\"_3gvv9TuI\",\"details\":\"_1k07gsKv\",\"row\":\"_1Uo9ybFj\",\"quantity\":\"_1wslwbIx\",\"quantityText\":\"_2jmlZhSO\",\"price\":\"_15UVvpdZ\",\"subTotal\":\"_1Xk7hugj\",\"list\":\"hnHwJyzE\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\nimport { IoMdImage } from 'react-icons/io';\n\nimport { getTransparentColor } from '@mssgme/helpers';\nimport { mediaUtils } from '@mssgme/shared';\nimport { IconButton, LandingsPropTypes, LazyImage } from '@mssgme/ui';\nimport { CloseIcon, MinusIcon, PlusIcon } from '@mssgme/icons';\nimport { usePageColors } from '../../hooks';\nimport { printPrice } from '../printPrice';\n\nimport styles from './OrderItem.scss';\n\nconst propTypes = {\n    item: LandingsPropTypes.orderItem.isRequired,\n    tag: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType]),\n    onAdjust: PropTypes.func,\n};\n\nexport function OrderItem({ item, onAdjust, tag: Tag = 'li' }) {\n    const colors = usePageColors();\n    const style = useMemo(() => ({ borderColor: getTransparentColor(colors.color, 0.2) }));\n    const isEditable = !!onAdjust;\n    const isMultiEditable = item.quantity > 1 && isEditable;\n\n    const handleAdjust = useCallback(\n        (delta) => onAdjust([{ productId: item.productId, quantity: Math.max(0, item.quantity + delta) }]),\n        [item, onAdjust]\n    );\n    const handleAdd = useCallback(() => handleAdjust(+1), [handleAdjust]);\n    const handleSubtract = useCallback(() => handleAdjust(-1), [handleAdjust]);\n    const handleRemove = useCallback(() => handleAdjust(-Infinity), [handleAdjust]);\n\n    return (\n        <Tag className={styles.root}>\n            <div className={styles.divider} style={{ backgroundColor: colors.color }} />\n            <div className={styles.thumbnail}>\n                {item.product.photoUrl ? (\n                    <LazyImage src={mediaUtils.generateProductThumbnailUrl(item.product.photoUrl)} alt={item.name} />\n                ) : (\n                    <div className={styles.emptyPlaceholder}>\n                        <IoMdImage size={70} color=\"#fff\" />\n                    </div>\n                )}\n            </div>\n            <div className={styles.meta}>\n                <div className={styles.title} style={style}>\n                    <div>{item.name}</div>\n\n                    {isEditable && (\n                        <IconButton className={styles.knob} onClick={handleRemove}>\n                            <CloseIcon />\n                        </IconButton>\n                    )}\n                </div>\n                <div className={styles.details}>\n                    <div className={styles.row}>\n                        <div className={styles.quantity}>\n                            {isEditable && (\n                                <IconButton\n                                    className={styles.knob}\n                                    disabled={item.quantity <= 1}\n                                    onClick={handleSubtract}\n                                >\n                                    <MinusIcon size={16} />\n                                </IconButton>\n                            )}\n                            <div className={styles.quantityText} style={{ margin: isEditable ? '0 8px' : '0' }}>\n                                {!isEditable && 'x'}\n                                {item.quantity}\n                            </div>\n                            {isEditable && (\n                                <IconButton className={styles.knob} onClick={handleAdd}>\n                                    <PlusIcon size={16} />\n                                </IconButton>\n                            )}\n                        </div>\n                        <div className={styles.price} style={{ fontWeight: isMultiEditable ? 400 : 600 }}>\n                            {isMultiEditable && `${item.quantity} x `}\n                            {printPrice(isEditable ? item.price : item.subtotal)}\n                        </div>\n                    </div>\n\n                    {isMultiEditable && <div className={styles.subTotal}>= {printPrice(item.subtotal)}</div>}\n                </div>\n            </div>\n        </Tag>\n    );\n}\n\nOrderItem.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\n\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { productsApi } from '@mssgme/lib';\nimport { useOrderProducts, useWebsiteData } from '../../hooks';\nimport { Divider } from '../Divider';\nimport { OrderItem } from './OrderItem';\n\nimport styles from './OrderItem.scss';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    onAdjust: PropTypes.func,\n};\n\nexport function OrderItemsList({ order, onAdjust, ...rest }) {\n    const website = useWebsiteData();\n    const products = useOrderProducts(\n        website,\n        order,\n        useCallback(({ productId }) => productsApi.load(website.workspace, productId), [])\n    );\n\n    return (\n        <div {...rest}>\n            <Divider style={{ marginBottom: 0 }} />\n            <ul className={styles.list}>\n                {products.map((item) => (\n                    <OrderItem key={item._id} item={item} onAdjust={onAdjust} />\n                ))}\n            </ul>\n            <Divider style={{ marginTop: 0 }} />\n        </div>\n    );\n}\n\nOrderItemsList.propTypes = propTypes;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_1ArzqQOx\",\"button\":\"_3jq98mXF\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { useAsyncFn } from 'react-use';\n\nimport { __t } from '@mssgme/shared';\nimport { useModalThemes } from '../../../hooks';\nimport { ThemedButton, useStep } from '../../../UI';\n\nimport styles from './StepsFooter.scss';\n\nStepsFooter.propTypes = {\n    next: PropTypes.oneOfType([PropTypes.bool, PropTypes.func]),\n    prev: PropTypes.oneOfType([PropTypes.bool, PropTypes.func]),\n    disabled: PropTypes.bool,\n};\n\nexport function StepsFooter({ prev, next, disabled }) {\n    const { contentStyle } = useModalThemes();\n    const { gotoPreviousStep, gotoNextStep } = useStep();\n\n    const [{ loading: isFetchingPrev }, handlePrev] = useAsyncFn(async () => {\n        if (typeof prev === 'function') {\n            return prev();\n        }\n\n        gotoPreviousStep();\n    }, [prev, gotoPreviousStep]);\n\n    const [{ loading: isFetchingNext }, handleNext] = useAsyncFn(async () => {\n        if (typeof next === 'function') {\n            return next();\n        }\n\n        gotoNextStep();\n    }, [next, gotoNextStep]);\n\n    return (\n        <footer className={styles.root}>\n            {prev && (\n                <ThemedButton\n                    className={styles.button}\n                    theme={contentStyle}\n                    fullWidth={!next}\n                    contour\n                    type=\"submit\"\n                    disabled={disabled}\n                    isFetching={isFetchingPrev}\n                    onClick={handlePrev}\n                >\n                    {__t('previous')}\n                </ThemedButton>\n            )}\n\n            {next && (\n                <ThemedButton\n                    className={styles.button}\n                    theme={contentStyle}\n                    fullWidth={!prev}\n                    type=\"submit\"\n                    disabled={disabled}\n                    isFetching={isFetchingNext}\n                    onClick={handleNext}\n                >\n                    {__t('next')}\n                </ThemedButton>\n            )}\n        </footer>\n    );\n}\n","import React, { useMemo } from 'react';\nimport { useAsyncFn } from 'react-use';\nimport { Redirect } from 'react-router-dom';\n\nimport { __t } from '@mssgme/shared';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { useFrontAPI, useSavedOrders } from '../../../hooks';\nimport { printPrice } from '../../printPrice';\nimport { Row } from '../../Row';\nimport { OrderItemsList } from '../../OrderItem';\nimport { StepsFooter } from './StepsFooter';\n\nfunction AdjustingStep() {\n    const { generateUrl } = useNavigationUtils({ useMatchUrl: false });\n    const { currentOrder, removeOrderId } = useSavedOrders();\n    const backPath = useMemo(() => generateUrl('../..'), []);\n    const api = useFrontAPI();\n    const orderId = currentOrder?._id || null;\n\n    const [{ loading }, handleModifyItems] = useAsyncFn(\n        /** @param {{ productId: string, quantity: number }[]} items Order items */\n        async (items) => {\n            const order = await api.orders.modify({\n                orderId,\n                payload: {\n                    items,\n                },\n            });\n\n            if (!order.items.length) {\n                // todo: in the future, change the logic:\n                // after last order item count brought to 0 - disable 'Next' button, but do not remove the order yet;\n                // if the modal is closed, but order items count still 0 - delete the order entirely\n                removeOrderId(order._id);\n            }\n        },\n        [orderId]\n    );\n\n    if (!currentOrder) {\n        return orderId ? null : <Redirect to={backPath} />;\n    }\n\n    return (\n        <div>\n            <OrderItemsList order={currentOrder} onAdjust={currentOrder.finalized ? undefined : handleModifyItems} />\n            <Row label={__t('total_to_pay')} value={printPrice(currentOrder.total)} />\n\n            <StepsFooter next disabled={loading} />\n        </div>\n    );\n}\n\nexport default AdjustingStep;\n","import { ValidationError } from '@mssgme/api-client';\n\nfunction captureSubmitError(fn) {\n    return async (values, helpers) => {\n        try {\n            await fn(values, helpers);\n        } catch (err) {\n            if (ValidationError.is(err)) {\n                for (let fieldName in err.errors) {\n                    helpers.setFieldError(fieldName, err.errors[fieldName]);\n                }\n            } else {\n                throw err;\n            }\n        }\n    };\n}\n\nexport default captureSubmitError;\n","import { useCallback } from 'react';\n\nimport { useFrontAPI } from '../hooks';\nimport { useStep } from '../UI';\nimport captureSubmitError from './captureSubmitError';\n\nexport function useOrderSubmit(orderId) {\n    const { gotoNextStep } = useStep();\n    const api = useFrontAPI();\n\n    return useCallback(\n        captureSubmitError(async (payload) => {\n            await api.orders.update({ orderId, payload });\n\n            gotoNextStep();\n        }),\n        [orderId, gotoNextStep]\n    );\n}\n","import React, { useMemo } from 'react';\nimport { Form, Formik } from 'formik';\n\nimport { __t } from '@mssgme/shared';\nimport { useCRMData, useSavedOrders } from '../../../hooks';\nimport { TextField } from '../../../UI';\nimport { useOrderSubmit } from '../../useOrderSubmit';\nimport { StepsFooter } from './StepsFooter';\n\nconst INITIAL_SHIPPING_ADDRESS = {\n    city: '',\n    state: '',\n    address: '',\n    postalCode: '',\n};\n\nfunction ShippingAddressStep() {\n    const { form } = useCRMData();\n    const { currentOrder } = useSavedOrders();\n    const initialValues = useMemo(\n        () => ({ shippingAddress: currentOrder?.shippingAddress || INITIAL_SHIPPING_ADDRESS }),\n        [currentOrder?.shippingAddress]\n    );\n    const doSubmit = useOrderSubmit(currentOrder?._id);\n\n    if (!currentOrder) {\n        return null;\n    }\n\n    const requestCity = !form.optional?.city;\n    const requestState = !form.optional?.state;\n    const requestPostalCode = !form.optional?.postalCode;\n\n    return (\n        <Formik initialValues={initialValues} onSubmit={doSubmit}>\n            {({ isSubmitting, handleSubmit }) => (\n                <Form>\n                    {requestCity && (\n                        <TextField\n                            required\n                            name=\"shippingAddress.city\"\n                            placeholder={__t('shippingAddress.placeholder.city')}\n                        />\n                    )}\n                    {requestState && (\n                        <TextField\n                            required\n                            name=\"shippingAddress.state\"\n                            placeholder={__t('shippingAddress.placeholder.state')}\n                        />\n                    )}\n                    <TextField\n                        required\n                        name=\"shippingAddress.address\"\n                        placeholder={__t('shippingAddress.placeholder.address')}\n                    />\n                    {requestPostalCode && (\n                        <TextField\n                            required\n                            name=\"shippingAddress.postalCode\"\n                            placeholder={__t('shippingAddress.placeholder.postalCode')}\n                        />\n                    )}\n\n                    <StepsFooter prev next={handleSubmit} disabled={isSubmitting} />\n                </Form>\n            )}\n        </Formik>\n    );\n}\n\nexport default ShippingAddressStep;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction CheckCircleIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M22 11.08V12a10 10 0 11-5.93-9.14\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n            <path\n                d=\"M22 4L12 14.01l-3-3\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(CheckCircleIcon);\nexport default ForwardRef;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\n\nfunction CircleIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\n\nconst ForwardRef = React.forwardRef(CircleIcon);\nexport default ForwardRef;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2Zz_7uBp\",\"content\":\"_35vU92sW\",\"check\":\"DPAI-gUE\",\"active\":\"_1cImWuaZ\",\"disabled\":\"_18RV2B3w\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { cls } from '@mssgme/helpers';\nimport { CheckCircleIcon, CircleIcon } from '@mssgme/icons';\n\nimport styles from './CheckableItem.scss';\n\nexport const CheckableItem = ({ active, disabled, size = 24, children, color, contentClass, ...rest }) => {\n    return (\n        <div {...cls([styles.root, active && styles.active, disabled && styles.disabled], rest)}>\n            <div className={cn(styles.content, contentClass)}>{children}</div>\n            <div className={styles.check}>\n                {active ? <CheckCircleIcon color={color} size={size} /> : <CircleIcon color={color} size={size} />}\n            </div>\n        </div>\n    );\n};\n\nCheckableItem.propTypes = {\n    active: PropTypes.bool,\n    disabled: PropTypes.bool,\n    size: PropTypes.number,\n    color: PropTypes.string,\n    contentClass: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3IlKY5pN\",\"groupLabel\":\"_3ilybRMG\",\"choice\":\"_3xuRcIYp\",\"active\":\"NqPPc9JS\",\"rounded\":\"_2zIR-Sum\",\"checkMark\":\"_17ClkL4Z\",\"icon\":\"_2TR7NHYG\",\"label\":\"_81Eg-8go\",\"grid\":\"_3U0Cg6LG\"};","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport { FiCheck } from 'react-icons/fi';\n\nimport styles from './styles.scss';\n\nexport default function ListInput({\n    options,\n    groups,\n    value,\n    toggle,\n    multiple,\n    grid,\n    containerClassName,\n    choiceClassName,\n    activeClassName,\n    groupLabelClassName,\n    fullWidthClassName,\n    renderOption,\n    style,\n    onChange,\n}) {\n    const isSelected = (selected) => {\n        return multiple ? value.includes(selected) : value === selected;\n    };\n    const handleClick = (selected, e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const add = toggle && isSelected(selected);\n\n        if (multiple) {\n            if (add) {\n                onChange(value.filter((item) => item !== selected));\n            } else {\n                onChange([...new Set([...value, selected])]);\n            }\n        } else {\n            if (add) {\n                onChange(undefined);\n            } else {\n                onChange(selected);\n            }\n        }\n    };\n\n    const grouped = useMemo(() => {\n        const result = new Map((groups || []).map((group) => [group.id, { ...group, options: [] }]));\n\n        if (!result.get('default')) {\n            result.set('default', { id: 'default', options: [], label: '' });\n        }\n\n        if (groups) {\n            for (const option of options) {\n                if (option.group) {\n                    const group = result.get(option.group);\n\n                    if (group) {\n                        group.options.push(option);\n                    } else {\n                        result.set(option.group, { id: 'default', options: [option], label: option.group });\n                    }\n                }\n            }\n\n            for (const group of [...result.values()]) {\n                if (!group.options.length) {\n                    result.delete(group.id);\n                }\n            }\n        }\n\n        return new Map(\n            [...result.entries()].sort(([, a], [, b]) => {\n                const indexA = Number.isInteger(a.index) ? a.index : a.id;\n                const indexB = Number.isInteger(b.index) ? b.index : b.id;\n\n                return indexB - indexA;\n            })\n        );\n    }, [groups]);\n\n    const renderOptions = (options) =>\n        options.map((option) => {\n            const active = isSelected(option.value);\n            const Icon = option.icon;\n            const content = (renderOption && renderOption({ option, active })) ||\n                (option.props && option.props.children) || (\n                <>\n                    {Icon && (\n                        <div className={styles.icon}>\n                            <Icon size={24} />\n                        </div>\n                    )}\n                    <div className={styles.label}>{(option.props && option.props.children) || option.label}</div>\n                    <div className={cn({ [styles.checkMark]: true, [styles.active]: active })}>\n                        <FiCheck size={24} />\n                    </div>\n                </>\n            );\n\n            return (\n                <div\n                    key={option.value || option.label}\n                    className={cn(\n                        styles.choice,\n                        active && styles.active,\n                        option.rounded && styles.rounded,\n                        choiceClassName,\n                        active && activeClassName,\n                        option.fullWidth && fullWidthClassName\n                    )}\n                    onClick={onChange && handleClick.bind(null, option.value)}\n                    {...option.props}\n                >\n                    {content}\n                </div>\n            );\n        });\n\n    if (grouped.size > 1) {\n        return (\n            <div style={style}>\n                {[...grouped.values()].map(({ id, label, options }) => (\n                    <div key={id}>\n                        <div className={cn(styles.groupLabel, groupLabelClassName)}>{label}</div>\n\n                        <div className={cn(styles.root, grid && styles.grid, containerClassName)}>\n                            {renderOptions(options)}\n                        </div>\n                    </div>\n                ))}\n            </div>\n        );\n    }\n\n    return (\n        <div className={cn(styles.root, grid && styles.grid, containerClassName)} style={style}>\n            {renderOptions(options)}\n        </div>\n    );\n}\n\nconst OptionValuePropType = PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.bool]);\n\nexport const OptionProps = {\n    label: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n    group: PropTypes.string,\n    value: OptionValuePropType,\n    icon: PropTypes.any,\n    fullWidth: PropTypes.bool,\n};\nexport const OptionGroupProps = {\n    label: PropTypes.any,\n    id: PropTypes.string,\n    index: PropTypes.number,\n    values: PropTypes.arrayOf(OptionValuePropType).isRequired,\n    icon: PropTypes.any,\n};\n\nListInput.propTypes = {\n    value: PropTypes.oneOfType([OptionValuePropType, PropTypes.arrayOf(OptionValuePropType)]),\n    options: PropTypes.arrayOf(PropTypes.shape(OptionProps)).isRequired,\n    groups: PropTypes.arrayOf(PropTypes.shape(OptionGroupProps)),\n    toggle: PropTypes.bool,\n    grid: PropTypes.bool,\n    multiple: PropTypes.bool,\n    renderOption: PropTypes.func,\n    style: PropTypes.object,\n    onChange: PropTypes.func.isRequired,\n    containerClassName: PropTypes.string,\n    choiceClassName: PropTypes.string,\n    activeClassName: PropTypes.string,\n    groupLabelClassName: PropTypes.string,\n    fullWidthClassName: PropTypes.string,\n};\n\nListInput.defaultProps = {\n    value: null,\n    groups: null,\n    toggle: false,\n    multiple: false,\n    grid: false,\n    onChoiceRef: null,\n    renderOption: null,\n    containerClassName: '',\n    choiceClassName: '',\n    activeClassName: '',\n    groupLabelClassName: '',\n    fullWidthClassName: '',\n};\n\nListInput.styles = styles;\n","// extracted by mini-css-extract-plugin\nexport default {\"orBar\":\"DAph2hqD\",\"choices\":\"_2NW-Ib1C\",\"choice\":\"bSNToVUt\",\"choiceWrapper\":\"_25Ad_UsP\",\"choiceContent\":\"_2ZWUE4aU\",\"paymentButtons\":\"_10jXd67k\"};","import React, { useCallback, useMemo, useState } from 'react';\nimport { useAsyncFn, useToggle } from 'react-use';\nimport { useHistory } from 'react-router-dom';\nimport { AnimatePresence } from 'framer-motion';\n\nimport { __t } from '@mssgme/shared';\nimport { getContourColor } from '@mssgme/helpers';\nimport { CheckableItem, ListInput } from '@mssgme/ui';\nimport { ThemedModal } from '../../../UI';\nimport { useCoreContext, useFrontAPI, useModalThemes, usePaymentConfigs, useSavedOrders } from '../../../hooks';\nimport { printPrice } from '../../printPrice';\nimport { Row } from '../../Row';\nimport { OrderItemsList } from '../../OrderItem';\nimport { PAYMENT_PROVIDER_RENDERERS, PAYMENT_PROVIDERS } from '../Providers';\nimport { StepsFooter } from './StepsFooter';\n\nimport styles from './PaymentStep.scss';\n\nconst ONLINE_KEY = 'online';\n\nfunction PaymentStep() {\n    const history = useHistory();\n    const api = useFrontAPI();\n    const payments = usePaymentConfigs();\n    const { currentOrder, removeCurrentOrderId } = useSavedOrders();\n    const { router } = useCoreContext();\n    const { contentStyle } = useModalThemes();\n    const [isPayNowModal, togglePayNowModal] = useToggle(false);\n\n    const { immediate, online } = useMemo(() => {\n        const mapper = ([provider]) => [provider, PAYMENT_PROVIDER_RENDERERS[provider]];\n\n        return {\n            immediate: payments.immediate.map(mapper),\n            online: payments.online.map(mapper),\n        };\n    }, [payments]);\n    const hasOnlineMethods = !!online.length;\n    const hasImmediateMethods = !!immediate.length;\n    const isJustOneOnlinePaymentMethods = hasOnlineMethods && !hasImmediateMethods;\n\n    const [{ loading }, handlePay] = useAsyncFn(\n        async (paymentMethod) => {\n            await api.orders.finalize({ orderId: currentOrder._id, payload: { paymentMethod } });\n\n            togglePayNowModal();\n            removeCurrentOrderId();\n            history.push(router.orders.toStatus(currentOrder._id, 'paid'));\n        },\n        [router, currentOrder]\n    );\n\n    const [selected, setSelected] = useState(hasOnlineMethods ? ONLINE_KEY : immediate[0]?.[0]);\n\n    const optionStyles = useMemo(() => {\n        const { backgroundColor, color, border } = getContourColor(\n            contentStyle.backgroundColor,\n            contentStyle.buttonBackground,\n            contentStyle.buttonTextColor\n        );\n\n        return {\n            option: {\n                backgroundColor,\n                color,\n                border: `1px solid ${border}`,\n            },\n            active: {\n                backgroundColor: contentStyle.buttonBackground,\n                color: contentStyle.buttonTextColor,\n                border: `1px solid ${contentStyle.buttonBackground}`,\n            },\n        };\n    }, [contentStyle]);\n    const options = useMemo(\n        () =>\n            currentOrder &&\n            [\n                hasOnlineMethods && {\n                    value: ONLINE_KEY,\n                    label: __t('pay_now'),\n                    icon: (\n                        <div>\n                            {online.map(([provider]) => {\n                                const found = PAYMENT_PROVIDERS.find((i) => i.provider === provider);\n\n                                return found && <found.icon key={provider} />;\n                            })}\n                        </div>\n                    ),\n                },\n                ...immediate.map(([key]) => ({\n                    value: key,\n                    label: __t(`payments_${key}`),\n                })),\n            ].filter(Boolean),\n        [currentOrder, online, immediate]\n    );\n\n    const renderOption = useCallback(\n        ({ option, active }) => {\n            const style = active ? optionStyles.active : optionStyles.option;\n\n            return (\n                <CheckableItem\n                    className={styles.choiceWrapper}\n                    contentClass={styles.choiceContent}\n                    style={style}\n                    active={active}\n                    color={style.color}\n                >\n                    {option.label}\n                    {option.icon}\n                </CheckableItem>\n            );\n        },\n        [optionStyles]\n    );\n\n    const handleNext = useCallback(() => {\n        if (selected === ONLINE_KEY) {\n            togglePayNowModal(true);\n        } else {\n            void handlePay(selected);\n        }\n    }, [selected, handlePay]);\n\n    if (!currentOrder) {\n        return null;\n    }\n\n    const onlineElements = (\n        <div className={styles.paymentButtons}>\n            {online.map(([key, Renderer]) => (\n                <Renderer key={key} order={currentOrder} disabled={loading} onPay={handlePay} />\n            ))}\n        </div>\n    );\n\n    return (\n        <div>\n            <OrderItemsList order={currentOrder} />\n            <Row label={__t('total_to_pay')} value={printPrice(currentOrder.total)} style={{ marginBottom: 16 }} />\n\n            {isJustOneOnlinePaymentMethods ? (\n                onlineElements\n            ) : (\n                <div style={{ marginBottom: -8 }}>\n                    <ListInput\n                        containerClassName={styles.choices}\n                        choiceClassName={styles.choice}\n                        value={selected}\n                        options={options}\n                        renderOption={renderOption}\n                        onChange={setSelected}\n                    />\n\n                    {hasOnlineMethods && (\n                        <AnimatePresence>\n                            {isPayNowModal && (\n                                <ThemedModal\n                                    overlay\n                                    compact\n                                    padding\n                                    title={__t('choose_payment_method')}\n                                    onClose={togglePayNowModal}\n                                >\n                                    {onlineElements}\n                                </ThemedModal>\n                            )}\n                        </AnimatePresence>\n                    )}\n                </div>\n            )}\n\n            <StepsFooter prev next={!isJustOneOnlinePaymentMethods && handleNext} disabled={loading} />\n        </div>\n    );\n}\n\nexport default PaymentStep;\n","import React, { useMemo } from 'react';\nimport { Form, Formik } from 'formik';\n\nimport { __t } from '@mssgme/shared';\nimport { Textarea } from '@mssgme/ui';\nimport { useCRMData, useSavedOrders } from '../../../hooks';\nimport { TextField } from '../../../UI';\nimport { useOrderSubmit } from '../../useOrderSubmit';\nimport { StepsFooter } from './StepsFooter';\n\nconst INITIAL_CONTACT_INFO = {\n    firstName: '',\n    lastName: '',\n    phoneNumber: '',\n    comment: '',\n};\n\nfunction ContactInfoStep() {\n    const { form } = useCRMData();\n    const { currentOrder } = useSavedOrders();\n    const initialValues = useMemo(() => ({ contactInfo: currentOrder?.contactInfo || INITIAL_CONTACT_INFO }), [\n        currentOrder?.contactInfo,\n    ]);\n    const doSubmit = useOrderSubmit(currentOrder?._id);\n    const noLastName = !!form.optional?.lastName;\n\n    if (!currentOrder) {\n        return null;\n    }\n\n    return (\n        <Formik initialValues={initialValues} onSubmit={doSubmit}>\n            {({ isSubmitting, handleSubmit }) => (\n                <Form>\n                    <TextField\n                        required\n                        name=\"contactInfo.firstName\"\n                        label={noLastName ? __t('contactInfo.name') : __t('contactInfo.firstName')}\n                        placeholder={\n                            noLastName ? __t('contactInfo.placeholder.name') : __t('contactInfo.placeholder.firstName')\n                        }\n                    />\n                    {!noLastName && (\n                        <TextField\n                            required\n                            name=\"contactInfo.lastName\"\n                            placeholder={__t('contactInfo.placeholder.lastName')}\n                        />\n                    )}\n                    <TextField\n                        required\n                        name=\"contactInfo.phoneNumber\"\n                        placeholder={__t('contactInfo.placeholder.phoneNumber')}\n                    />\n                    <TextField\n                        component={Textarea}\n                        name=\"contactInfo.comment\"\n                        placeholder={__t('contactInfo.placeholder.comment')}\n                    />\n\n                    <StepsFooter prev next={handleSubmit} disabled={isSubmitting} />\n                </Form>\n            )}\n        </Formik>\n    );\n}\n\nexport default ContactInfoStep;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2Nkxdw-M\",\"error\":\"APzUyhGO\"};","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Redirect, useLocation } from 'react-router-dom';\nimport { MdContactPhone } from 'react-icons/md';\n\nimport { __t } from '@mssgme/shared';\nimport { CreditCardIcon, MapPinIcon, ShoppingBagIcon } from '@mssgme/icons';\nimport { Spinner } from '@mssgme/ui';\nimport { useCoreContext, useCRMData } from '../../hooks';\nimport { Step, StepSwitch, ThemedModal } from '../../UI';\nimport { useOrder } from '../useOrder';\nimport AdjustingStep from './Steps/AdjustingStep';\nimport ShippingAddressStep from './Steps/ShippingAddressStep';\nimport PaymentStep from './Steps/PaymentStep';\nimport ContactInfoStep from './Steps/ContactInfoStep';\n\nimport styles from './OrderPage.scss';\n\nOrderPage.propTypes = {\n    orderId: PropTypes.string.isRequired,\n};\n\nexport function OrderPage({ orderId }) {\n    const location = useLocation();\n    const { router } = useCoreContext();\n    const { form } = useCRMData();\n    const { immediate: order, loading, error, isNotFound } = useOrder(orderId);\n    const backPath = location.state?.backPath || router.toHome();\n\n    if (!order) {\n        return null;\n    }\n\n    if (order.finalized) {\n        return <Redirect to={router.orders.toStatus(orderId, order.status)} />;\n    }\n\n    return (\n        <ThemedModal overlay compact title={__t('checkout')} onClose={backPath}>\n            <div className={styles.root}>\n                {loading ? (\n                    <Spinner />\n                ) : error ? (\n                    <div className={styles.error}>\n                        {isNotFound ? __t('order_not_found') : error.message}\n                    </div>\n                ) : (\n                    <StepSwitch>\n                        <Step name={__t('order_adjusting')} icon={ShoppingBagIcon}>\n                            <AdjustingStep />\n                        </Step>\n                        <Step name={__t('order_contact_info')} icon={MdContactPhone}>\n                            <ContactInfoStep />\n                        </Step>\n                        {!!form.collectAddress && (\n                            <Step name={__t('order_shipping_address')} icon={MapPinIcon}>\n                                <ShippingAddressStep />\n                            </Step>\n                        )}\n                        <Step name={__t('order_payment')} icon={CreditCardIcon}>\n                            <PaymentStep />\n                        </Step>\n                    </StepSwitch>\n                )}\n            </div>\n        </ThemedModal>\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_16xOxYXh\",\"icon\":\"BzF9ozYT\",\"title\":\"_3s9Zed-X\",\"subTitle\":\"_3FQsGQSI\",\"orderTitle\":\"_1NfpeMBe\"};","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { FaRegFrown, FaRegSmileBeam } from 'react-icons/fa';\n\nimport { __t } from '@mssgme/shared';\nimport { LandingsPropTypes, LinkBlank } from '@mssgme/ui';\nimport { useCoreContext, useCRMData, useModalThemes, useViewOrder } from '../hooks';\nimport { ThemedButton, ThemedModal } from '../UI';\n// import { OrderItemsList } from './OrderItem';\n\nimport styles from './PaymentStatusPage.scss';\n\nPaymentStatusPage.propTypes = {\n    orderId: PropTypes.string.isRequired,\n    status: LandingsPropTypes.orderStatus.isRequired,\n};\n\nfunction PaymentStatusPage({ orderId, status }) {\n    const history = useHistory();\n    const { router } = useCoreContext();\n    const { form } = useCRMData();\n    const { contentStyle } = useModalThemes();\n    const { order, error } = useViewOrder(orderId);\n    const resolvedStatus = status === 'pending' ? 'paid' : status;\n\n    const handleClose = useCallback(\n        (orderId) => {\n            if (orderId) {\n                return history.push(router.userOrders.toOrder(orderId));\n            }\n\n            return history.push(router.toHome());\n        },\n        [router]\n    );\n\n    if (error) {\n        return (\n            <ThemedModal overlay compact showHeader={false} onClose={handleClose}>\n                <div className={styles.root}>\n                    <p>{__t('order_not_found')}</p>\n                </div>\n            </ThemedModal>\n        );\n    }\n\n    return (\n        <ThemedModal overlay compact showHeader={false} onClose={handleClose}>\n            {(onClose) => (\n                <div className={styles.root}>\n                    {resolvedStatus === 'failed' ? (\n                        <FaRegFrown size={60} className={styles.icon} />\n                    ) : (\n                        <FaRegSmileBeam size={60} className={styles.icon} />\n                    )}\n\n                    <h1 className={styles.title}>{__t(`payment_${resolvedStatus}`)}</h1>\n                    {resolvedStatus !== 'failed' && (\n                        <>\n                            <p className={styles.subTitle}>{form.successMessage || __t('payment_paid_subtitle')}</p>\n                            {form.successURL?.url && (\n                                <p className={styles.subTitle}>\n                                    <LinkBlank href={form.successURL.url}>\n                                        {form.successURL.title || form.successURL.url}\n                                    </LinkBlank>\n                                </p>\n                            )}\n                        </>\n                    )}\n\n                    {/*<h2 className={styles.orderTitle}>{__t('order_adjusting')}</h2>*/}\n                    {/*{order && <OrderItemsList order={order} />}*/}\n\n                    <ThemedButton\n                        fullWidth\n                        style={{ marginTop: 16 }}\n                        theme={contentStyle}\n                        onClick={() => onClose(orderId)}\n                    >\n                        {__t('view_order')}\n                    </ThemedButton>\n                    <ThemedButton\n                        fullWidth\n                        style={{ marginTop: 8 }}\n                        contour\n                        theme={contentStyle}\n                        onClick={() => onClose()}\n                    >\n                        {__t('back_to_home')}\n                    </ThemedButton>\n                </div>\n            )}\n        </ThemedModal>\n    );\n}\n\nexport default PaymentStatusPage;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { Route } from 'react-router-dom';\n\nexport const PassthroughRoute = ({ path, exact, component: Component, makeProps = (p) => p }) => {\n    const render = useCallback(\n        ({ match }) => {\n            const props = makeProps(match.params);\n\n            return props && <Component {...props} />;\n        },\n        [Component, makeProps]\n    );\n\n    return <Route exact={exact} path={path} render={render} />;\n};\n\nPassthroughRoute.propTypes = {\n    path: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]).isRequired,\n    exact: PropTypes.bool,\n    component: PropTypes.any.isRequired,\n    makeProps: PropTypes.func,\n};\n","import React, { useMemo } from 'react';\n\nimport { useWebsiteData } from '../../hooks';\nimport { CollectionView, ProductView } from '../../Product';\nimport { OrderPage, PaymentStatusPage, UserOrderPage, UserOrdersPage } from '../../Order';\nimport { PassthroughRoute } from '../PassthroughRoute';\n\nexport default function PageProductsRouting() {\n    const website = useWebsiteData();\n    const contexts = useMemo(\n        () => ({\n            product: ({ productSlug, collectionSlug }) => ({\n                productSlug,\n                collectionSlug,\n                workspaceId: website.workspace,\n                defaultCollectionId: website.defaultCollectionId,\n            }),\n            collection: ({ collectionSlug }) => {\n                const collection = collectionSlug && website.collections.find(({ slug }) => slug === collectionSlug);\n\n                if (!collection) {\n                    return null;\n                }\n\n                return {\n                    workspaceId: website.workspace,\n                    websiteId: website._id,\n                    collection,\n                };\n            },\n        }),\n        [website.workspace, website.defaultCollectionId, website.collections]\n    );\n\n    return (\n        <>\n            <PassthroughRoute path=\"/c/:collectionSlug\" makeProps={contexts.collection} component={CollectionView} />\n\n            <PassthroughRoute\n                path={['/p/:productSlug', '/c/:collectionSlug/p/:productSlug']}\n                makeProps={contexts.product}\n                component={ProductView}\n            />\n\n            <PassthroughRoute path=\"/user-orders\" component={UserOrdersPage} />\n            <PassthroughRoute path=\"/user-orders/:orderId\" exact component={UserOrderPage} />\n            <PassthroughRoute\n                path={[\n                    '/orders/:orderId',\n                    '/p/:productSlug/orders/:orderId',\n                    '/c/:collectionSlug/p/:productSlug/orders/:orderId',\n                ]}\n                exact\n                component={OrderPage}\n            />\n            <PassthroughRoute path=\"/orders/:orderId/payment/:status\" component={PaymentStatusPage} />\n        </>\n    );\n}\n","module.exports = window.PLANS || {};\n","// extracted by mini-css-extract-plugin\nexport default {\"flex\":\"_13OHpFIB\",\"slide\":\"_1u67jLhO\",\"nonInteractive\":\"_3X7yDO_4\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\n\nimport { Swiper as BaseSwiper, SwiperSlide } from 'swiper/react';\nimport SwiperCore, { Autoplay, EffectFade, EffectFlip, Pagination, Lazy, Navigation } from 'swiper';\n\nimport { cls } from '@mssgme/helpers';\nimport { renderNode } from '../../helpers';\n\nimport styles from './Swiper.scss';\n\n// todo: direct \"import 'swiper/swiper.scss'\" mangles the identifiers and :global can't be used due to sass bug\n//  should either update swiper (if styles import was changed in newer versions) or fix scss-build stack (downgrade?)\nrequire('swiper/swiper.scss');\nrequire('swiper/components/pagination/pagination.scss');\nrequire('swiper/components/effect-flip/effect-flip.scss');\nrequire('swiper/components/effect-fade/effect-fade.scss');\n\nSwiperCore.use([Pagination, Lazy, Navigation, Autoplay, EffectFade, EffectFlip]);\n\nexport function Swiper({\n    children,\n    flex,\n    perView = 1,\n    initialSlide = 0,\n    allowTouchMove = true,\n    interactive = true,\n    forcePerView,\n    slideClass,\n    pagination,\n    slideStyle,\n    ...rest\n}) {\n    const array = (Array.isArray(children) ? children : React.Children.toArray(children)).filter(Boolean);\n    const count = array.length;\n    const exceedsPerView = count > perView;\n    const showPagination = pagination !== false;\n    const hasPagination = exceedsPerView && showPagination;\n    const slidesPerView = forcePerView || exceedsPerView ? perView : count;\n    const paginationOptions = useMemo(() => {\n        if (!hasPagination) {\n            return false; // this will hide pagination AND disable swiping behavior\n        }\n\n        return showPagination\n            ? { clickable: true, ...pagination } // pagination + swiping enabled\n            : { el: null }; // this will hide pagination but preserve swiping behavior\n    }, [hasPagination, showPagination, pagination]);\n\n    return (\n        <BaseSwiper\n            key={`${exceedsPerView}-${showPagination}-${count}`}\n            observer\n            resizeObserver\n            spaceBetween={0}\n            slidesPerView={slidesPerView}\n            allowTouchMove={allowTouchMove && exceedsPerView}\n            initialSlide={initialSlide}\n            pagination={paginationOptions}\n            {...cls([styles.root, flex && styles.flex], rest)}\n        >\n            {array.map((child, index) => (\n                <SwiperSlide\n                    key={child.key}\n                    style={renderNode(slideStyle, index)}\n                    className={cn(styles.slide, !interactive && styles.nonInteractive, slideClass)}\n                >\n                    {child}\n                </SwiperSlide>\n            ))}\n        </BaseSwiper>\n    );\n}\n\nSwiper.propTypes = {\n    children: PropTypes.any.isRequired,\n    initialSlide: PropTypes.number,\n    perView: PropTypes.number,\n    forcePerView: PropTypes.bool,\n    interactive: PropTypes.bool,\n    allowTouchMove: PropTypes.bool,\n    flex: PropTypes.bool,\n    slideClass: PropTypes.string,\n    slideStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n    pagination: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n};\n","import { satisfies } from 'compare-versions';\nimport { memoize } from 'lodash';\n\n/**\n * @param {string} base Base version\n * @param {string} versionString Version comparison\n * @returns {bool} Comparison result from expression `base` `versionString`\n */\nexport default memoize(\n    (base, version) => {\n        // remove alpha/beta/rc portion, or version '1.0.0-alpha' would not satisfy constraint '>=1.0.0'\n        base = base.includes('-') ? base.split('-', 2)[0] : base;\n\n        return satisfies(base, version);\n    },\n    (base, versionString) => `${base}${versionString}`\n);\n"],"sourceRoot":""}