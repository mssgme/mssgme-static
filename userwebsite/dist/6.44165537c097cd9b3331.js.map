{"version":3,"sources":["webpack:////drone/src/packages/lib/src/baseApi.js","webpack:////drone/src/packages/shared/src/helpers/formatPrice.js","webpack:////drone/src/packages/lib/src/feedbackApi.js","webpack:////drone/src/packages/shared/src/restrictions/isPaid.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/requestError.js","webpack:////drone/src/packages/shared/src/restrictions/errorBuilder.js","webpack:////drone/src/packages/shared/src/plans.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/request.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/voter.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/websites.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/pages.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/blocks.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/acl/resource.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/acl/role.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/acl/acl.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/acl/loader.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/index.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/acl.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/permissions.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/index.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/unlimited.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/version.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/collections.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/messengers.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/products.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/pagePublish.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/pageTemplates.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/themes.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/pageStyling.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/blocksPublish.js","webpack:////drone/src/packages/shared/src/restrictions/permissions/voters/impl/subscriptionFormField.js","webpack:////drone/src/packages/shared/src/restrictions/checkBillingRestrictions.js","webpack:////drone/src/packages/hooks/src/useRestrictions.js","webpack:////drone/src/packages/hooks/src/useWorkspace.js","webpack:////drone/src/packages/hooks/src/useFetching.js","webpack:////drone/src/packages/ui/src/components/Form/useEnhancedFormik.js","webpack:////drone/src/packages/ui/src/components/Form/SubmitButton.js","webpack:////drone/src/packages/ui/src/components/Inputs/SelectSimple/SelectSimple.module.scss","webpack:////drone/src/packages/ui/icons/select_arrow.svg","webpack:////drone/src/packages/ui/src/components/Inputs/SelectSimple/index.js","webpack:////drone/src/packages/ui/src/components/Inputs/CountrySelect/countries.js","webpack:////drone/src/packages/ui/src/components/Inputs/CountrySelect/index.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/useDynamicFormDefaults.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/useDynamicForm.js","webpack:////drone/src/packages/ui/src/components/Inputs/RadioGroup/RadioGroup.module.scss","webpack:////drone/src/packages/ui/src/components/Inputs/RadioGroup/index.js","webpack:////drone/src/packages/ui/src/components/Inputs/Checkbox/Checkbox.module.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Checkbox/index.js","webpack:////drone/src/packages/ui/src/components/Inputs/CheckboxGroup/CheckboxGroup.module.scss","webpack:////drone/src/packages/ui/src/components/Inputs/CheckboxGroup/index.js","webpack:////drone/src/packages/ui/src/components/Inputs/Textarea/Textarea.module.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Textarea/index.js","webpack:////drone/src/packages/ui/src/components/Inputs/Input/Input.module.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Input/index.js","webpack:////drone/src/packages/ui/src/components/FormRow/FormRow.module.scss","webpack:////drone/src/packages/ui/src/components/FormRow/index.js","webpack:////drone/src/packages/ui/src/components/Label/Label.module.scss","webpack:////drone/src/packages/ui/src/components/Label/index.js","webpack:////drone/src/packages/ui/src/components/FormErrors/FormErrors.module.scss","webpack:////drone/src/packages/ui/src/components/FormErrors/index.js","webpack:////drone/src/packages/ui/src/components/FormField/FormField.module.scss","webpack:////drone/src/packages/ui/src/components/FormField/index.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useModalThemes.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useInputTheme.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/DynamicFormInput.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/DynamicFormInput.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/DynamicFormInputs.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/DynamicFormInputs.js","webpack:////drone/src/packages/helpers/src/getContourColor.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ThemedButton/ThemedButton.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/ThemedButton/ThemedButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/SubscriptionFormContent.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/SubscriptionFormContent.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/DynamicFormInputs/useDynamicFormErrors.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/SubscriptionForm.js","webpack:////drone/src/packages/ui/src/hooks/useMergedStyles.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/SubscriptionForm/index.js","webpack:////drone/src/packages/ui/src/components/Spinner/Spinner.module.scss","webpack:////drone/src/packages/ui/src/components/Spinner/Spinner.js","webpack:////drone/src/packages/ui/src/components/Spinner/index.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/MoreButton/MoreButton.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/MoreButton/index.js","webpack:////drone/src/packages/icons/src/dist-icons/ImageIcon.js","webpack:////drone/src/packages/ui/src/components/LazyImage/Thumbnail.module.scss","webpack:////drone/src/packages/ui/src/components/LazyImage/Thumbnail.js","webpack:////drone/src/packages/ui/src/components/LazyImage/LazyImage.module.scss","webpack:////drone/src/packages/ui/src/components/LazyImage/LazyImage.js","webpack:////drone/src/packages/ui/src/components/LazyImage/useIntersect.js","webpack:////drone/src/packages/ui/src/components/LazyImage/useLoadImage.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGridItem.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGridItem.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServiceContent.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServicePhoto.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServicePhotos.js","webpack:////drone/src/packages/hooks/src/useNavigationUtils.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/BuyButton.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/BuyButton.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServiceActionsPane.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ExternalUrlButton.js","webpack:////drone/src/packages/helpers/src/parseUrl.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/ServiceContent/ServiceContent.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesModal.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesModal.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGrid.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/ServicesGrid.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/ServicesGrid/index.js","webpack:////drone/src/packages/helpers/src/filters.js","webpack:////drone/src/packages/icons/src/dist-icons/SearchIcon.js","webpack:////drone/src/packages/userpage-core/src/products/Elements/ProductItem/ProductItem.module.scss","webpack:////drone/src/packages/userpage-core/src/products/Elements/ProductItem/index.js","webpack:////drone/src/packages/lib/src/productsApi.js","webpack:////drone/src/packages/lib/src/handleError.js","webpack:////drone/src/packages/ui/src/hooks/useBreakpoints.js","webpack:////drone/src/packages/userpage-core/src/UI/ScrollableBar/ScrollableBar.module.scss","webpack:////drone/src/packages/userpage-core/src/UI/ScrollableBar/ScrollableBar.js","webpack:////drone/src/packages/ui/src/hooks/useHorizontalTabbedScroll.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/ButtonsMenu.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/ButtonsMenuItems.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/ButtonsMenu.js","webpack:////drone/src/packages/icons/src/dist-icons/ChevronDownIcon.js","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/PureButton.js","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/TextButton.module.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/TextButton.js","webpack:////drone/src/packages/ui/src/components/Transitions/createTransition.js","webpack:////drone/src/packages/ui/src/components/Transitions/Fade.module.scss","webpack:////drone/src/packages/ui/src/components/Transitions/Fade.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/FilterMenu.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/FilterMenu.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/CollectionsBar/CollectionsBar.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/Products.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/Products.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useProductsApi.js","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/Products/index.js","webpack:////drone/src/packages/ui/src/components/AnimateableRoutes/useRoutes.js","webpack:////drone/src/packages/ui/src/components/AnimateableRoutes/PresentableRoute.js","webpack:////drone/src/packages/ui/src/components/AnimateableRoutes/AnimateableRoutes.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useCRMData.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useContacts.js","webpack:////drone/src/packages/userpage-core/src/landings/UI/Grid/Grid.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/UI/Grid/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Product/CollectionView/CollectionView.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrdersPage/UserOrdersPage.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrdersPage/UserOrdersPage.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/useOrder.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/usePaymentConfigs.js","webpack:////drone/src/packages/shared/src/payments/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/PayButton/PayButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/StripeCheckoutForm.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/StripeCheckoutForm.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/PayPalPayment.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/Buttons/WayforpayButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/WayforpayPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/Buttons/RobokassaButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/Buttons/LiqpayButton.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/CashOnDeliveryPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/StripePayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/PayPalPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/RobokassaPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/LiqpayPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/Providers/OtherPayment.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/OrderView/OrderView.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/OrderView/Section.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/OrderView/Row.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/OrderView/OrderView.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/useOrderProducts.js","webpack:////drone/src/packages/userpage-core/src/landings/hooks/usePageColors.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/Divider/Divider.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/Divider/Divider.js","webpack:////drone/src/packages/helpers/src/getTransparentColor.js","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/IconButton.module.scss","webpack:////drone/src/packages/ui/src/components/Inputs/Buttons/IconButton.js","webpack:////drone/src/packages/icons/src/dist-icons/MinusIcon.js","webpack:////drone/src/packages/icons/src/dist-icons/PlusIcon.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/printPrice.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderItem/OrderItem.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderItem/OrderItem.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/OrderItem/OrderItemsList.js","webpack:////drone/src/packages/ui/src/components/FloatingActions/FloatingActions.module.scss","webpack:////drone/src/packages/ui/src/components/FloatingActions/FloatingActions.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/FormFooter/FormFooter.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/FormFooter/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/Row.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/Row.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/ShoppingCart.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/UserOrderPage.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/PaymentStatusPage.module.scss","webpack:////drone/src/packages/icons/src/dist-icons/CheckCircleIcon.js","webpack:////drone/src/packages/icons/src/dist-icons/CircleIcon.js","webpack:////drone/src/packages/ui/src/components/CheckableItem/CheckableItem.module.scss","webpack:////drone/src/packages/ui/src/components/CheckableItem/CheckableItem.js","webpack:////drone/src/packages/ui/src/components/Inputs/ListInput/ListInput.module.scss","webpack:////drone/src/packages/ui/src/components/Inputs/ListInput/index.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/PaymentStep.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/PaymentStep.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/CheckoutForm.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/CheckoutPage.module.scss","webpack:////drone/src/packages/userpage-core/src/landings/Page/PageBlocks/PageProductsRouting.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/UserOrderPage/UserOrderPage.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/PaymentStatusPage.js","webpack:////drone/src/packages/userpage-core/src/landings/Order/CheckoutPage/CheckoutPage.js","webpack:////drone/src/packages/userpage-core/src/landings/Product/ProductView/ProductView.js","webpack:////drone/src/packages/userpage-core/src/landings/Product/CollectionView/CollectionView.js","webpack:////drone/src/packages/plans/src/index.browser.js","webpack:////drone/src/packages/shared/src/helpers/toId.js","webpack:////drone/src/packages/ui/src/components/Swiper/Swiper.module.scss","webpack:////drone/src/packages/ui/src/components/Swiper/Swiper.js","webpack:////drone/src/packages/shared/src/helpers/versionCheck.js"],"names":["defaults","baseUrl","process","env","REACT_APP_USERPAGE_API_URL","BaseApi","constructor","options","this","get","endpoint","request","post","body","method","put","delete","Array","isArray","params","obj","arr","prop","val","push","length","join","urlSearch","startsWith","isAbsolute","headers","rest","response","fetch","includes","toUpperCase","Accept","JSON","stringify","undefined","ok","status","errors","json","error","Error","type","ValidationError","message","AuthorizationError","statusText","ApiError","CURRENCY_SYMBOL","Map","resolveFormatter","memoize","locale","currency","has","Intl","NumberFormat","style","currencyDisplay","minimumFractionDigits","useGrouping","l","c","formatPrice","amount","format","FeedbackApi","submit","workspaceId","websiteId","payload","isPaid","billing","allowPastDue","arguments","plan","paid","AccessRequestError","code","permission","target","super","AccessRequestErrorBuilder","permissions","context","workspace","assumePaid","subject","setPermission","setSubject","build","isGranted","granted","upgrade","lookupUpgrade","getPlans","Object","values","plans","getId","id","paddle","liqpay","isUnpaid","isDeprecated","deprecated","isPublished","published","getPlanTypes","filter","map","unpaid","actual","BASIC","UNLIMITED","UNPAID","PAID","UPGRADEABLE","DEPRECATED","ACTUAL","ACTION_EVERY","ACTION_ALL","actionsSet","Set","parse","resource","rawActions","split","actions","action","name","add","AccessPermissionRequest","role","resourceOrPermission","_this$workspace","fill","isEvery","isBy","user","_this$workspace2","toId","owner","path","def","assign","match","on","only","is","isAny","every","Voter","supports","supportsVersion","version","versionCheck","projectVersion","vote","WebsitesVoter","canCreate","canEditBasic","quantities","websites","getLimitByRole","PagesVoter","PageBlocksVoter","acl","canEdit","kind","grantsInArrayPayload","kindOrDescriptor","TOTAL_ACTIONS","ALL_ACCESS","Resource","access","_any","merge","total","value","grantsAny","Role","parent","resources","getResourceIds","addResource","existing","getResource","find","_this$parent","examine","strict","got","size","ACL","roles","getRoleIds","getRuleIds","concat","addRole","getRole","layer","parseRuleDefinition","rule","parsed","reduce","acc","aclVoter","loader","_acl","matches","predicate","item","grant","reject","some","definitions","rules","extend","loadACL","voters","addVoter","voter","_workspace$billing","current","index","indexOf","constraints","canDelete","default","_ref","enabled","card","messengers","m","messenger","slug","products","count","roleLimit","pages","allowed","page","canView","templates","_request$subject","_id","author","_request$subject2","public","colorId","_subject$items","items","_ref2","checkRestrictions","subjectOrCallback","callback","invariant","builder","itemError","useWarning","useRestriction","ee","EventEmitter","setMaxListeners","show","_len","args","_key","emit","hide","state","setState","useState","isPresented","warning","useEffect","onShow","onHide","prevState","removeListener","useSelector","ref","useRef","setWarning","checkRule","useEventCallback","showWarning","w","clearWarning","handleBlockedEvent","e","preventDefault","stopPropagation","deepEqual","hasWarning","hideWarning","createHooks","lastRequestId","defaultState","result","initialState","requestId","requestCount","reducer","useFetching","fn","deps","isMounted","useMountedState","dispatch","useReducer","run","useCallback","async","safeDispatch","ForbiddenError","isPermissionBlock","useMemo","validationErrors","getValidationError","idle","rejected","fulfilled","pending","useEnhancedFormik","onChange","onSubmit","errorsPrefix","resetOnSuccess","formik","useFormik","setSubmitting","setStatus","resetForm","setErrors","useUpdateEffect","SubmitButton","as","Component","Button","isInitialHidden","onClick","submitForm","dirty","isSubmitting","useFormikContext","isHidden","handleClick","React","createElement","_extends","isFetching","disabled","bind","i","source","key","prototype","hasOwnProperty","call","apply","d","fillRule","transform","xlinkHref","props","width","height","SelectSimple","_rest$style","className","multiple","placeholder","hasError","builderInput","styles","wrapper","classNames","root","data-value","option","label","ArrowIcon","color","arrowIcon","defaultProps","priorityCountries","separator","getDefaultCountriesOptions","memoizeOne","lang","availableLang","languages","fallback_language","countriesArray","countries","alpha_2","alpha_3","sort","item1","item2","localeCompare","prioritizedCountries","country","restCountries","__t","CountrySelect","getFieldDefault","useDynamicForm","navigator","language","validationSchema","createDynamicInputsValidationSchema","initialValues","useDynamicFormDefaults","fields","fromEntries","field","mapDynamicFieldToName","RadioIcon","viewBox","xmlns","x","y","rx","stroke","strokeWidth","RadioGroup","pane","cls","isSelected","checked","dangerouslySetInnerHTML","__html","CheckboxIcon","customStyle","checkMarkColor","backgroundColor","checkMarkSquareBorderColor","checkMarkSquareFillColor","checkMarkSquare","ry","checkMark","Checkbox","styled","wrap","input","toggler","CheckboxGroup","isChecked","Field","Textarea","maxLength","minRows","maxRows","_className","paddingRight","_value","container","TextareaAutosize","counter","trim","Input","containerClassName","inputStyle","autoFocus","isSelectAddon","renderAddon","node","isSelect","addon","renderNode","cloneElement","select","contextBlock","inputClassName","icon","Icon","beforeInput","afterInput","hexInput","hidden","refInput","clearable","isFilled","handleClear","_rest$onChange","_beforeInput","_afterInput","_rootClassName","before","after","_inputClassName","small","sizeNormal","valueLength","String","useMount","setTimeout","_ref$current","focus","inputWrapper","composeRefs","clearAddon","hasRightAddon","FiX","marginBottom","FiCalendar","customNativeIcon","FiClock","FormRow","align","children","Tag","Label","FormErrors","critical","shake","errorStyle","msg","labelStyle","paddingLeft","FormField","component","required","labelClassName","shakeError","wrapAs","htmlFor","useModalThemes","ProductsBlockKind","baseTheme","useTheme","theme","useElementTheme","elementPath","toLowerCase","compile","modalStyle","colors","background","contentStyle","useInputTheme","overrideTheme","SubscriptionFormBlockKind","customTheme","inputBackgroundColor","inputTextColor","border","borderRadius","padding","display","specificComponents","radio","checkbox","inputSpecificTypes","phone","handleEnterKey","isFieldPropSupported","feature","DynamicFormInput","fieldProps","getFieldProps","specificComponent","DYNAMIC_FIELD_SIZE_NORMAL","getLocalizedDynamicLabel","optionsArray","Boolean","unshift","onKeyPress","min","inputMode","pattern","meta","useField","touched","DynamicFormInputs","gridMode","getBrightness","TinyColor2","text","factor1","factor2","Math","abs","setAlpha","toRgbString","ThemedButton","contour","baseStyle","contentAlignLeft","getContourColor","buttonBackground","buttonTextColor","keyHash","tag","loaderColor","SubscriptionFormContent","block","rawSubmit","interactive","sent","setSent","FormTag","loading","useAsyncFn","handleSentModalClosed","useDynamicFormErrors","hasUrl","sentUrl","timer","window","location","clearTimeout","useLayoutEffect","mapValues","FormikProvider","fullWidth","sendLabel","AnimatePresence","ThemedModal","compact","overlay","showHeader","onClose","handleClose","FiCheck","sentText","SubscriptionForm","useBlockTheme","website","useWebsiteData","usePageData","combined","additionalStyle","useMergedStyles","handleSubmit","feedbackApi","pageId","blockId","data","submitEvent","CustomEvent","detail","document","dispatchEvent","BlockBase","POINTS","Spinner","borderWidth","duration","normalized","normalizeSize","round","animationDuration","WebkitAnimationDuration","MozAnimationDuration","cn","spinner","str","withPoints","points","MoreButton","ImageIcon","svgRef","IconBase","strokeLinecap","strokeLinejoin","ForwardRef","Thumbnail","LazyImage","mode","src","alt","isIntersecting","isIntersect","setIsIntersecting","setIsIntersect","observer","IntersectionObserver","entry","rootBounds","rootMargin","threshold","element","observe","unobserve","useIntersect","isLoaded","onLoad","onError","useLoadImage","img","visible","ServicesGridItem","themeStyles","getMediaSizeUrl","useUploads","photoUrl","MediaSizes","Half","thumbnail","title","emptyPlaceholder","IoMdImage","price","formattedDiscount","discount","discountPrice","lineThrough","formatted","ServicePhoto","forwardRef","Large","common","FiZoomIn","LoadingIndicator","lazy","loadPrevNext","preloaderClass","loadedClass","ServicePhotos","photos","isActive","isPrev","isNext","navigationPrevRef","navigationNextRef","paginationElRef","shouldSwiperLoad","setShouldSwiperLoad","swiper","setSwiper","isLightbox","setIsLightbox","currentLightBoxSlideIndex","setCurrentLightBoxSlideIndex","hasMultiplePhotos","hasNavElements","showSwiper","isSwipeable","openLightBox","closeLightBox","handleSlide","pagination","el","clickable","renderBullet","clickableClass","bulletActiveClass","handleLoad","updateAutoHeight","Swiper","nested","autoHeight","navigation","prevEl","nextEl","speed","watchOverflow","loop","onSwiper","FiChevronLeft","FiChevronRight","Suspense","fallback","LightBox","activeIndex","images","url","useNavigationUtils","useRouteMatch","pathname","useLocation","generateUrl","_options","charAt","resolvePathname","useMatchUrl","BuyButton","service","onCartAdd","productCurrency","api","useFrontAPI","router","useCoreContext","currentOrder","saveOrderId","useSavedOrders","isInCart","productId","orderId","orderPath","orders","toView","isDifferentCurrency","_currentOrder$items$","orderCurrency","restrictCurrenciesMessage","toggleRestrictCurrenciesMessage","useToggle","handleBuy","quantity","modify","create","Fragment","beforeIcon","ShoppingCartIcon","Link","to","backPath","product","textAlign","ServiceActionsPane","contacts","enabledPayments","renderBlock","useRenderer","hasContacts","ExternalUrlButton","_service$externalButt","_service$externalButt2","externalButton","externalUrl","URL","err","parseUrl","LinkBlank","href","data-id","data-title","data-element","data-event-name","urlSafeComponent","hostname","ServiceContent","description","backUrl","isCartAddAnimation","toggleCartAddAnimation","rootEl","serviceTitle","isDarkTheme","isLightColor","backgroundColorRGB","substring","backgroundImage","contactsEl","_service$price","_service$price2","_service$price3","addedToCartEvent","_e$preventDefault","scrollTop","scrollTo","top","behavior","motion","div","animate","bottom","exit","transition","stiffness","ShoppingCartButton","steady","absolute","ServicesModal","services","onClosing","handleHash","history","useHistory","hasMultipleServices","contactBlocks","_ref3","blocks","isMatchedById","handleSlideChange","replace","realIndex","allowTouchMove","initialSlide","noSwipingClass","onInit","onSlideChange","_ref4","ServicesGrid","sortable","delay","hashId","hash","slice","slideIndexFromHash","findIndex","hasSlideFromHash","Number","isInteger","setPage","isDelayed","setDelayed","isServicesModal","setIsServicesModal","currentServiceIndex","setCurrentServiceIndex","hasMore","ceil","sliced","handleLoadMore","old","openServicesModal","closeServicesModal","useTimeoutFn","servicesList","opacity","pointerEvents","moreButtonContainer","ServicesGridBlockKind","isMatch","_isMatch","isMatchId","SearchIcon","ProductItem","mediaUtils","generateProductThumbnailUrl","ProductsApi","list","load","loadBySlug","productSlug","collectionId","handleError","console","Sentry","captureException","MEDIA_BREAKPOINTS","minWidth","useIsDesktop","useMediaQuery","ScrollableBar","containerClass","scroll","isDesktop","setIndex","useMeasure","listScrollX","useScroll","listScrollWidth","scrollWidth","hasScroll","hasLeftBtn","hasRightBtn","moveTo","targetIndex","parentWidth","parentElement","clientWidth","nodes","from","querySelectorAll","scrollPosition","scrollLeft","moveLeft","moveRight","currentIndex","useHorizontalTabbedScroll","useBasePageColor","useDeepCompareEffect","ButtonsMenuItems","activeCollectionId","onSelect","themeStyle","button","productsCategoryTextColor","buttonActive","isTabbed","filterMode","ItemTag","_e$target$dataset","_items$index","dataset","col","data-index","data-slug","ButtonsMenu","ChevronDownIcon","PureButton","startIcon","endIcon","getProps","out","tabIndex","TextButton","DURATION_MAP","fast","normal","slow","createTransition","displayName","Transition","in","inProp","appear","innerRest","timeout","content","transitionDuration","CSSTransition","unmountOnExit","FilterMenuItem","collection","active","publishedProductsCount","FilterMenu","isOpen","toggle","selected","useClickAway","handleSelect","aria-pressed","Fade","CollectionsBar","Item","baseProductUrl","fromCollection","_product$slug","Products","_showCollections$","isMobileMode","commonStyle","moreStyle","collectionIds","activeCollections","collections","showCollections","setActiveCollectionId","pick","query","limit","isMobile","include","hasNext","getProducts","store","setStore","next","publishedCount","results","productsStore","productsApi","resetStore","prevProducts","useDebounce","catch","useProductsApi","handleMore","getFromCollection","keys","cols","_showCollections$2","firstId","child","joinPathArrays","flatten","part","mapChildRoute","routeConfig","childPath","_routeConfig$exact","descriptor","exact","sensitive","config","useRoutes","routes","base","baseline","basePath","mapRouting","PresentableRoute","usePresenceRemoval","Route","computedMatch","AnimateableRoutes","routing","resolved","route","matched","matchPath","useCRMData","crm","cloneDeep","CRM_IDENTITY","useContacts","MessengersBlockKind","Grid","itemClassName","Children","immediate","useOrder","userOrders","useUserOrders","useAsync","complete","isNotFound","NotFoundError","order","immediateCompletion","handlesPaymentsStatus","provider","usePaymentConfigs","payments","providers","entries","online","isSingular","isSingularOnline","PAYMENT_PROVIDERS","stripe","FaStripe","FiChevronsRight","paypal","FaPaypal","supported_currencies","wayforpay","MdPayment","robokassa","PayButton","_PAYMENT_PROVIDERS$pr","_PAYMENT_PROVIDERS$pr2","CARD_OPTIONS","hidePostalCode","iconStyle","classes","webkitAutofill","StripeCheckoutForm","rawDisabled","onPay","useStripe","elements","useElements","inputStyles","succeeded","setSucceeded","processing","setProcessing","setDisabled","setError","iconColor","overflow","clientSecret","signatures","createStripePaymentIntent","isDisabled","confirmCardPayment","payment_method","getElement","CardElement","handleChange","empty","marginTop","merchantDomainName","orderPaymentTimeout","WayforpayButton","merchantAccount","orderReference","orderDate","returnUrl","serviceUrl","createSignature","productName","productPrice","productCount","merchantSignature","setMerchantSignature","extractProduct","RobokassaButton","merchantLogin","invId","outSum","outSumCurrency","isTest","signature","setSignature","LiqpayButton","publicKey","resultUrl","serverUrl","public_key","order_id","encode","FiTruck","FaMoneyBillAlt","PAYMENT_PROVIDER_RENDERERS","cod","handleOrder","isModal","toggleModal","stripePromise","loadStripe","Elements","noop","contactInfo","firstName","lastName","isSupportedCurrency","createOrder","purchase_units","currency_code","breakdown","item_total","payer","given_name","surname","unit_amount","onApprove","details","capture","PayPalScriptProvider","clientId","PayPalButtons","layout","tagline","finalUrl","floor","random","Date","now","createWayforpaySignature","BACKEND_ENDPOINTS","getWayforpayCallback","test","createRobokassaSignature","getLiqPayCallback","getLiqPayResultUrl","createLiqpaySignature","other","handleModal","instructions","whiteSpace","Section","FeaturesBlockKind","Row","CONTACT_TYPES","mapLabels","OrderView","isPayNowModal","togglePayNowModal","isShowingCancelPrompt","showCancelPrompt","hideCancelPrompt","useBooleanHandler","contactsData","additionalData","f","flat","additional","mapper","finalizeLoading","handlePay","finalize","paymentMethod","cancelLoading","handleCancelOrder","cancel","finalized","isJustOneOnlinePaymentMethod","onlineElements","Renderer","feedback","getIdsByKind","usePageColors","usePageTheme","Divider","borderTop","IconButton","MinusIcon","PlusIcon","printPrice","OrderItem","onAdjust","borderColor","rawColor","isEditable","isMultiEditable","handleAdjust","delta","max","handleAdd","handleSubtract","handleRemove","Infinity","divider","knob","CloseIcon","row","quantityText","margin","fontWeight","subtotal","subTotal","OrderItemsList","useOrderProducts","retrieveFn","setResolved","productIds","serviceIds","Promise","all","warn","missing","FloatingActions","gap","padded","pullout","FormFooter","ShoppingCart","hasItems","handleModifyItems","Redirect","toStatus","CheckCircleIcon","CircleIcon","CheckableItem","contentClass","ListInput","groups","grid","choiceClassName","activeClassName","groupLabelClassName","fullWidthClassName","renderOption","grouped","group","set","a","b","indexA","renderOptions","choice","rounded","groupLabel","OptionValuePropType","PropTypes","oneOfType","string","number","bool","any","arrayOf","isRequired","onChoiceRef","PaymentStep","_immediate$","onAccept","removeCurrentOrderId","hasOnlineMethods","hasImmediateMethods","setSelected","optionStyles","found","_ref5","handleNext","_ref6","applyError","helpers","fieldName","setFieldError","CheckoutForm","form","update","handleAccept","valid","isEmpty","validateForm","Form","ordersRouting","finalizedOrders","features","shouldRenderPaymentStatus","timestamp","toLocaleDateString","removeOrderId","toHome","handleClosing","remove","renderContent","useViewOrder","successURL","hasSuccessUrl","resolvedStatus","event","FaRegFrown","FaRegSmileBeam","successMessage","SmartButton","link","minHeight","productRouting","_history$location$sta","collectionSlug","isMatchedBy","defaultCollectionId","getProduct","addUrl","encodeURIComponent","documentElement","start","is404","setProducts","PageProductsRouting","Provider","PLANS","entityOrId","flex","perView","forcePerView","slideClass","slideStyle","array","toArray","exceedsPerView","showPagination","hasPagination","slidesPerView","paginationOptions","BaseSwiper","resizeObserver","spaceBetween","SwiperSlide","slide","nonInteractive","require","SwiperCore","use","Pagination","Lazy","Navigation","Autoplay","EffectFade","EffectFlip","satisfies","versionString"],"mappings":"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","file":"6.44165537c097cd9b3331.js","sourcesContent":["const defaults = {\n    baseUrl: process.env.REACT_APP_USERPAGE_API_URL || '/api',\n};\n\n// const meta = document.querySelector('meta[name=\"csrf-token\"]');\n// const csrfToken = meta ? meta.content : undefined;\n\nconst ApiError = (status, statusText) => {\n    const error = Error(statusText);\n    error.status = status;\n    error.type = 'api';\n    return error;\n};\n\nfunction urlSearch(obj) {\n    if (typeof obj !== 'object') return '';\n    const arr = [];\n\n    for (let prop in obj) {\n        const val = obj[prop];\n        if (val !== null && val !== undefined) arr.push(`${prop}=${val}`);\n    }\n\n    return arr.length > 0 ? '?' + arr.join('&') : '';\n}\n\nconst ValidationError = (errors) => {\n    const error = new Error('Validation error');\n    error.type = 'validation';\n    error.errors = errors;\n    return error;\n};\n\nconst AuthorizationError = (message) => {\n    const error = new Error(message);\n    error.type = 'authorization';\n    return error;\n};\n\nfunction isAbsolute(endpoint) {\n    return endpoint.startsWith('http://') || endpoint.startsWith('https://');\n}\n\nexport class BaseApi {\n    constructor(options) {\n        this.options = { ...defaults, ...options };\n    }\n\n    get(endpoint) {\n        return this.request(endpoint);\n    }\n\n    post(endpoint, body) {\n        return this.request(endpoint, { method: 'POST', body });\n    }\n\n    put(endpoint, body) {\n        return this.request(endpoint, { method: 'PUT', body });\n    }\n\n    delete(endpoint) {\n        return this.request(endpoint, { method: 'DELETE' });\n    }\n\n    async request(endpoint, options) {\n        if (Array.isArray(endpoint)) {\n            let params;\n            [endpoint, params] = endpoint;\n            endpoint = endpoint + urlSearch(params);\n        }\n\n        if (!isAbsolute(endpoint)) endpoint = this.options.baseUrl + endpoint;\n\n        const { method, headers, body, ...rest } = { method: 'GET', ...options };\n\n        const response = await fetch(endpoint, {\n            method: ['PUT', 'DELETE'].includes(method.toUpperCase()) ? 'POST' : method,\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n                'X-HTTP-Method-Override': method.toUpperCase(),\n                // 'X-CSRF-Token': csrfToken,\n                ...headers,\n            },\n            body: body ? JSON.stringify(body) : undefined,\n            ...rest,\n        });\n\n        if (!response.ok) {\n            switch (response.status) {\n                case 400: {\n                    const { errors } = await response.json();\n                    throw ValidationError(errors);\n                }\n                case 401:\n                case 403:\n                    throw AuthorizationError(response.statusText);\n                default:\n                    throw ApiError(response.status, response.statusText);\n            }\n        }\n\n        if (response.status !== 204) {\n            return response.json();\n        }\n    }\n}\n\nexport default (options) => new BaseApi(options);\n","import { memoize } from 'lodash';\n\nconst CURRENCY_SYMBOL = new Map([['USD', 'en-US'], ['EUR', 'de-DE']]);\n\nconst resolveFormatter = memoize(\n    (locale, currency) => {\n        if (CURRENCY_SYMBOL.has(currency)) {\n            locale = CURRENCY_SYMBOL.get(currency);\n        }\n\n        return new Intl.NumberFormat(locale, {\n            style: 'currency',\n            currency: currency,\n            currencyDisplay: CURRENCY_SYMBOL.has(currency) ? 'symbol' : 'code',\n            minimumFractionDigits: 0,\n            useGrouping: false,\n        });\n    },\n    (l, c) => `${l}${c}`\n);\n\nconst formatPrice = (amount, currency, locale) => {\n    return resolveFormatter(locale, currency).format(amount);\n};\n\nexport default formatPrice;\n","import { BaseApi } from './baseApi';\n\nexport class FeedbackApi extends BaseApi {\n    submit(workspaceId, websiteId, payload) {\n        return this.post(`/workspaces/${workspaceId}/websites/${websiteId}/feedback`, payload);\n    }\n}\n\nexport default new FeedbackApi();\n","/**\n * @param {{ plan: string, status: string; paid: boolean }} billing Workspace billing\n * @param {boolean} [allowPastDue] Allow paid functionality if status is 'past_due'\n * @returns {boolean} True, if paid functionality access should be allowed\n */\nexport const isPaid = (billing, allowPastDue = false) => {\n    const { plan, status, paid } = billing;\n\n    if (plan && (status === 'trialing' || plan === 'basic' || plan === 'unlimited')) {\n        return true;\n    }\n\n    return paid || (allowPastDue && status === 'past_due');\n};\n\n/**\n * @param {{ plan, status, paid }} billing Workspace billing\n * @param {boolean} [allowPastDue] Allow paid functionality if status is 'past_due'\n * @returns {boolean} True, if paid functionality access should be forbidden\n */\nexport const isBasic = (billing, allowPastDue = false) => billing.plan === 'basic' || !isPaid(billing, allowPastDue);\n","export class AccessRequestError extends Error {\n    constructor(message, code, plan, permission, target) {\n        super(message);\n        this.status = 403;\n        this.code = code;\n        this.plan = plan;\n        this.permission = permission;\n        this.target = target;\n    }\n}\n","import { isPaid } from './isPaid';\nimport { AccessRequestError } from './permissions';\n\nexport class AccessRequestErrorBuilder {\n    constructor(permissions, context) {\n        this.context = context;\n        this.permissions = permissions;\n        this.billing = this.workspace.billing || {};\n        this.plan = this.billing.plan;\n        this.assumePaid = isPaid(this.billing, context.allowPastDue);\n        this.subject = null;\n        this.permission = null;\n    }\n\n    get workspace() {\n        return this.context.workspace || this.context;\n    }\n\n    setPermission(permission) {\n        this.permission = permission;\n\n        return this;\n    }\n\n    setSubject(subject) {\n        this.subject = subject;\n\n        return this;\n    }\n\n    build() {\n        const { context, plan, permission, subject } = this;\n        const paid = this.assumePaid || this.permissions.isGranted(context, permission, subject, 'basic');\n        const granted = this.permissions.isGranted(context, permission, subject);\n        const upgrade = granted ? plan : this.permissions.lookupUpgrade(context, permission, subject);\n\n        if (granted && paid) {\n            return null;\n        }\n\n        const shouldPay = granted && !paid;\n\n        if (shouldPay) {\n            return new AccessRequestError(`Pay for ${plan}`, 'unpaid', plan, permission);\n        }\n\n        if (upgrade) {\n            return new AccessRequestError(`Upgrade to ${upgrade}`, 'upgrade', plan, permission, upgrade);\n        }\n\n        return new AccessRequestError('Access forbidden', 'forbidden', plan, permission);\n    }\n}\n","import memoize from 'memoize-one';\nimport plans from '@mssgme/plans';\n\nexport const getPlans = () => {\n    return Object.values(plans);\n};\n\nconst getId = (plan) => plan.id;\nconst isPaid = (plan) => plan.paddle || plan.liqpay;\nconst isUnpaid = (plan) => !plan.paddle && !plan.liqpay;\nconst isDeprecated = (plan) => plan.deprecated;\nconst isPublished = (plan) => plan.published;\n\nexport const getPlanTypes = memoize(() => {\n    const plans = getPlans();\n    const paid = plans.filter(isPaid).map(getId);\n    const unpaid = ['unlimited', ...plans.filter(isUnpaid).map(getId)];\n    const deprecated = plans.filter(isDeprecated).map(getId);\n    const actual = plans.filter(isPublished).map(getId);\n    const upgradeable = ['basic', ...actual];\n\n    return {\n        BASIC: 'basic',\n        UNLIMITED: 'unlimited',\n        UNPAID: unpaid,\n        PAID: paid,\n        UPGRADEABLE: upgradeable,\n        DEPRECATED: deprecated,\n        ACTUAL: actual,\n    };\n});\n\nexport const getPlanIds = () => {\n    return getPlans().map((plan) => plan.id);\n};\n\nexport const getPlanDefinition = (plan) => {\n    return plan && getPlans().find((definition) => definition.id === plan);\n};\n\nexport const getPlanAllowedQuantity = (plan, quantity) => {\n    const definition = getPlanDefinition(plan);\n    const fixed = definition.fixedQuantity;\n\n    if (fixed) {\n        if (Array.isArray(fixed)) {\n            const [min, max] = fixed.map(Number);\n\n            return Math.max(min, Math.min(quantity || 1, max));\n        }\n\n        return +fixed;\n    }\n\n    return quantity;\n};\n","import { memoize, get } from 'lodash';\n\nimport { toId } from '../../helpers';\n\nexport const ACTION_CREATE = 'create';\nexport const ACTION_DELETE = 'delete';\nexport const ACTION_VIEW = 'view';\nexport const ACTION_EDIT = 'edit';\nexport const ACTION_ANY = '?';\nexport const ACTION_EVERY = '*';\nexport const ACTION_ALL = [ACTION_CREATE, ACTION_VIEW, ACTION_EDIT, ACTION_DELETE];\n\nexport const ACTION_IDS = [ACTION_CREATE, ACTION_VIEW, ACTION_EDIT, ACTION_DELETE, ACTION_EVERY, ACTION_ANY];\n\nconst actionsSet = new Set(ACTION_IDS);\n\n/**\n * @param {string} permission Permission string to parse\n * @returns {{resource: string, actions: string[]}} Parsed resource and actions list\n */\nexport const parse = memoize((permission) => {\n    const [resource, rawActions = ACTION_EVERY] = permission.split(':');\n    const actions = new Set();\n\n    if (rawActions) {\n        for (const action of rawActions.split(',')) {\n            if (action === ACTION_EVERY) {\n                for (const name of ACTION_ALL) {\n                    actions.add(name);\n                }\n            } else if (actionsSet.has(action)) {\n                actions.add(action);\n            } else {\n                throw new Error(`Unknown action \"${action}\"`);\n            }\n        }\n    } else {\n        for (const name of ACTION_ALL) {\n            actions.add(name);\n        }\n    }\n\n    return {\n        resource,\n        actions: [...actions],\n    };\n});\n\nexport class AccessPermissionRequest {\n    constructor(context, subject, role, resourceOrPermission, actions) {\n        this.context = context;\n        this.workspace = context.workspace || context;\n        this.subject = subject;\n        this.role = role || this.workspace?.billing?.plan;\n\n        if (actions) {\n            this.resource = resourceOrPermission;\n            this.actions = actions;\n        } else {\n            this.fill(resourceOrPermission);\n        }\n    }\n\n    get description() {\n        return `[@${this.role} ${this.resource}${this.isEvery() ? '' : ':' + this.actions.join(',')}]${\n            this.subject ? ' @ ' + JSON.stringify(this.subject) : ''\n        }`;\n    }\n\n    isBy(user) {\n        return toId(this.workspace?.owner) === toId(user);\n    }\n\n    get(path, def) {\n        return get(this.context, path, def);\n    }\n\n    /**\n     * @param {string} permission Permission string to parse\n     * @returns {this} `this`\n     */\n    fill(permission) {\n        return Object.assign(this, parse(permission));\n    }\n\n    /**\n     * @param {string} permission Permission string to parse\n     * @returns {boolean} `True` if this request matches `permission`\n     */\n    match(permission) {\n        const { resource, actions } = parse(permission);\n\n        return this.on(resource) && this.isEvery(actions);\n    }\n\n    /**\n     * @param {string[]} actions Actions list\n     * @returns {AccessPermissionRequest} Copy of this request, but matching only provided `actions`\n     */\n    only(actions) {\n        return new AccessPermissionRequest(this.workspace, this.subject, this.role, this.resource, actions);\n    }\n\n    on(resource) {\n        return this.resource === resource;\n    }\n\n    includes(action) {\n        return this.actions.includes(action);\n    }\n\n    is(action) {\n        return this.actions.length === 1 && this.actions[0] === action;\n    }\n\n    isAny() {\n        return this.actions.includes(ACTION_ANY);\n    }\n\n    isEvery(actions = ACTION_ALL) {\n        return actions.every((action) => this.actions.includes(action));\n    }\n}\n","import { versionCheck } from '../../../helpers';\n\nexport class Voter {\n    /**\n     * @param {AccessPermissionRequest} request ACL request\n     * @returns {boolean} Truthy if this voter supports this request\n     */\n    // eslint-disable-next-line no-unused-vars\n    supports(request) {\n        return false;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request ACL request\n     * @param {string} version Semver version matcher (e.g. `'>2.0'`, `'^5.1.x'`, `'~2.11||<3.1.0-alpha.1'`)\n     * @returns {boolean} Returns <code>true</code> if semver `version` is matches request.\n     */\n    supportsVersion(request, version) {\n        return versionCheck(request.workspace.projectVersion, version);\n    }\n\n    // eslint-disable-next-line jsdoc/require-returns-check\n    /**\n     * @param {AccessPermissionRequest} request ACL request\n     * @returns {boolean|undefined|void} Returns <code>undefined</code> if this voter abstains from decision,\n     * <code>true</code> if access should be granted, <code>false</code> - if denied.\n     */\n    // eslint-disable-next-line no-unused-vars\n    vote(request) {}\n}\n","import { ACTION_CREATE, ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class WebsitesVoter extends Voter {\n    static getLimitByRole(role) {\n        switch (role) {\n            case 'basic':\n            case 'start400':\n            case 'pro400':\n                return 1;\n            case 'business400':\n                return 10;\n            default:\n                return 3;\n        }\n    }\n\n    supports(request) {\n        return request.resource === 'websites';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE) && !this.canCreate(request)) {\n            return false;\n        }\n\n        if (request.role === 'basic') {\n            if (request.includes(ACTION_EDIT) && !this.canEditBasic(request)) {\n                return false;\n            }\n        }\n\n        //\n        return true;\n    }\n\n    canCreate(request) {\n        const websitesCount = request.workspace.quantities.websites || 0;\n        const roleLimit = WebsitesVoter.getLimitByRole(request.role);\n\n        return websitesCount < roleLimit;\n    }\n\n    canEditBasic(request) {\n        const values = request.subject;\n\n        if (!values) {\n            return true;\n        }\n\n        // if (!values.branding) {\n        //     return false;\n        // }\n\n        // if (values.seo?.title || values.seo?.description) {\n        //     return false;\n        // }\n\n        // if (values.tracking?.google || values.tracking?.facebook || values.tracking?.yandex) {\n        //     return false;\n        // }\n\n        //\n        return true;\n    }\n}\n","import { ACTION_CREATE } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PagesVoter extends Voter {\n    static getLimitByRole(role) {\n        switch (role) {\n            case 'basic':\n                return 1;\n            case 'business400':\n                return 50;\n            case 'start400':\n            case 'pro400':\n            default:\n                return 10;\n        }\n    }\n\n    supports(request) {\n        return request.resource === 'pages';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE) && !this.canCreate(request)) {\n            return false;\n        }\n    }\n\n    canCreate(request) {\n        const pagesCount = request.get('website.counters.pages', 1);\n        const roleLimit = PagesVoter.getLimitByRole(request.role);\n\n        return pagesCount < roleLimit;\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PageBlocksVoter extends Voter {\n    /**\n     * @param {ACLVoter} acl ACL voter instance\n     */\n    constructor(acl) {\n        super();\n        this.acl = acl;\n    }\n\n    supports(request) {\n        return request.resource === 'page-blocks';\n    }\n\n    vote(request) {\n        if ((request.includes(ACTION_CREATE) || request.includes(ACTION_EDIT)) && !this.canEdit(request)) {\n            return false;\n        }\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request Request in question\n     * @returns {boolean} True if request is granted\n     */\n    canEdit(request) {\n        if (!request.subject) {\n            return true;\n        }\n\n        const kind = request.subject.kind;\n\n        return this.acl.grantsInArrayPayload(request, (kindOrDescriptor) => {\n            if (typeof kindOrDescriptor === 'string') {\n                return kindOrDescriptor === kind;\n            }\n\n            if (kindOrDescriptor.kind !== kind) {\n                return false;\n            }\n\n            return this.supportsVersion(request, kindOrDescriptor.version);\n        });\n    }\n}\n","import { ACTION_CREATE, ACTION_VIEW, ACTION_EDIT, ACTION_DELETE, ACTION_ANY, ACTION_ALL } from '../request';\n\nconst TOTAL_ACTIONS = ACTION_ALL.length;\nconst ALL_ACCESS = {\n    [ACTION_CREATE]: true,\n    [ACTION_VIEW]: true,\n    [ACTION_EDIT]: true,\n    [ACTION_DELETE]: true,\n};\n\nexport class Resource {\n    /**\n     * @param {string} name\n     * @param {{[string]: boolean}} access\n     */\n    constructor(name, access) {\n        this.name = name;\n        this.access = access || { ...ALL_ACCESS };\n        this._any = null;\n    }\n\n    /**\n     * @param {Resource} resource\n     * @returns {this}\n     */\n    merge(resource) {\n        Object.assign(this.access, resource.access);\n        this._any = null;\n\n        return this;\n    }\n\n    get grantsAny() {\n        if (this._any === null) {\n            let total = 0;\n\n            for (const value of Object.values(this.access)) {\n                total++;\n\n                if (value) {\n                    this._any = true;\n\n                    return true;\n                }\n            }\n\n            this._any = total === TOTAL_ACTIONS ? false : undefined;\n        }\n\n        return this._any;\n    }\n\n    /**\n     * @param {string} action\n     * @returns {boolean}\n     */\n    isGranted(action) {\n        return action === ACTION_ANY ? this.grantsAny : this.access[action];\n    }\n}\n","import { ACTION_ANY } from '../request';\n\nexport class Role {\n    /**\n     * @param {string} name\n     * @param {Role|null} [parent]\n     */\n    constructor(name, parent) {\n        this.name = name;\n        this.parent = parent;\n        this.resources = [];\n    }\n\n    /**\n     * @returns {string[]}\n     */\n    getResourceIds() {\n        return this.resources.map((resource) => resource.name);\n    }\n\n    /**\n     * @param {Resource} resource\n     * @returns {Resource}\n     */\n    addResource(resource) {\n        const existing = this.getResource(resource.name);\n\n        if (existing) {\n            return existing.merge(resource);\n        }\n\n        this.resources.push(resource);\n\n        return resource;\n    }\n\n    /**\n     * @param {string} name\n     * @returns {Resource}\n     */\n    getResource(name) {\n        return this.resources.find((resource) => resource.name === name);\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request Permission request descriptor\n     * @param {boolean} [strict] Check only this role (no parent role checks)\n     * @returns {boolean} True if granted\n     */\n    isGranted(request, strict = false) {\n        let examine;\n        const resource = this.getResource(request.resource);\n\n        if (resource) {\n            let granted;\n\n            if (request.isAny()) {\n                granted = resource.isGranted(ACTION_ANY);\n\n                if (granted !== undefined) {\n                    return granted;\n                }\n            } else {\n                examine = new Set(request.actions);\n\n                for (const action of request.actions) {\n                    const got = resource.isGranted(action);\n\n                    if (got === false) {\n                        return false;\n                    }\n\n                    if (got === true) {\n                        examine.delete(action);\n                    }\n                }\n\n                if (examine.size) {\n                    request = request.only([...examine]);\n                } else {\n                    return true;\n                }\n            }\n        }\n\n        return (!strict && this.parent?.isGranted(request)) || false;\n    }\n}\n","export class ACL {\n    constructor() {\n        this.roles = [];\n    }\n\n    /**\n     * @returns {string[]}\n     */\n    getRoleIds() {\n        return this.roles.map((role) => role.name);\n    }\n\n    /**\n     * @returns {string[]}\n     */\n    getRuleIds() {\n        return [...new Set([].concat(...this.roles.map((role) => role.getResourceIds())))];\n    }\n\n    /**\n     * @param {Role} role\n     * @returns {Role}\n     */\n    addRole(role) {\n        if (this.getRole(role.name)) {\n            throw new Error(`Multiple definitions of \"${role.name}\" role`);\n        }\n\n        this.roles.push(role);\n\n        return role;\n    }\n\n    /**\n     * @param {string} name\n     * @returns {Role}\n     */\n    getRole(name) {\n        return this.roles.find((layer) => layer.name === name);\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    isGranted(request) {\n        const role = this.getRole(request.role);\n\n        if (!role) {\n            return false;\n        }\n\n        return role.isGranted(request);\n    }\n}\n","import { parse } from '../request';\nimport { Resource } from './resource';\nimport { Role } from './role';\nimport { ACL } from './acl';\n\nconst parseRuleDefinition = (value, granted) => {\n    if (typeof value === 'object') {\n        const { rule, ...payload } = value;\n        const parsed = parseRuleDefinition(rule, granted);\n\n        parsed.payload = payload;\n\n        return parsed;\n    }\n\n    const { resource, actions } = parse(value);\n\n    return new Resource(\n        resource,\n        actions.reduce((acc, action) => ((acc[action] = granted), acc), {})\n    );\n};\n\nexport const loadACL = (definitions) => {\n    const acl = new ACL();\n\n    for (const { id, rules } of definitions) {\n        const { extend, grant, reject } = rules;\n        const parent = extend && acl.getRole(extend);\n        const role = acl.addRole(new Role(id, parent));\n\n        for (const [rules, granted] of [[grant, true], [reject, false]]) {\n            if (rules) {\n                for (const rule of rules) {\n                    role.addResource(parseRuleDefinition(rule, granted));\n                }\n            }\n        }\n    }\n\n    return acl;\n};\n","import { getPlans } from '../../plans';\n\nimport { Permissions } from './permissions';\nimport {\n    ACLVoter,\n    CollectionsVoter,\n    MessengersVoter,\n    PageBlocksPublishVoter,\n    PageBlocksVoter,\n    PageStylingVoter,\n    PagesVoter,\n    PagePublishVoter,\n    PageTemplatesVoter,\n    PageThemesVoter,\n    ProductsVoter,\n    SubscriptionFormFieldVoter,\n    UnlimitedPlanVoter,\n    VersionVoter,\n    WebsitesVoter,\n} from './voters/impl';\nimport { loadACL } from './acl/loader';\n\nexport { AccessPermissionRequest } from './request';\nexport { AccessRequestError } from './requestError';\nexport { WebsitesVoter };\n\nexport const aclVoter = new ACLVoter(() => loadACL(getPlans()));\n\nexport const permissions = new Permissions(aclVoter, [\n    new UnlimitedPlanVoter(),\n    new VersionVoter({\n        'ru-integrations': '<5.14',\n    }),\n    // new LinksVoter(),\n    // new DesignVoter(),\n    // new ProfileVoter(),\n    // new ReviewsVoter(),\n    new CollectionsVoter(),\n    new MessengersVoter(),\n    new ProductsVoter(),\n    new WebsitesVoter(),\n    new PagesVoter(),\n    new PagePublishVoter(),\n    new PageTemplatesVoter(),\n    new PageThemesVoter(aclVoter),\n    new PageStylingVoter(aclVoter),\n    new PageBlocksVoter(aclVoter),\n    new PageBlocksPublishVoter(aclVoter),\n    new SubscriptionFormFieldVoter(),\n]);\n","import { Voter } from '../voter';\n\nexport class ACLVoter extends Voter {\n    constructor(loader) {\n        super();\n        this.loader = loader;\n    }\n\n    /**\n     * @returns {ACL} Loaded ACL table\n     */\n    get acl() {\n        if (!this._acl) {\n            this._acl = this.loader();\n        }\n\n        return this._acl;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request Request in question\n     * @returns {boolean} True if request supported by this voter\n     */\n    // eslint-disable-next-line no-unused-vars\n    supports(request) {\n        return true;\n    }\n\n    vote(request) {\n        return this.acl.isGranted(request);\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request Request in question\n     * @param {string|function(*): boolean} matches Permission matching predicate\n     * @returns {boolean} <code>True</code> - if grant status given, else <code>False</code>\n     */\n    grantsInArrayPayload(request, matches) {\n        const predicate = typeof matches === 'function' ? matches : (item) => item === matches;\n        let role = this.acl.getRole(request.role);\n\n        while (role) {\n            const resource = role.getResource(request.resource);\n\n            if (resource) {\n                if (resource.payload) {\n                    const { grant, reject } = resource.payload;\n\n                    if (grant && (grant === '*' || grant.some(predicate))) {\n                        return true;\n                    }\n\n                    if (reject && (reject === '*' || reject.some(predicate))) {\n                        return false;\n                    }\n                } else if (role.isGranted(request, true)) {\n                    return true;\n                }\n            }\n\n            role = role.parent;\n        }\n\n        return false;\n    }\n}\n","import { getPlanTypes } from '../../plans';\n\nimport { AccessPermissionRequest } from './request';\nimport { Voters } from './voters';\n\nexport class Permissions extends Voters {\n    constructor(aclVoter, voters) {\n        super([...voters, aclVoter]);\n        this.aclVoter = aclVoter;\n    }\n\n    get acl() {\n        return this.aclVoter.acl;\n    }\n\n    /**\n     *  Query the permissions for the specified workspace member to perform actions, possibly against specific target.\n     *\n     * @param {* | { billing: * }} context Queried workspace\n     * @param {string} permission Permission string (resource[:(action|?|*)])\n     * @param {*} [subject] Target, against which the query is executed\n     * @param {string} [role] User role (tariff plan)\n     * @returns {boolean} Result of querying\n     */\n    isGranted(context, permission, subject, role) {\n        return this.vote(new AccessPermissionRequest(context, subject, role, permission));\n    }\n\n    /**\n     * @param {* | { billing: * }} context Queried workspace entity descriptor\n     * @param {string} permission Permission string (resource[:(action|?|*)])\n     * @param {*} [subject] Target, against which the query is executed\n     * @returns {string|void} Plan ID if upgrade found\n     */\n    lookupUpgrade(context, permission, subject) {\n        const { UPGRADEABLE } = getPlanTypes();\n        const roles = this.acl.getRoleIds();\n        const workspace = context.workspace || context;\n        const plan = workspace.billing?.plan;\n        let current = true;\n        let index = roles.indexOf(plan);\n        let role;\n\n        while ((role = roles[index++])) {\n            if (!(current || UPGRADEABLE.includes(role))) {\n                continue;\n            }\n\n            const granted = this.vote(new AccessPermissionRequest(context, subject, role, permission));\n\n            if (granted) {\n                return role;\n            }\n\n            current = false;\n        }\n    }\n}\n","/**\n * @property {Voter[]} voters\n */\nexport class Voters {\n    constructor(voters = []) {\n        this.voters = voters;\n    }\n\n    /**\n     * @param {Voter} voter\n     */\n    addVoter(voter) {\n        this.voters.push(voter);\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    vote(request) {\n        for (const voter of this.voters) {\n            if (!voter.supports(request)) {\n                continue;\n            }\n\n            const granted = voter.vote(request);\n\n            if (granted !== undefined) {\n                return granted;\n            }\n        }\n\n        return true;\n    }\n}\n","import { Voter } from '../voter';\n\nexport class UnlimitedPlanVoter extends Voter {\n    supports(request) {\n        return request.role === 'unlimited' && request.resource !== 'page-templates';\n    }\n\n    vote() {\n        return true;\n    }\n}\n","import { Voter } from '../voter';\n\nexport class VersionVoter extends Voter {\n    constructor(constraints) {\n        super();\n        this.constraints = constraints;\n    }\n\n    supports(request) {\n        return !!this.constraints[request.resource];\n    }\n\n    vote(request) {\n        if (!this.supportsVersion(request, this.constraints[request.resource])) {\n            return false;\n        }\n\n        // returning undefined here means 'abstain' from voting\n        // so, we restrict permission if version check fails by returning 'false',\n        // and 'abstain' from voting (essentially allowing the other voters to decide) otherwise by returning 'undefined'\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT, ACTION_DELETE } from '../../request';\nimport { Voter } from '../voter';\n\nexport class CollectionsVoter extends Voter {\n    supports(request) {\n        return request.resource === 'collections';\n    }\n\n    vote(request) {\n        if (request.role === 'basic') {\n            if (request.includes(ACTION_CREATE)) {\n                return false;\n            }\n\n            if (request.includes(ACTION_EDIT)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_EDIT)) {\n            if (!this.canEdit(request)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_DELETE)) {\n            if (!this.canDelete(request)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canEdit(request) {\n        return request.subject && !request.subject.default;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canDelete(request) {\n        return !request.subject.default;\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class MessengersVoter extends Voter {\n    supports(request) {\n        return request.role === 'basic' && request.resource === 'messengers' && this.supportsVersion(request, '>=2.11');\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE)) {\n            if (!this.canEdit(request)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_EDIT)) {\n            if (!this.canEdit(request)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    canEdit({ workspace, subject }) {\n        if (!subject) {\n            return true;\n        }\n\n        const enabled = workspace.card.messengers.find((m) => m.enabled);\n\n        return !(enabled && enabled.messenger !== subject.messenger);\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class ProductsVoter extends Voter {\n    supports(request) {\n        return request.role === 'basic' && request.resource === 'products';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE)) {\n            if (!this.canCreate(request)) {\n                return false;\n            }\n        }\n\n        if (request.includes(ACTION_EDIT)) {\n            if (!this.canEdit(request)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canCreate(request) {\n        return this.canEdit(request);\n    }\n\n    canEdit({ subject, workspace }) {\n        if (subject?.slug) {\n            return true;\n        }\n\n        return workspace.card.products.count < 10;\n    }\n}\n","import { PagesVoter } from './pages';\nimport { toId } from '../../../../helpers';\n\nexport class PagePublishVoter extends PagesVoter {\n    supports(request) {\n        return request.resource === 'page-publish';\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    vote(request) {\n        const roleLimit = PagesVoter.getLimitByRole(request.role);\n        const pages = request.get('website.pages', []);\n        const subject = request.subject;\n\n        let allowed = roleLimit;\n\n        for (const page of pages) {\n            if (subject && toId(subject) === toId(page)) {\n                return true;\n            }\n\n            if (page.enabled) {\n                allowed--;\n            }\n\n            if (allowed <= 0) {\n                return false;\n            }\n        }\n    }\n}\n","import { ACTION_CREATE, ACTION_EDIT, ACTION_DELETE, ACTION_VIEW } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PageTemplatesVoter extends Voter {\n    supports(request) {\n        return request.resource === 'page-templates';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE) && !this.canCreate(request)) {\n            return false;\n        }\n\n        if (request.includes(ACTION_EDIT) && !this.canEdit(request)) {\n            return false;\n        }\n\n        if (request.includes(ACTION_DELETE) && !this.canDelete(request)) {\n            return false;\n        }\n\n        if (request.includes(ACTION_VIEW) && !this.canView(request)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canCreate(request) {\n        const count = request.workspace.quantities.templates || 0;\n\n        switch (request.role) {\n            case 'unlimited':\n                return count < 20;\n\n            default:\n                return false;\n        }\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canDelete(request) {\n        return this.canEdit(request);\n    }\n\n    canEdit(request) {\n        if (!request.subject?._id) {\n            return true;\n        }\n\n        return request.isBy(request.subject.author);\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canView(request) {\n        if (!request.subject?._id || request.subject.public) {\n            return true;\n        }\n\n        return request.isBy(request.subject.author);\n    }\n}\n","import { ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PageThemesVoter extends Voter {\n    /**\n     * @param {ACLVoter} acl ACL voter instance\n     */\n    constructor(acl) {\n        super();\n        this.acl = acl;\n    }\n\n    supports(request) {\n        return request.resource === 'page-themes';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_EDIT) && !this.canEdit(request)) {\n            return false;\n        }\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canEdit(request) {\n        return request.subject ? this.acl.grantsInArrayPayload(request, request.subject.colorId) : true;\n    }\n}\n","import { ACTION_EDIT } from '../../request';\nimport { Voter } from '../voter';\n\nexport class PageStylingVoter extends Voter {\n    /**\n     * @param {ACLVoter} acl ACL voter instance\n     */\n    constructor(acl) {\n        super();\n        this.acl = acl;\n    }\n\n    supports(request) {\n        return request.resource === 'page-styling';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_EDIT) && !this.canEdit(request)) {\n            return false;\n        }\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canEdit(request) {\n        return request.subject ? this.acl.grantsInArrayPayload(request, request.subject.type) : true;\n    }\n}\n","import { PageBlocksVoter } from './blocks';\n\nexport class PageBlocksPublishVoter extends PageBlocksVoter {\n    supports(request) {\n        return request.resource === 'page-blocks-publish';\n    }\n}\n","import { ACTION_CREATE } from '../../request';\nimport { Voter } from '../voter';\n\nexport class SubscriptionFormFieldVoter extends Voter {\n    supports(request) {\n        return request.role === 'basic' && request.resource === 'subscription-form-field';\n    }\n\n    vote(request) {\n        if (request.includes(ACTION_CREATE) && !this.canCreate(request)) {\n            return false;\n        }\n    }\n\n    /**\n     * @param {AccessPermissionRequest} request\n     * @returns {boolean}\n     */\n    canCreate({ subject }) {\n        return !subject?.items?.some(({ type }) => type !== 'email');\n    }\n}\n","import invariant from 'tiny-invariant';\n\nimport { AccessRequestErrorBuilder } from './errorBuilder';\nimport { permissions } from './permissions';\n\n/**\n * @param {{ workspace: *; allowPastDue?: boolean }} context Restriction context\n * @param {string} permission Rule to check in the format \"<resource name>\" [ \":\" (\"*\" | \"?\" | \"<action name>\") ]\n * @param {* | ((error: AccessRequestError|undefined) => void)} [subjectOrCallback] Restriction subject\n * @param {(error: AccessRequestError|undefined, subject?: *) => void|false} [callback] If specified, callback would be called with the check error as first arg\n * @returns {AccessRequestError|null} Error if check fails\n */\nexport const checkRestrictions = (context, permission, subjectOrCallback, callback) => {\n    invariant(!Array.isArray(permission), `Permission should not be an array, got \"${permission}\"`);\n\n    let subject = subjectOrCallback;\n\n    if (typeof subject === 'function') {\n        callback = subject;\n        subject = null;\n    }\n\n    const builder = new AccessRequestErrorBuilder(permissions, context).setPermission(permission);\n    let error = null;\n\n    if (subject && Array.isArray(subject)) {\n        for (const item of subject) {\n            const itemError = builder.setSubject(item).build();\n\n            if (callback) {\n                if (false !== callback(itemError, item)) {\n                    error = itemError;\n                    break;\n                }\n            } else if (itemError) {\n                return itemError;\n            }\n        }\n\n        if (callback) {\n            callback(error);\n        }\n    } else {\n        error = builder.setSubject(subject).build();\n\n        if (callback) {\n            callback(error, subject);\n        }\n    }\n\n    return error;\n};\n\nexport const checkRestrictionsOrThrow = (context, permission, subject) => {\n    const error = checkRestrictions(context, permission, subject);\n\n    if (error) {\n        throw error;\n    }\n};\n","import deepEqual from 'fast-deep-equal';\nimport { useEffect, useRef, useState } from 'react';\nimport { EventEmitter } from 'events';\n\nimport { checkRestrictions } from '@mssgme/shared';\nimport { useWorkspace } from './useWorkspace';\nimport { useEventCallback } from './useEventCallback';\n\n// TODO: refactor, use redux, context or useSyncExternalStore instead of EventEmitter\nexport function createHooks() {\n    const ee = new EventEmitter();\n\n    ee.setMaxListeners(100);\n\n    const show = (...args) => ee.emit('show', ...args);\n    const hide = () => ee.emit('hide');\n\n    function useWarning() {\n        const [state, setState] = useState({ isPresented: false, warning: null });\n\n        useEffect(() => {\n            const onShow = (warning) => setState({ isPresented: true, warning });\n            const onHide = () => setState((prevState) => ({ ...prevState, isPresented: false }));\n\n            ee.on('show', onShow);\n            ee.on('hide', onHide);\n\n            return () => {\n                ee.removeListener('show', onShow);\n                ee.removeListener('hide', onHide);\n            };\n        }, []);\n\n        return {\n            ...state,\n            show,\n            hide,\n        };\n    }\n\n    function useRestriction(rule, subject, context) {\n        const workspace = useWorkspace();\n        const ref = useRef(null);\n        const [warning, setWarning] = useState(null);\n\n        const checkRule = useEventCallback((workspace, rule, subject, context) => {\n            if (rule) {\n                setWarning(checkRestrictions({ workspace, ...context }, rule, subject));\n            } else if (warning) {\n                setWarning(null);\n            }\n        });\n        const showWarning = useEventCallback((w) => show(w || warning));\n        const clearWarning = useEventCallback(() => setWarning(null));\n        const handleBlockedEvent = useEventCallback((e) => {\n            if (e?.preventDefault) {\n                e.preventDefault();\n                e.stopPropagation();\n            }\n\n            show(warning);\n        });\n\n        const isChanged = !(\n            ref.current &&\n            workspace === ref.current[0] &&\n            rule === ref.current[1] &&\n            deepEqual(subject, ref.current[2]) &&\n            deepEqual(context, ref.current[3])\n        );\n\n        if (isChanged) {\n            ref.current = [workspace, rule, subject, context];\n        }\n\n        // useDeepEqualEffect from 'react-use' spits warnings on non-object dependencies comparison\n        useEffect(() => checkRule(...ref.current), ref.current);\n\n        return {\n            warning,\n            hasWarning: !!warning,\n            showWarning,\n            clearWarning,\n            hideWarning: hide,\n            handleBlockedEvent: warning ? handleBlockedEvent : undefined,\n        };\n    }\n\n    return { useWarning, useRestriction };\n}\n\nconst { useWarning, useRestriction } = createHooks();\n\nexport { useWarning, useRestriction };\n","import { useSelector } from 'react-redux';\n\nexport function useWorkspace() {\n    return useSelector((state) => state.workspace);\n}\n","import { useCallback, useMemo, useReducer, useRef } from 'react';\nimport { useMountedState } from 'react-use';\nimport { get } from 'lodash';\n\nimport { ValidationError, ForbiddenError } from '@mssgme/api-client';\nimport { useWarning } from './useRestrictions';\n\nlet lastRequestId = 0;\n\nconst defaultState = {\n    status: 'idle',\n    error: null,\n    result: null,\n};\n\nconst initialState = {\n    ...defaultState,\n    requestId: -1,\n    requestCount: 0,\n};\n\nfunction reducer(state, { type, requestId, ...rest }) {\n    if (state.requestId > requestId) {\n        return state;\n    }\n\n    switch (type) {\n        case 'pending':\n            return { ...state, ...defaultState, requestId, status: 'pending', requestCount: state.requestCount + 1 };\n        case 'fulfilled':\n            return { ...state, ...defaultState, requestId, status: 'fulfilled', result: rest.result };\n        case 'rejected':\n            return { ...state, ...defaultState, requestId, status: 'rejected', error: rest.error };\n        default:\n            throw new Error();\n    }\n}\n\n/**\n * @template {*} R\n * @template {function(): Promise<R>} T\n * @param {T} fn Traced callback\n * @param {*[]} deps Callback dependencies\n * @returns {{\n *  pending: true,\n *  run: T,\n *  status: 'pending',\n * } | {\n *  fulfilled: true,\n *  result: R,\n *  run: T,\n *  status: 'fulfilled',\n * } | {\n *  rejected: true,\n *  error: Error,\n *  validationErrors: *,\n *  getValidationError: function(string): *,\n *  run: T,\n *  status: 'rejected',\n * } | {\n *  idle: true,\n *  run: T,\n *  status: 'idle',\n * }} Fetcher descriptor\n */\nexport function useFetching(fn, deps = []) {\n    const ref = useRef(fn);\n    const isMounted = useMountedState();\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const { show } = useWarning();\n\n    ref.current = fn;\n\n    const run = useCallback(async (...args) => {\n        function safeDispatch(...args) {\n            if (isMounted()) {\n                dispatch(...args);\n            }\n        }\n\n        const requestId = lastRequestId++;\n\n        safeDispatch({ type: 'pending', requestId });\n\n        try {\n            const result = await ref.current(...args);\n            safeDispatch({ type: 'fulfilled', requestId, result });\n        } catch (error) {\n            safeDispatch({ type: 'rejected', requestId, error });\n\n            // can be handled explicitly in business logic, otherwise handle automatically\n            if (ForbiddenError.isPermissionBlock(error)) {\n                show(error);\n            }\n        }\n    }, deps);\n\n    return useMemo(() => {\n        const validationErrors = ValidationError.is(state.error) ? state.error.errors : {};\n        const getValidationError = (name) => get(validationErrors, name);\n\n        return {\n            ...state,\n            validationErrors,\n            getValidationError,\n            run,\n            idle: state.status === 'idle',\n            rejected: state.status === 'rejected',\n            fulfilled: state.status === 'fulfilled',\n            pending: state.status === 'pending',\n        };\n    }, [state, run]);\n}\n","import { useEffect } from 'react';\nimport { useUpdateEffect } from 'react-use';\nimport { useFormik } from 'formik';\nimport { get } from 'lodash';\n\nimport { useFetching } from '@mssgme/hooks';\n\n/**\n * @template {object} FormValues\n * @typedef {(values: FormValues, formik: ReturnType<typeof useFormik>) => void} OnChangeMethod\n * @typedef {(values: FormValues, helpers: FormikHelpers<FormValues>) => (void | Promise<*>)} SubmitMethod\n * @param {import('formik').FormikConfig<Values>} config Config\n * @param {OnChangeMethod} config.onChange Change listener\n * @param {SubmitMethod} config.onSubmit Submit listener\n * @param {string} [config.errorsPrefix] If validation errors, generated by submit listener, would be nested under `errorsPrefix` path\n * @param {boolean} [config.resetOnSuccess=false] Reset form on successful submit\n * @returns {*} Enhanced Formik context\n */\nexport default function useEnhancedFormik({\n    onChange,\n    onSubmit,\n    errorsPrefix,\n    resetOnSuccess = false,\n    ...rest\n}) {\n    const submit = useFetching(onSubmit);\n\n    const formik = useFormik({\n        onSubmit: submit.run,\n        ...rest,\n    });\n\n    const validationErrors = errorsPrefix ? get(submit.validationErrors, errorsPrefix) : submit.validationErrors;\n\n    useEffect(() => {\n        if (submit.fulfilled) {\n            formik.setSubmitting(false);\n            formik.setStatus('success');\n            if (resetOnSuccess) formik.resetForm();\n        }\n    }, [submit.fulfilled]);\n\n    useEffect(() => {\n        if (submit.rejected) {\n            // TODO: handle errors in sentry\n            formik.setSubmitting(false);\n            formik.setStatus('failure');\n        }\n    }, [submit.rejected]);\n\n    useEffect(() => formik.setErrors(validationErrors || {}), [validationErrors]);\n\n    // TODO: move into independent component\n    useUpdateEffect(() => void onChange?.(formik.values, formik), [formik.values]);\n\n    return {\n        submit,\n        errorsPrefix,\n        ...formik,\n    };\n}\n","import React, { useCallback } from 'react';\nimport { useFormikContext } from 'formik';\n\nimport { Button } from '../Inputs';\nimport { SubmitButtonProps } from './types';\n\nexport default function SubmitButton({\n    as: Component = Button,\n    isInitialHidden = false,\n    onClick = undefined,\n    ...rest\n}) {\n    const { submitForm, dirty, isSubmitting } = useFormikContext();\n    const isHidden = !dirty && isInitialHidden;\n\n    const handleClick = useCallback((e) => {\n        e.preventDefault();\n        submitForm();\n    });\n\n    if (isHidden) return null;\n\n    return <Component isFetching={isSubmitting} disabled={!dirty} onClick={onClick || handleClick} {...rest} />;\n}\n\nSubmitButton.propTypes = SubmitButtonProps;\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"_3vgFfjvy\",\"root\":\"_3emjb71b\",\"builderInput\":\"_1Kddp8Ki\",\"error\":\"_3QGmOUXq\",\"normal\":\"_3RuEz0rd\",\"small\":\"_2rNjGQh5\",\"placeholder\":\"CEJbTfB9\",\"disabled\":\"_3aQqRw4V\",\"arrowIcon\":\"_1I0KTRK1\"};","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport * as React from \"react\";\nvar _ref = /*#__PURE__*/React.createElement(\"defs\", null, /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M396.991 2042.5l-3.308 3.025a.537.537 0 000 .808c.244.223.64.223.884 0l3.75-3.429a.537.537 0 000-.808l-3.75-3.429a.667.667 0 00-.884 0 .537.537 0 000 .808l3.308 3.025z\",\n  id: \"select_arrow_svg__a\"\n}));\nvar _ref2 = /*#__PURE__*/React.createElement(\"use\", {\n  fill: \"currentColor\",\n  fillRule: \"nonzero\",\n  transform: \"matrix(0 1 1 0 -2038.5 -393.5)\",\n  xlinkHref: \"#select_arrow_svg__a\"\n});\nfunction SvgSelectArrow(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 8,\n    height: 5\n  }, props), _ref, _ref2);\n}\nexport default SvgSelectArrow;","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './SelectSimple.module.scss';\n\nimport ArrowIcon from '../../../../icons/select_arrow.svg';\n\nconst SelectSimple = ({\n    className,\n    multiple,\n    placeholder,\n    options,\n    hasError,\n    size,\n    value,\n    builderInput,\n    disabled,\n    ...rest\n}) => (\n    <div className={styles.wrapper}>\n        <select\n            className={classNames(className, styles.root, {\n                [styles.error]: hasError,\n                [styles[size]]: !!styles[size],\n                [styles.placeholder]: placeholder && !value,\n                [styles.disabled]: disabled,\n                [styles.builderInput]: builderInput,\n            })}\n            multiple={multiple}\n            value={value}\n            disabled={disabled}\n            data-value={value}\n            {...rest}\n        >\n            {placeholder && <option value=\"\">{placeholder}</option>}\n            {options.map((option) => (\n                <option key={option.value} value={option.value} disabled={option.disabled}>\n                    {option.label}\n                </option>\n            ))}\n        </select>\n        <ArrowIcon color={rest.style?.color} className={styles.arrowIcon} />\n    </div>\n);\n\nSelectSimple.propTypes = {\n    options: PropTypes.arrayOf(\n        PropTypes.shape({\n            label: PropTypes.string,\n            value: PropTypes.string,\n        })\n    ).isRequired,\n    value: PropTypes.string,\n    placeholder: PropTypes.string,\n    className: PropTypes.string,\n    hasError: PropTypes.bool,\n    multiple: PropTypes.bool,\n    disabled: PropTypes.bool,\n    elementStyle: PropTypes.string,\n    size: PropTypes.oneOf(['normal', 'small']),\n    builderInput: PropTypes.bool,\n};\n\nSelectSimple.defaultProps = {\n    builderInput: false,\n    hasError: false,\n    multiple: false,\n};\n\nexport default SelectSimple;\n","export default {\n    'afghanistan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Afghanistan',\n        'alpha_2': 'AF',\n        'alpha_3': 'AFG',\n    },\n    'alandislands': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'land Islands',\n        'alpha_2': 'AX',\n        'alpha_3': 'ALA',\n    },\n    'albania': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Albania',\n        'alpha_2': 'AL',\n        'alpha_3': 'ALB',\n    },\n    'algeria': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Algeria',\n        'alpha_2': 'DZ',\n        'alpha_3': 'DZA',\n    },\n    'americansamoa': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'American Samoa',\n        'alpha_2': 'AS',\n        'alpha_3': 'ASM',\n    },\n    'andorra': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Andorra',\n        'alpha_2': 'AD',\n        'alpha_3': 'AND',\n    },\n    'angola': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Angola',\n        'alpha_2': 'AO',\n        'alpha_3': 'AGO',\n    },\n    'anguilla': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Anguilla',\n        'alpha_2': 'AI',\n        'alpha_3': 'AIA',\n    },\n    'antiguaandbarbuda': {\n        'uk_name': '  ',\n        'ru_name': '  ',\n        'en_name': 'Antigua and Barbuda',\n        'alpha_2': 'AG',\n        'alpha_3': 'ATG',\n    },\n    'argentina': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Argentina',\n        'alpha_2': 'AR',\n        'alpha_3': 'ARG',\n    },\n    'armenia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Armenia',\n        'alpha_2': 'AM',\n        'alpha_3': 'ARM',\n    },\n    'aruba': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Aruba',\n        'alpha_2': 'AW',\n        'alpha_3': 'ABW',\n    },\n    'australia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Australia',\n        'alpha_2': 'AU',\n        'alpha_3': 'AUS',\n    },\n    'austria': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Austria',\n        'alpha_2': 'AT',\n        'alpha_3': 'AUT',\n    },\n    'azerbaijan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Azerbaijan',\n        'alpha_2': 'AZ',\n        'alpha_3': 'AZE',\n    },\n    'thebahamas': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'The Bahamas',\n        'alpha_2': 'BS',\n        'alpha_3': 'BHS',\n    },\n    'bahrain': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Bahrain',\n        'alpha_2': 'BH',\n        'alpha_3': 'BHR',\n    },\n    'bangladesh': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Bangladesh',\n        'alpha_2': 'BD',\n        'alpha_3': 'BGD',\n    },\n    'barbados': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Barbados',\n        'alpha_2': 'BB',\n        'alpha_3': 'BRB',\n    },\n    'belarus': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Belarus',\n        'alpha_2': 'BY',\n        'alpha_3': 'BLR',\n    },\n    'belgium': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Belgium',\n        'alpha_2': 'BE',\n        'alpha_3': 'BEL',\n    },\n    'belize': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Belize',\n        'alpha_2': 'BZ',\n        'alpha_3': 'BLZ',\n    },\n    'benin': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Benin',\n        'alpha_2': 'BJ',\n        'alpha_3': 'BEN',\n    },\n    'bermuda': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Bermuda',\n        'alpha_2': 'BM',\n        'alpha_3': 'BMU',\n    },\n    'bhutan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Bhutan',\n        'alpha_2': 'BT',\n        'alpha_3': 'BTN',\n    },\n    'bolivia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Bolivia',\n        'alpha_2': 'BO',\n        'alpha_3': 'BOL',\n    },\n    'bonaire': {\n        'uk_name': ' ',\n        'ru_name': '',\n        'en_name': 'Bonaire',\n        'alpha_2': 'BQ',\n        'alpha_3': 'BES',\n    },\n    'botswana': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Botswana',\n        'alpha_2': 'BW',\n        'alpha_3': 'BWA',\n    },\n    'brazil': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Brazil',\n        'alpha_2': 'BR',\n        'alpha_3': 'BRA',\n    },\n    'britishindianoceanterritory': {\n        'uk_name': '    ',\n        'ru_name': '    ',\n        'en_name': 'British Indian Ocean Territory',\n        'alpha_2': 'IO',\n        'alpha_3': 'IOT',\n    },\n    'britishvirginislands': {\n        'uk_name': '  ',\n        'ru_name': '  ',\n        'en_name': 'British Virgin Islands',\n        'alpha_2': 'VG',\n        'alpha_3': 'VGB',\n    },\n    'brunei': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Brunei',\n        'alpha_2': 'BN',\n        'alpha_3': 'BRN',\n    },\n    'bulgaria': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Bulgaria',\n        'alpha_2': 'BG',\n        'alpha_3': 'BGR',\n    },\n    'burkinafaso': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Burkina Faso',\n        'alpha_2': 'BF',\n        'alpha_3': 'BFA',\n    },\n    'burundi': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Burundi',\n        'alpha_2': 'BI',\n        'alpha_3': 'BDI',\n    },\n    'cambodia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Cambodia',\n        'alpha_2': 'KH',\n        'alpha_3': 'KHM',\n    },\n    'cameroon': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Cameroon',\n        'alpha_2': 'CM',\n        'alpha_3': 'CMR',\n    },\n    'canada': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Canada',\n        'alpha_2': 'CA',\n        'alpha_3': 'CAN',\n    },\n    'capeverde': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Cape Verde',\n        'alpha_2': 'CV',\n        'alpha_3': 'CPV',\n    },\n    'caymanislands': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Cayman Islands',\n        'alpha_2': 'KY',\n        'alpha_3': 'CYM',\n    },\n    'centralafricanrepublic': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Central African Republic',\n        'alpha_2': 'CF',\n        'alpha_3': 'CAF',\n    },\n    'chad': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Chad',\n        'alpha_2': 'TD',\n        'alpha_3': 'TCD',\n    },\n    'chile': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Chile',\n        'alpha_2': 'CL',\n        'alpha_3': 'CHL',\n    },\n    'china': {\n        'uk_name': '  ',\n        'ru_name': '',\n        'en_name': 'China',\n        'alpha_2': 'CN',\n        'alpha_3': 'CHN',\n    },\n    'christmasisland': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Christmas Island',\n        'alpha_2': 'CX',\n        'alpha_3': 'CXR',\n    },\n    'cocos(keeling)islands': {\n        'uk_name': ' ',\n        'ru_name': ' ( ',\n        'en_name': 'Cocos (Keeling) Islands',\n        'alpha_2': 'CC',\n        'alpha_3': 'CCK',\n    },\n    'colombia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Colombia',\n        'alpha_2': 'CO',\n        'alpha_3': 'COL',\n    },\n    'comoros': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Comoros',\n        'alpha_2': 'KM',\n        'alpha_3': 'COM',\n    },\n    'republicofthecongo': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Republic of the Congo',\n        'alpha_2': 'CG',\n        'alpha_3': 'COG',\n    },\n    'democraticrepublicofthecongo': {\n        'uk_name': ' ',\n        'ru_name': '  ',\n        'en_name': 'Democratic Republic of the Congo',\n        'alpha_2': 'CD',\n        'alpha_3': 'COD',\n    },\n    'cookislands': {\n        'uk_name': ' ',\n        'ru_name': '',\n        'en_name': 'Cook Islands',\n        'alpha_2': 'CK',\n        'alpha_3': 'COK',\n    },\n    'costarica': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Costa Rica',\n        'alpha_2': 'CR',\n        'alpha_3': 'CRI',\n    },\n    'croatia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Croatia',\n        'alpha_2': 'HR',\n        'alpha_3': 'HRV',\n    },\n    'cuba': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Cuba',\n        'alpha_2': 'CU',\n        'alpha_3': 'CUB',\n    },\n    'curaao': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Curaao',\n        'alpha_2': 'CW',\n        'alpha_3': 'CUW',\n    },\n    'cyprus': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Cyprus',\n        'alpha_2': 'CY',\n        'alpha_3': 'CYP',\n    },\n    'czechrepublic': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Czech Republic',\n        'alpha_2': 'CZ',\n        'alpha_3': 'CZE',\n    },\n    'denmark': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Denmark',\n        'alpha_2': 'DK',\n        'alpha_3': 'DNK',\n    },\n    'djibouti': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Djibouti',\n        'alpha_2': 'DJ',\n        'alpha_3': 'DJI',\n    },\n    'dominica': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Dominica',\n        'alpha_2': 'DM',\n        'alpha_3': 'DMA',\n    },\n    'dominicanrepublic': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Dominican Republic',\n        'alpha_2': 'DO',\n        'alpha_3': 'DOM',\n    },\n    'ecuador': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Ecuador',\n        'alpha_2': 'EC',\n        'alpha_3': 'ECU',\n    },\n    'egypt': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Egypt',\n        'alpha_2': 'EG',\n        'alpha_3': 'EGY',\n    },\n    'elsalvador': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'El Salvador',\n        'alpha_2': 'SV',\n        'alpha_3': 'SLV',\n    },\n    'equatorialguinea': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Equatorial Guinea',\n        'alpha_2': 'GQ',\n        'alpha_3': 'GNQ',\n    },\n    'eritrea': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Eritrea',\n        'alpha_2': 'ER',\n        'alpha_3': 'ERI',\n    },\n    'estonia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Estonia',\n        'alpha_2': 'EE',\n        'alpha_3': 'EST',\n    },\n    'ethiopia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Ethiopia',\n        'alpha_2': 'ET',\n        'alpha_3': 'ETH',\n    },\n    'falklandislands': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Falkland Islands',\n        'alpha_2': 'FK',\n        'alpha_3': 'FLK',\n    },\n    'faroeislands': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Faroe Islands',\n        'alpha_2': 'FO',\n        'alpha_3': 'FRO',\n    },\n    'fiji': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Fiji',\n        'alpha_2': 'FJ',\n        'alpha_3': 'FJI',\n    },\n    'finland': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Finland',\n        'alpha_2': 'FI',\n        'alpha_3': 'FIN',\n    },\n    'france': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'France',\n        'alpha_2': 'FR',\n        'alpha_3': 'FRA',\n    },\n    'frenchguiana': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'French Guiana',\n        'alpha_2': 'GF',\n        'alpha_3': 'GUF',\n    },\n    'frenchpolynesia': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'French Polynesia',\n        'alpha_2': 'PF',\n        'alpha_3': 'PYF',\n    },\n    'frenchsouthernandantarcticlands': {\n        'uk_name': '    ',\n        'ru_name': '    ',\n        'en_name': 'French Southern and Antarctic Lands',\n        'alpha_2': 'TF',\n        'alpha_3': 'ATF',\n    },\n    'gabon': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Gabon',\n        'alpha_2': 'GA',\n        'alpha_3': 'GAB',\n    },\n    'thegambia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'The Gambia',\n        'alpha_2': 'GM',\n        'alpha_3': 'GMB',\n    },\n    'georgia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Georgia',\n        'alpha_2': 'GE',\n        'alpha_3': 'GEO',\n    },\n    'germany': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Germany',\n        'alpha_2': 'DE',\n        'alpha_3': 'DEU',\n    },\n    'ghana': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Ghana',\n        'alpha_2': 'GH',\n        'alpha_3': 'GHA',\n    },\n    'gibraltar': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Gibraltar',\n        'alpha_2': 'GI',\n        'alpha_3': 'GIB',\n    },\n    'greece': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Greece',\n        'alpha_2': 'GR',\n        'alpha_3': 'GRC',\n    },\n    'greenland': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Greenland',\n        'alpha_2': 'GL',\n        'alpha_3': 'GRL',\n    },\n    'grenada': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Grenada',\n        'alpha_2': 'GD',\n        'alpha_3': 'GRD',\n    },\n    'guadeloupe': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Guadeloupe',\n        'alpha_2': 'GP',\n        'alpha_3': 'GLP',\n    },\n    'guam': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Guam',\n        'alpha_2': 'GU',\n        'alpha_3': 'GUM',\n    },\n    'guatemala': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Guatemala',\n        'alpha_2': 'GT',\n        'alpha_3': 'GTM',\n    },\n    'guernsey': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Guernsey',\n        'alpha_2': 'GG',\n        'alpha_3': 'GGY',\n    },\n    'guinea': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Guinea',\n        'alpha_2': 'GN',\n        'alpha_3': 'GIN',\n    },\n    'guineabissau': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Guinea-Bissau',\n        'alpha_2': 'GW',\n        'alpha_3': 'GNB',\n    },\n    'guyana': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Guyana',\n        'alpha_2': 'GY',\n        'alpha_3': 'GUY',\n    },\n    'haiti': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Haiti',\n        'alpha_2': 'HT',\n        'alpha_3': 'HTI',\n    },\n    'honduras': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Honduras',\n        'alpha_2': 'HN',\n        'alpha_3': 'HND',\n    },\n    'hongkong': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Hong Kong',\n        'alpha_2': 'HK',\n        'alpha_3': 'HKG',\n    },\n    'hungary': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Hungary',\n        'alpha_2': 'HU',\n        'alpha_3': 'HUN',\n    },\n    'iceland': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Iceland',\n        'alpha_2': 'IS',\n        'alpha_3': 'ISL',\n    },\n    'india': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'India',\n        'alpha_2': 'IN',\n        'alpha_3': 'IND',\n    },\n    'indonesia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Indonesia',\n        'alpha_2': 'ID',\n        'alpha_3': 'IDN',\n    },\n    'ivorycoast': {\n        'uk_name': '-\\'',\n        'ru_name': ' \\'',\n        'en_name': 'Ivory Coast',\n        'alpha_2': 'CI',\n        'alpha_3': 'CIV',\n    },\n    'iran': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Iran',\n        'alpha_2': 'IR',\n        'alpha_3': 'IRN',\n    },\n    'iraq': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Iraq',\n        'alpha_2': 'IQ',\n        'alpha_3': 'IRQ',\n    },\n    'republicofireland': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Republic of Ireland',\n        'alpha_2': 'IE',\n        'alpha_3': 'IRL',\n    },\n    'isleofman': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Isle of Man',\n        'alpha_2': 'IM',\n        'alpha_3': 'IMN',\n    },\n    'israel': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Israel',\n        'alpha_2': 'IL',\n        'alpha_3': 'ISR',\n    },\n    'italy': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Italy',\n        'alpha_2': 'IT',\n        'alpha_3': 'ITA',\n    },\n    'jamaica': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Jamaica',\n        'alpha_2': 'JM',\n        'alpha_3': 'JAM',\n    },\n    'japan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Japan',\n        'alpha_2': 'JP',\n        'alpha_3': 'JPN',\n    },\n    'jordan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Jordan',\n        'alpha_2': 'JO',\n        'alpha_3': 'JOR',\n    },\n    'kazakhstan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Kazakhstan',\n        'alpha_2': 'KZ',\n        'alpha_3': 'KAZ',\n    },\n    'kenya': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Kenya',\n        'alpha_2': 'KE',\n        'alpha_3': 'KEN',\n    },\n    'kiribati': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Kiribati',\n        'alpha_2': 'KI',\n        'alpha_3': 'KIR',\n    },\n    'kuwait': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Kuwait',\n        'alpha_2': 'KW',\n        'alpha_3': 'KWT',\n    },\n    'kyrgyzstan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Kyrgyzstan',\n        'alpha_2': 'KG',\n        'alpha_3': 'KGZ',\n    },\n    'laos': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Laos',\n        'alpha_2': 'LA',\n        'alpha_3': 'LAO',\n    },\n    'latvia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Latvia',\n        'alpha_2': 'LV',\n        'alpha_3': 'LVA',\n    },\n    'lebanon': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Lebanon',\n        'alpha_2': 'LB',\n        'alpha_3': 'LBN',\n    },\n    'lesotho': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Lesotho',\n        'alpha_2': 'LS',\n        'alpha_3': 'LSO',\n    },\n    'liberia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Liberia',\n        'alpha_2': 'LR',\n        'alpha_3': 'LBR',\n    },\n    'libya': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Libya',\n        'alpha_2': 'LY',\n        'alpha_3': 'LBY',\n    },\n    'liechtenstein': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Liechtenstein',\n        'alpha_2': 'LI',\n        'alpha_3': 'LIE',\n    },\n    'lithuania': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Lithuania',\n        'alpha_2': 'LT',\n        'alpha_3': 'LTU',\n    },\n    'luxembourg': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Luxembourg',\n        'alpha_2': 'LU',\n        'alpha_3': 'LUX',\n    },\n    'republicofmacedonia': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Republic of Macedonia',\n        'alpha_2': 'MK',\n        'alpha_3': 'MKD',\n    },\n    'madagascar': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Madagascar',\n        'alpha_2': 'MG',\n        'alpha_3': 'MDG',\n    },\n    'malawi': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Malawi',\n        'alpha_2': 'MW',\n        'alpha_3': 'MWI',\n    },\n    'malaysia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Malaysia',\n        'alpha_2': 'MY',\n        'alpha_3': 'MYS',\n    },\n    'maldives': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Maldives',\n        'alpha_2': 'MV',\n        'alpha_3': 'MDV',\n    },\n    'mali': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Mali',\n        'alpha_2': 'ML',\n        'alpha_3': 'MLI',\n    },\n    'malta': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Malta',\n        'alpha_2': 'MT',\n        'alpha_3': 'MLT',\n    },\n    'marshallislands': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Marshall Islands',\n        'alpha_2': 'MH',\n        'alpha_3': 'MHL',\n    },\n    'martinique': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Martinique',\n        'alpha_2': 'MQ',\n        'alpha_3': 'MTQ',\n    },\n    'mauritania': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Mauritania',\n        'alpha_2': 'MR',\n        'alpha_3': 'MRT',\n    },\n    'mauritius': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Mauritius',\n        'alpha_2': 'MU',\n        'alpha_3': 'MUS',\n    },\n    'mayotte': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Mayotte',\n        'alpha_2': 'YT',\n        'alpha_3': 'MYT',\n    },\n    'mexico': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Mexico',\n        'alpha_2': 'MX',\n        'alpha_3': 'MEX',\n    },\n    'federatedstatesofmicronesia': {\n        'uk_name': '  ',\n        'ru_name': '  ',\n        'en_name': 'Federated States of Micronesia',\n        'alpha_2': 'FM',\n        'alpha_3': 'FSM',\n    },\n    'moldova': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Moldova',\n        'alpha_2': 'MD',\n        'alpha_3': 'MDA',\n    },\n    'monaco': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Monaco',\n        'alpha_2': 'MC',\n        'alpha_3': 'MCO',\n    },\n    'mongolia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Mongolia',\n        'alpha_2': 'MN',\n        'alpha_3': 'MNG',\n    },\n    'montenegro': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Montenegro',\n        'alpha_2': 'ME',\n        'alpha_3': 'MNE',\n    },\n    'montserrat': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Montserrat',\n        'alpha_2': 'MS',\n        'alpha_3': 'MSR',\n    },\n    'morocco': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Morocco',\n        'alpha_2': 'MA',\n        'alpha_3': 'MAR',\n    },\n    'mozambique': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Mozambique',\n        'alpha_2': 'MZ',\n        'alpha_3': 'MOZ',\n    },\n    'myanmar': {\n        'uk_name': '\\'',\n        'ru_name': '',\n        'en_name': 'Myanmar',\n        'alpha_2': 'MM',\n        'alpha_3': 'MMR',\n    },\n    'namibia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Namibia',\n        'alpha_2': 'NA',\n        'alpha_3': 'NAM',\n    },\n    'nauru': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Nauru',\n        'alpha_2': 'NR',\n        'alpha_3': 'NRU',\n    },\n    'nepal': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Nepal',\n        'alpha_2': 'NP',\n        'alpha_3': 'NPL',\n    },\n    'netherlands': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Netherlands',\n        'alpha_2': 'NL',\n        'alpha_3': 'NLD',\n    },\n    'newcaledonia': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'New Caledonia',\n        'alpha_2': 'NC',\n        'alpha_3': 'NCL',\n    },\n    'newzealand': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'New Zealand',\n        'alpha_2': 'NZ',\n        'alpha_3': 'NZL',\n    },\n    'nicaragua': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Nicaragua',\n        'alpha_2': 'NI',\n        'alpha_3': 'NIC',\n    },\n    'niger': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Niger',\n        'alpha_2': 'NE',\n        'alpha_3': 'NER',\n    },\n    'nigeria': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Nigeria',\n        'alpha_2': 'NG',\n        'alpha_3': 'NGA',\n    },\n    'niue': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Niue',\n        'alpha_2': 'NU',\n        'alpha_3': 'NIU',\n    },\n    'norfolkisland': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Norfolk Island',\n        'alpha_2': 'NF',\n        'alpha_3': 'NFK',\n    },\n    'northkorea': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'North Korea',\n        'alpha_2': 'KP',\n        'alpha_3': 'PRK',\n    },\n    'northernmarianaislands': {\n        'uk_name': '  ',\n        'ru_name': '  ',\n        'en_name': 'Northern Mariana Islands',\n        'alpha_2': 'MP',\n        'alpha_3': 'MNP',\n    },\n    'norway': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Norway',\n        'alpha_2': 'NO',\n        'alpha_3': 'NOR',\n    },\n    'oman': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Oman',\n        'alpha_2': 'OM',\n        'alpha_3': 'OMN',\n    },\n    'pakistan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Pakistan',\n        'alpha_2': 'PK',\n        'alpha_3': 'PAK',\n    },\n    'palau': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Palau',\n        'alpha_2': 'PW',\n        'alpha_3': 'PLW',\n    },\n    'palestine': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Palestine',\n        'alpha_2': 'PS',\n        'alpha_3': 'PSE',\n    },\n    'panama': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Panama',\n        'alpha_2': 'PA',\n        'alpha_3': 'PAN',\n    },\n    'papuanewguinea': {\n        'uk_name': '  ',\n        'ru_name': '- ',\n        'en_name': 'Papua New Guinea',\n        'alpha_2': 'PG',\n        'alpha_3': 'PNG',\n    },\n    'paraguay': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Paraguay',\n        'alpha_2': 'PY',\n        'alpha_3': 'PRY',\n    },\n    'peru': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Peru',\n        'alpha_2': 'PE',\n        'alpha_3': 'PER',\n    },\n    'philippines': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Philippines',\n        'alpha_2': 'PH',\n        'alpha_3': 'PHL',\n    },\n    'pitcairnislands': {\n        'uk_name': '',\n        'ru_name': ' ',\n        'en_name': 'Pitcairn Islands',\n        'alpha_2': 'PN',\n        'alpha_3': 'PCN',\n    },\n    'poland': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Poland',\n        'alpha_2': 'PL',\n        'alpha_3': 'POL',\n    },\n    'portugal': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Portugal',\n        'alpha_2': 'PT',\n        'alpha_3': 'PRT',\n    },\n    'puertorico': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Puerto Rico',\n        'alpha_2': 'PR',\n        'alpha_3': 'PRI',\n    },\n    'qatar': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Qatar',\n        'alpha_2': 'QA',\n        'alpha_3': 'QAT',\n    },\n    'republicofkosovo': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Republic of Kosovo',\n        'alpha_2': 'XK',\n        'alpha_3': 'KOS',\n    },\n    'runion': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Runion',\n        'alpha_2': 'RE',\n        'alpha_3': 'REU',\n    },\n    'romania': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Romania',\n        'alpha_2': 'RO',\n        'alpha_3': 'ROU',\n    },\n    'russia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Russia',\n        'alpha_2': 'RU',\n        'alpha_3': 'RUS',\n    },\n    'rwanda': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Rwanda',\n        'alpha_2': 'RW',\n        'alpha_3': 'RWA',\n    },\n    'saintbarthlemy': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Saint Barthlemy',\n        'alpha_2': 'BL',\n        'alpha_3': 'BLM',\n    },\n    'saintkittsandnevis': {\n        'uk_name': '-  ',\n        'ru_name': '-  ',\n        'en_name': 'Saint Kitts and Nevis',\n        'alpha_2': 'KN',\n        'alpha_3': 'KNA',\n    },\n    'saintlucia': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Saint Lucia',\n        'alpha_2': 'LC',\n        'alpha_3': 'LCA',\n    },\n    'saintmartin': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Saint Martin',\n        'alpha_2': 'MF',\n        'alpha_3': 'MAF',\n    },\n    'saintpierreandmiquelon': {\n        'uk_name': '-\\'  ',\n        'ru_name': '-  ',\n        'en_name': 'Saint Pierre and Miquelon',\n        'alpha_2': 'PM',\n        'alpha_3': 'SPM',\n    },\n    'saintvincentandthegrenadines': {\n        'uk_name': '-  ',\n        'ru_name': '-  ',\n        'en_name': 'Saint Vincent and the Grenadines',\n        'alpha_2': 'VC',\n        'alpha_3': 'VCT',\n    },\n    'samoa': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Samoa',\n        'alpha_2': 'WS',\n        'alpha_3': 'WSM',\n    },\n    'sanmarino': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'San Marino',\n        'alpha_2': 'SM',\n        'alpha_3': 'SMR',\n    },\n    'sotomandprncipe': {\n        'uk_name': '-  ',\n        'ru_name': '-  ',\n        'en_name': 'So Tom and Prncipe',\n        'alpha_2': 'ST',\n        'alpha_3': 'STP',\n    },\n    'saudiarabia': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Saudi Arabia',\n        'alpha_2': 'SA',\n        'alpha_3': 'SAU',\n    },\n    'senegal': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Senegal',\n        'alpha_2': 'SN',\n        'alpha_3': 'SEN',\n    },\n    'serbia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Serbia',\n        'alpha_2': 'RS',\n        'alpha_3': 'SRB',\n    },\n    'seychelles': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Seychelles',\n        'alpha_2': 'SC',\n        'alpha_3': 'SYC',\n    },\n    'sierraleone': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Sierra Leone',\n        'alpha_2': 'SL',\n        'alpha_3': 'SLE',\n    },\n    'singapore': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Singapore',\n        'alpha_2': 'SG',\n        'alpha_3': 'SGP',\n    },\n    'sintmaarten': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Sint Maarten',\n        'alpha_2': 'SX',\n        'alpha_3': 'SXM',\n    },\n    'slovakia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Slovakia',\n        'alpha_2': 'SK',\n        'alpha_3': 'SVK',\n    },\n    'slovenia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Slovenia',\n        'alpha_2': 'SI',\n        'alpha_3': 'SVN',\n    },\n    'solomonislands': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Solomon Islands',\n        'alpha_2': 'SB',\n        'alpha_3': 'SLB',\n    },\n    'somalia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Somalia',\n        'alpha_2': 'SO',\n        'alpha_3': 'SOM',\n    },\n    'southafrica': {\n        'uk_name': '',\n        'ru_name': ' ',\n        'en_name': 'South Africa',\n        'alpha_2': 'ZA',\n        'alpha_3': 'ZAF',\n    },\n    'southgeorgia': {\n        'uk_name': '     ',\n        'ru_name': ' ',\n        'en_name': 'South Georgia',\n        'alpha_2': 'GS',\n        'alpha_3': 'SGS',\n    },\n    'southkorea': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'South Korea',\n        'alpha_2': 'KR',\n        'alpha_3': 'KOR',\n    },\n    'southsudan': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'South Sudan',\n        'alpha_2': 'SS',\n        'alpha_3': 'SSD',\n    },\n    'spain': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Spain',\n        'alpha_2': 'ES',\n        'alpha_3': 'ESP',\n    },\n    'srilanka': {\n        'uk_name': '-',\n        'ru_name': '-',\n        'en_name': 'Sri Lanka',\n        'alpha_2': 'LK',\n        'alpha_3': 'LKA',\n    },\n    'sudan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Sudan',\n        'alpha_2': 'SD',\n        'alpha_3': 'SDN',\n    },\n    'suriname': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Suriname',\n        'alpha_2': 'SR',\n        'alpha_3': 'SUR',\n    },\n    'svalbardandjanmayen': {\n        'uk_name': '  -',\n        'ru_name': '   ',\n        'en_name': 'Svalbard and Jan Mayen',\n        'alpha_2': 'SJ',\n        'alpha_3': 'SJM',\n    },\n    'swaziland': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Swaziland',\n        'alpha_2': 'SZ',\n        'alpha_3': 'SWZ',\n    },\n    'sweden': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Sweden',\n        'alpha_2': 'SE',\n        'alpha_3': 'SWE',\n    },\n    'switzerland': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Switzerland',\n        'alpha_2': 'CH',\n        'alpha_3': 'CHE',\n    },\n    'syria': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Syria',\n        'alpha_2': 'SY',\n        'alpha_3': 'SYR',\n    },\n    'taiwan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Taiwan',\n        'alpha_2': 'TW',\n        'alpha_3': 'TWN',\n    },\n    'tajikistan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Tajikistan',\n        'alpha_2': 'TJ',\n        'alpha_3': 'TJK',\n    },\n    'tanzania': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Tanzania',\n        'alpha_2': 'TZ',\n        'alpha_3': 'TZA',\n    },\n    'thailand': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Thailand',\n        'alpha_2': 'TH',\n        'alpha_3': 'THA',\n    },\n    'easttimor': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'East Timor',\n        'alpha_2': 'TL',\n        'alpha_3': 'TLS',\n    },\n    'togo': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Togo',\n        'alpha_2': 'TG',\n        'alpha_3': 'TGO',\n    },\n    'tokelau': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Tokelau',\n        'alpha_2': 'TK',\n        'alpha_3': 'TKL',\n    },\n    'tonga': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Tonga',\n        'alpha_2': 'TO',\n        'alpha_3': 'TON',\n    },\n    'trinidadandtobago': {\n        'uk_name': '  ',\n        'ru_name': '  ',\n        'en_name': 'Trinidad and Tobago',\n        'alpha_2': 'TT',\n        'alpha_3': 'TTO',\n    },\n    'tunisia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Tunisia',\n        'alpha_2': 'TN',\n        'alpha_3': 'TUN',\n    },\n    'turkey': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Turkey',\n        'alpha_2': 'TR',\n        'alpha_3': 'TUR',\n    },\n    'turkmenistan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Turkmenistan',\n        'alpha_2': 'TM',\n        'alpha_3': 'TKM',\n    },\n    'turksandcaicosislands': {\n        'uk_name': '   ',\n        'ru_name': '  ',\n        'en_name': 'Turks and Caicos Islands',\n        'alpha_2': 'TC',\n        'alpha_3': 'TCA',\n    },\n    'tuvalu': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Tuvalu',\n        'alpha_2': 'TV',\n        'alpha_3': 'TUV',\n    },\n    'uganda': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Uganda',\n        'alpha_2': 'UG',\n        'alpha_3': 'UGA',\n    },\n    'ukraine': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Ukraine',\n        'alpha_2': 'UA',\n        'alpha_3': 'UKR',\n    },\n    'unitedarabemirates': {\n        'uk_name': '',\n        'ru_name': '  ',\n        'en_name': 'United Arab Emirates',\n        'alpha_2': 'AE',\n        'alpha_3': 'ARE',\n    },\n    'unitedkingdom': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'United Kingdom',\n        'alpha_2': 'GB',\n        'alpha_3': 'GBR',\n    },\n    'unitedstates': {\n        'uk_name': '',\n        'ru_name': ' ',\n        'en_name': 'United States',\n        'alpha_2': 'US',\n        'alpha_3': 'USA',\n    },\n    'uruguay': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Uruguay',\n        'alpha_2': 'UY',\n        'alpha_3': 'URY',\n    },\n    'uzbekistan': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Uzbekistan',\n        'alpha_2': 'UZ',\n        'alpha_3': 'UZB',\n    },\n    'vanuatu': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Vanuatu',\n        'alpha_2': 'VU',\n        'alpha_3': 'VUT',\n    },\n    'venezuela': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Venezuela',\n        'alpha_2': 'VE',\n        'alpha_3': 'VEN',\n    },\n    'vietnam': {\n        'uk_name': '\\'',\n        'ru_name': '',\n        'en_name': 'Vietnam',\n        'alpha_2': 'VN',\n        'alpha_3': 'VNM',\n    },\n    'wallisandfutuna': {\n        'uk_name': '  ',\n        'ru_name': '  ',\n        'en_name': 'Wallis and Futuna',\n        'alpha_2': 'WF',\n        'alpha_3': 'WLF',\n    },\n    'westernsahara': {\n        'uk_name': ' ',\n        'ru_name': ' ',\n        'en_name': 'Western Sahara',\n        'alpha_2': 'EH',\n        'alpha_3': 'ESH',\n    },\n    'yemen': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Yemen',\n        'alpha_2': 'YE',\n        'alpha_3': 'YEM',\n    },\n    'zambia': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Zambia',\n        'alpha_2': 'ZM',\n        'alpha_3': 'ZMB',\n    },\n    'zimbabwe': {\n        'uk_name': '',\n        'ru_name': '',\n        'en_name': 'Zimbabwe',\n        'alpha_2': 'ZW',\n        'alpha_3': 'ZWE',\n    },\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport memoizeOne from 'memoize-one';\nimport { languages, fallback_language } from 'config';\n\nimport { __t } from '@mssgme/shared';\n\nimport SelectSimple from '../SelectSimple';\nimport countries from './countries';\n\nconst priorityCountries = ['UA', 'KZ', 'US'];\nconst separator = (key) => ({\n    label: '--------------------',\n    value: 'separator' + key,\n    disabled: true,\n});\n\nexport const getDefaultCountriesOptions = memoizeOne((lang) => {\n    const availableLang = languages.includes(lang) ? lang : fallback_language;\n    const countriesArray = Object.values(countries)\n        .map((item) => ({\n            label: item[`${availableLang}_name`],\n            value: `${item.alpha_2}-${item.alpha_3}`,\n            alpha_2: item.alpha_2,\n        }))\n        .sort((item1, item2) => item1.label.localeCompare(item2.label));\n\n    const prioritizedCountries = countriesArray\n        .filter((country) => priorityCountries.includes(country.alpha_2))\n        .sort((item1, item2) => priorityCountries.indexOf(item1.alpha_2) - priorityCountries.indexOf(item2.alpha_2));\n    const restCountries = countriesArray.filter((country) => !prioritizedCountries.includes(country));\n\n    return [{ label: __t('not_selected'), value: '' }, separator(1), ...prioritizedCountries, separator(2), ...restCountries];\n});\n\nconst CountrySelect = ({ lang, ...rest }) => {\n    return <SelectSimple {...rest} options={getDefaultCountriesOptions(lang)} />;\n};\n\nCountrySelect.propTypes = {\n    lang: PropTypes.string,\n};\n\nexport default CountrySelect;\n","import { useMemo } from 'react';\nimport { memoize } from 'lodash';\n\nimport { mapDynamicFieldToName } from '@mssgme/shared';\nimport { getDefaultCountriesOptions } from '@mssgme/ui';\n\nconst getFieldDefault = memoize(\n    (type, lang) => {\n        if (type === 'checkbox') return [];\n\n        if (type === 'country' && lang) {\n            const options = getDefaultCountriesOptions(lang);\n\n            for (const option of options) {\n                if (option.alpha_2 === lang) {\n                    return option.value;\n                }\n            }\n        }\n\n        return '';\n    },\n    (type, lang) => `${type}-${lang}`\n);\n\nexport const useDynamicFormDefaults = (fields, lang) => useMemo(\n    () => Object.fromEntries(\n        fields.map((field, index) => [\n            mapDynamicFieldToName(field, index),\n            getFieldDefault(field.type, lang),\n        ])\n    ),\n    [fields, lang]\n);\n","import { useMemo } from 'react';\n\nimport { createDynamicInputsValidationSchema } from '@mssgme/shared';\nimport { useDynamicFormDefaults } from './useDynamicFormDefaults';\n\nexport const useDynamicForm = ({ items, lang = navigator.language }) => {\n    const validationSchema = useMemo(() => createDynamicInputsValidationSchema(items), [items]);\n    const initialValues = useDynamicFormDefaults(items, lang);\n\n    return {\n        validationSchema,\n        initialValues,\n    };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"pane\":\"_1-N1Jusj\",\"radio\":\"_2IjKBdvE\",\"radioDot\":\"_35N8736p\",\"active\":\"_2k827TEu\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport { cls } from '@mssgme/helpers';\n\nimport styles from './RadioGroup.module.scss';\n\nconst RadioIcon = ({ color = '#007AFF' }) => (\n    <svg\n        version=\"1.1\"\n        viewBox=\"0 0 18 18\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        width=\"18\"\n        height=\"18\"\n    >\n        <g fill=\"none\" fillRule=\"evenodd\">\n            <g transform=\"translate(-568 -3567)\">\n                <g transform=\"translate(568 3567)\">\n                    <rect\n                        x=\".75\"\n                        y=\".75\"\n                        width=\"16.5\"\n                        height=\"16.5\"\n                        rx=\"8.25\"\n                        stroke={color}\n                        strokeWidth=\"1.5\"\n                    />\n                    <rect className={styles.radioDot} x=\"3\" y=\"3\" width=\"12\" height=\"12\" rx=\"6\" fill={color} />\n                </g>\n            </g>\n        </g>\n    </svg>\n);\n\nRadioIcon.propTypes = {\n    color: PropTypes.string,\n};\n\nconst RadioGroup = ({ options, value, name, onChange, pane, hasError, ...rest }) =>\n    (\n        <div {...cls([pane && styles.pane], rest)}>\n            {options.map((option, index) => {\n                const isSelected = value === option.value;\n\n                return (\n                    <div key={name + index} className={classNames(styles.radio, isSelected && styles.active)}>\n                        <label>\n                            <RadioIcon color={rest.style?.color} />\n                            <input type=\"radio\" name={name} value={option.value} checked={isSelected} onChange={onChange} />\n                            <span dangerouslySetInnerHTML={{ __html: option.label }} />\n                        </label>\n                    </div>\n                );\n            })}\n        </div>\n    );\n\nRadioGroup.propTypes = {\n    value: PropTypes.string,\n    name: PropTypes.string,\n    options: PropTypes.arrayOf(PropTypes.shape({ label: PropTypes.string, value: PropTypes.string })).isRequired,\n    onChange: PropTypes.func.isRequired,\n    pane: PropTypes.bool,\n    hasError: PropTypes.bool,\n};\n\nexport default RadioGroup;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3jQxuZy6\",\"toggle\":\"_1_wf8xrn\",\"wrap\":\"_3HuhV7wT\",\"toggler\":\"tsq8u01F\",\"input\":\"_2Eucgj8B\",\"checkMarkSquare\":\"_9b_KQ_kA\",\"checkMark\":\"ApDaiIzL\",\"checked\":\"M2Hu5KdE\",\"check\":\"-vXnbwjs\",\"label\":\"_1TkGKSIy\",\"disabled\":\"_3Ix_gRJS\",\"builderInput\":\"_1VjKZzF8\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport styles from './Checkbox.module.scss';\n\nconst CheckboxIcon = ({ customStyle, checked }) => {\n    const checkMarkColor = customStyle?.backgroundColor || '#FFFFFF';\n    const checkMarkSquareBorderColor = customStyle?.color || (checked ? '#007aff' : '#c7c7cc');\n    const checkMarkSquareFillColor = checked ? (customStyle?.color || '#007aff') : 'transparent';\n\n    return (\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 18 18\">\n            <rect className={styles.checkMarkSquare} x=\"0.75\" y=\"0.75\" width=\"16.5\" height=\"16.5\" rx=\"6\"\n                ry=\"6\" strokeWidth=\"1.5px\"\n                fill={checkMarkSquareFillColor}\n                stroke={checkMarkSquareBorderColor} />\n            <path className={styles.checkMark}\n                d=\"M5.35,8.89a.48.48,0,0,0-.71,0,.57.57,0,0,0,0,.76l2.5,2.69a.48.48,0,0,0,.71,0l5.5-5.92a.57.57,0,0,0,0-.76.48.48,0,0,0-.71,0L7.5,11.2Z\"\n                fill={checkMarkColor}\n                stroke={checkMarkColor} />\n        </svg>\n    );\n};\n\nCheckboxIcon.propTypes = {\n    customStyle: PropTypes.object,\n    checked: PropTypes.bool,\n};\n\nconst Checkbox = ({\n    className,\n    hasError,\n    placeholder,\n    styled,\n    disabled,\n    builderInput,\n    style,\n    checked,\n    ...rest\n}) => (\n    <label\n        className={classNames(\n            className,\n            styles.root,\n            styles[styled],\n            hasError && styles.error,\n            disabled && styles.disabled,\n            builderInput && styles.builderInput,\n            checked && styles.checked\n        )}\n    >\n        <div className={styles.wrap}>\n            <input className={styles.input} type=\"checkbox\" disabled={disabled} checked={checked} {...rest} />\n\n            {styled === 'toggle' ? (\n                <div className={styles.toggler} />\n            ) : (\n                <CheckboxIcon customStyle={style} checked={checked} />\n            )}\n        </div>\n        {placeholder && <div className={styles.label}>{placeholder}</div>}\n    </label>\n);\n\nCheckbox.propTypes = {\n    className: PropTypes.string,\n    placeholder: PropTypes.any,\n    hasError: PropTypes.bool,\n    disabled: PropTypes.bool,\n    styled: PropTypes.oneOf(['default', 'toggle']),\n    builderInput: PropTypes.bool,\n    style: PropTypes.object,\n    checked: PropTypes.bool,\n};\n\nCheckbox.defaultProps = {\n    hasError: false,\n    disabled: false,\n    styled: 'default',\n    builderInput: false,\n    checked: false,\n};\n\nexport default Checkbox;\n","// extracted by mini-css-extract-plugin\nexport default {\"pane\":\"_2L1mtqDK\",\"radio\":\"_1rh2Cby2\",\"checkbox\":\"_1hdBzKWl\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { Field } from 'formik';\n\nimport Checkbox from '../Checkbox';\n\nimport styles from './CheckboxGroup.module.scss';\n\nconst CheckboxGroup = ({ options, className, name, value, onChange, pane, style }) => (\n    <div className={classNames(className, pane && styles.pane)} style={style}>\n        {options.map((option, index) => {\n            const isChecked = value?.includes(option.value);\n\n            return (\n                <Field\n                    as={Checkbox}\n                    key={name + index}\n                    builderInput\n                    name={name}\n                    value={option.value}\n                    checked={isChecked}\n                    placeholder={option.label}\n                    onChange={onChange}\n                    className={styles.checkbox}\n                    style={style}\n                />\n            );\n        })}\n    </div>\n);\n\nCheckboxGroup.propTypes = {\n    className: PropTypes.string,\n    name: PropTypes.string,\n    options: PropTypes.arrayOf(PropTypes.shape({ label: PropTypes.string, value: PropTypes.string })).isRequired,\n    onChange: PropTypes.func.isRequired,\n    value: PropTypes.array,\n    pane: PropTypes.bool,\n    style: PropTypes.object,\n};\n\nexport default CheckboxGroup;\n","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"_3qzTX7B_\",\"root\":\"_2eYU6U9M\",\"counter\":\"_2Ub3EnBa\",\"error\":\"_1mHc8tTz\",\"paddingRight\":\"_3BR-sV-t\",\"builderInput\":\"_11YE9dPR\",\"normal\":\"_3muCpmvd\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport TextareaAutosize from 'react-textarea-autosize';\n\nimport styles from './Textarea.module.scss';\n\nexport default function Textarea({\n    className,\n    hasError,\n    maxLength,\n    value,\n    size,\n    builderInput = false,\n    minRows = 2,\n    maxRows = 5,\n    ...rest\n}) {\n    const _className = classNames(styles.root, className, {\n        [styles.error]: hasError,\n        [styles.paddingRight]: maxLength,\n        [styles[size]]: !!size,\n        [styles.builderInput]: builderInput,\n    });\n    const _value = value || '';\n\n    return (\n        <div className={styles.container} style={{ color: rest.style?.color }}>\n            <TextareaAutosize\n                value={_value}\n                className={_className}\n                maxLength={maxLength}\n                minRows={minRows}\n                maxRows={maxRows}\n                {...rest}\n            />\n            {maxLength && <span className={styles.counter}>{maxLength - _value.trim().length}</span>}\n        </div>\n    );\n}\n\nTextarea.propTypes = {\n    className: PropTypes.string,\n    hasError: PropTypes.bool,\n    maxLength: PropTypes.number,\n    minRows: PropTypes.number,\n    maxRows: PropTypes.number,\n    size: PropTypes.oneOf(['normal']),\n    value: PropTypes.string,\n    builderInput: PropTypes.bool,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"x2z7BaJ7\",\"counter\":\"_1shhUFPK\",\"input\":\"PNGWWLJr\",\"inlineEdit\":\"_2oLa20Cp\",\"error\":\"_30GLG82u\",\"sizeNormal\":\"YMLsyDeI\",\"small\":\"_3ibN-GXj\",\"grey\":\"l6zDv-Nb\",\"customNativeIcon\":\"_2e_q-jrW\",\"disabled\":\"_2nIOYvJD\",\"select\":\"_3Jm5YoVZ\",\"inputWrapper\":\"_1a2Mtmds\",\"builderInput\":\"_10WOopD-\",\"hexInput\":\"_3Lhwymxj\",\"contextBlock\":\"eEBa9s5V\",\"clearAddon\":\"nD7mTIYZ\",\"icon\":\"_3R_xvVF7\",\"rootGrey\":\"_1OqUlK9h\",\"before\":\"_2-6w5UMI\",\"after\":\"_1ZAQc5I0\",\"hasRightAddon\":\"_3EwGjWxI\",\"hidden\":\"_3HFXfpVP\",\"paddingRight\":\"_3Rs79_rO\",\"clearable\":\"GlmCIjdL\"};","import PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport composeRefs from '@seznam/compose-react-refs';\nimport React, { useCallback, useRef } from 'react';\nimport { useMount } from 'react-use';\nimport { FiX, FiCalendar, FiClock } from 'react-icons/fi';\n\nimport { cls } from '@mssgme/helpers';\nimport { renderNode } from '../../../helpers';\n\nimport styles from './Input.module.scss';\n\nInput.propTypes = {\n    containerClassName: PropTypes.string,\n    inputClassName: PropTypes.string,\n    className: PropTypes.string,\n    hasError: PropTypes.bool,\n    autoFocus: PropTypes.bool,\n    refInput: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    icon: PropTypes.oneOfType([PropTypes.func, PropTypes.object]),\n    beforeInput: PropTypes.any,\n    afterInput: PropTypes.any,\n    maxLength: PropTypes.number,\n    type: PropTypes.oneOf(['text', 'email', 'search', 'number', 'password', 'tel', 'datetime-local', 'date', 'time', 'hidden']),\n    size: PropTypes.oneOf(['small', 'normal']),\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n    disabled: PropTypes.bool,\n    inputStyle: PropTypes.oneOf(['default', 'grey']),\n    isSelectAddon: PropTypes.bool,\n    clearable: PropTypes.bool,\n    hexInput: PropTypes.bool,\n    hidden: PropTypes.bool,\n    builderInput: PropTypes.bool,\n};\n\nInput.defaultProps = {\n    containerClassName: '',\n    hasError: false,\n    disabled: false,\n    type: 'text',\n    inputStyle: 'default',\n    builderInput: false,\n    autoFocus: false,\n    isSelectAddon: true,\n};\n\nconst renderAddon = (node, className, isSelect) => {\n    let addon = renderNode(node);\n\n    if (addon) {\n        if (typeof addon === 'string' || !isSelect) {\n            addon = <div className={classNames(styles.contextBlock, className)}>{addon}</div>;\n        } else if (isSelect) {\n            addon = React.cloneElement(addon, cls(classNames(addon.props.className, styles.select), addon.props));\n        }\n    }\n\n    return addon;\n};\n\nexport default function Input({\n    className,\n    containerClassName,\n    inputClassName,\n    hasError,\n    icon: Icon,\n    size,\n    beforeInput,\n    afterInput,\n    hexInput,\n    hidden,\n    maxLength,\n    value,\n    disabled,\n    refInput,\n    inputStyle,\n    builderInput,\n    autoFocus,\n    isSelectAddon,\n    clearable,\n    type,\n    ...rest\n}) {\n    const isFilled = clearable && !!value;\n    const handleClear = useCallback(() => rest.onChange?.({ target: { name: rest.name, value: '' } }), [\n        rest.name,\n        rest.onChange,\n    ]);\n\n    const _beforeInput = renderAddon(beforeInput, className, isSelectAddon);\n    const _afterInput = renderAddon(afterInput, className, isSelectAddon);\n\n    const _rootClassName = classNames(\n        styles.root,\n        {\n            [styles.icon]: Icon,\n            [styles.before]: _beforeInput,\n            [styles.after]: _afterInput,\n            [styles.hidden]: hidden,\n            [styles.hexInput]: hexInput,\n            [styles.disabled]: disabled,\n            [styles.builderInput]: builderInput,\n            [styles.clearable]: isFilled,\n        },\n        inputStyle && styles[`root_${inputStyle}`],\n        containerClassName\n    );\n    const _inputClassName = classNames(\n        className,\n        styles.input,\n        {\n            [styles.error]: hasError,\n            [styles.paddingRight]: maxLength,\n            [styles.small]: size === 'small',\n            [styles.sizeNormal]: size === 'normal',\n        },\n        inputStyle && styles[inputStyle],\n        inputClassName\n    );\n    const valueLength = value ? String(value).trim().length : 0;\n    const ref = useRef();\n\n    useMount(() => {\n        if (autoFocus) {\n            setTimeout(() => ref.current?.focus(), 100);\n        }\n    });\n\n    return (\n        <div className={_rootClassName}>\n            {Icon && <Icon size={25} color=\"#C7C7CC\" />}\n            {_beforeInput}\n            <div className={styles.inputWrapper} style={{ color: rest.style?.color }}>\n                <input\n                    ref={composeRefs(ref, refInput)}\n                    className={_inputClassName}\n                    value={value}\n                    maxLength={maxLength}\n                    disabled={disabled}\n                    type={type}\n                    {...rest}\n                />\n                {maxLength && <span className={styles.counter}>{maxLength - valueLength}</span>}\n                {isFilled && (\n                    <div\n                        className={classNames(styles.clearAddon, !_afterInput && styles.hasRightAddon)}\n                        onClick={handleClear}\n                    >\n                        <FiX size={14} style={{ marginBottom: -1 }} />\n                    </div>\n                )}\n                { type === 'date' && <FiCalendar className={styles.customNativeIcon} /> }\n                { type === 'time' && <FiClock className={styles.customNativeIcon} /> }\n            </div>\n            {_afterInput}\n        </div>\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"iFkKSB4z\",\"right\":\"RJ1kvEo-\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './FormRow.module.scss';\n\nconst FormRow = ({ className, hasError, align, children, as: Tag = 'div', ...rest }) => (\n    <Tag className={classNames(className, styles.root, { [styles.right]: align === 'right' })} {...rest}>\n        {children}\n    </Tag>\n);\n\nFormRow.propTypes = {\n    className: PropTypes.string,\n    hasError: PropTypes.bool,\n    children: PropTypes.any,\n    as: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType, PropTypes.func]),\n    align: PropTypes.oneOf(['left', 'right']),\n};\n\nFormRow.defaultProps = {\n    hasError: false,\n};\n\nexport default FormRow;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_1ReFkUPN\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport styles from './Label.module.scss';\n\nconst Label = ({ className, hasError, children, ...rest }) => (\n    <label className={classNames(styles.root, className)} {...rest}>\n        {children}\n    </label>\n);\n\nLabel.propTypes = {\n    className: PropTypes.string,\n    hasError: PropTypes.bool,\n    children: PropTypes.any,\n};\n\nLabel.defaultProps = {\n    hasError: false,\n};\n\nexport default Label;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"zoejBvMa\",\"nonCritical\":\"_2P6dCq2b\",\"shake\":\"jGFfr8Jo\",\"animated\":\"_3iF1zioC\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport styles from './FormErrors.module.scss';\n\nFormErrors.propTypes = {\n    error: PropTypes.oneOfType([PropTypes.string, PropTypes.array]),\n    critical: PropTypes.bool,\n    shake: PropTypes.bool,\n    errorStyle: PropTypes.object,\n};\n\nexport default function FormErrors({ error, critical = true, shake, errorStyle }) {\n    if (!error) return null;\n\n    const errors = Array.isArray(error) ? error : [error];\n\n    return (\n        <ul\n            className={classNames(styles.root, {\n                [styles.nonCritical]: !critical,\n                [styles.shake]: shake,\n                [styles.animated]: shake,\n            })}\n            style={errorStyle}\n        >\n            {errors.map((msg, index) => (\n                <li key={index}>{msg}</li>\n            ))}\n        </ul>\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"labelContainer\":\"_28omglMi\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Input } from '../Inputs';\nimport FormRow from '../FormRow';\nimport Label from '../Label';\nimport FormErrors from '../FormErrors';\n\nimport styles from './FormField.module.scss';\n\nconst labelStyle = { paddingLeft: 10, color: '#333', marginBottom: 4 };\nexport default function FormField({\n    component: Component = Input,\n    id,\n    label,\n    required,\n    labelClassName,\n    inputClassName,\n    errorStyle,\n    shakeError,\n    errors,\n    wrapAs,\n    children,\n    ...rest\n}) {\n    return (\n        <FormRow as={wrapAs}>\n            {label && (\n                <div className={styles.labelContainer}>\n                    <Label\n                        style={rest.builderInput ? labelStyle : null}\n                        htmlFor={id}\n                        hasError={!!errors}\n                        className={labelClassName}\n                    >\n                        {label} {required && <span>*</span>}\n                    </Label>\n                </div>\n            )}\n            <Component id={id} className={inputClassName} hasError={!!errors} {...rest} />\n            {children}\n            {errors && <FormErrors error={errors} errorStyle={errorStyle} shake={shakeError} />}\n        </FormRow>\n    );\n}\n\nFormField.propTypes = {\n    component: PropTypes.oneOfType([PropTypes.element, PropTypes.func]),\n    wrapAs: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType, PropTypes.func]),\n    label: PropTypes.string,\n    id: PropTypes.string,\n    labelClassName: PropTypes.string,\n    inputClassName: PropTypes.string,\n    errorStyle: PropTypes.object,\n    children: PropTypes.node,\n    placeholder: PropTypes.string,\n    required: PropTypes.bool,\n    shakeError: PropTypes.bool,\n    errors: PropTypes.oneOfType([PropTypes.bool, PropTypes.string, PropTypes.array]),\n};\n","import { useMemo } from 'react';\n\nimport { ProductsBlockKind } from '@mssgme/shared';\nimport { useElementTheme, useTheme } from '@mssgme/ui';\n\nexport const useModalThemes = (kind = ProductsBlockKind) => {\n    const baseTheme = useTheme();\n    const { theme, style } = useElementTheme({ baseTheme, elementPath: `blocks.${kind.toLowerCase()}`, compile: true });\n\n    return useMemo(\n        () => ({\n            theme,\n            style,\n            // todo: find out why this is needed (`colors.background` vs `page.backgroundColor`)\n            modalStyle: { ...style, backgroundColor: baseTheme.colors.background },\n            contentStyle: { ...theme, ...style, backgroundColor: baseTheme.colors.background },\n        }),\n        [theme, style]\n    );\n};\n","import { useMemo } from 'react';\nimport { SubscriptionFormBlockKind } from '@mssgme/shared';\nimport { useModalThemes } from './useModalThemes';\n\nexport const useInputTheme = (overrideTheme) => {\n    const { theme } = useModalThemes(SubscriptionFormBlockKind);\n    const customTheme = overrideTheme || theme;\n\n    return useMemo(\n        () => ({\n            input: {\n                backgroundColor: customTheme.inputBackgroundColor,\n                color: customTheme.inputTextColor,\n                border: 'none',\n                borderRadius: customTheme.borderRadius,\n            },\n            error: {\n                color: customTheme.inputTextColor,\n                padding: '2px 8px',\n                backgroundColor: customTheme.inputBackgroundColor,\n                display: 'inline-block',\n                borderRadius: customTheme.borderRadius,\n            },\n        }),\n        [customTheme]\n    );\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"input\":\"_1qb3rRKb\",\"label\":\"_3h3lgsyp\"};","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useField } from 'formik';\n\nimport { __t, DYNAMIC_FIELD_SIZE_NORMAL, getLocalizedDynamicLabel, mapDynamicFieldToName } from '@mssgme/shared';\nimport { FormField, Input, Textarea, SelectSimple, RadioGroup, CheckboxGroup, CountrySelect } from '@mssgme/ui';\n\nimport { useInputTheme } from '../../hooks';\nimport { DynamicFormTypes } from './dynamicFormTypes';\n\nimport styles from './DynamicFormInput.module.scss';\n\nconst specificComponents = {\n    select: SelectSimple,\n    radio: RadioGroup,\n    checkbox: CheckboxGroup,\n    country: CountrySelect,\n};\n\nconst inputSpecificTypes = {\n    name: 'text',\n    phone: 'tel',\n};\n\nconst handleEnterKey = (e) => {\n    if (e.key === 'Enter') {\n        e.preventDefault();\n    }\n};\n\nexport const isFieldPropSupported = (type, feature) => {\n    switch (feature) {\n        case 'paneProp':\n            return ['radio', 'checkbox'].includes(type);\n        case 'maxLength':\n            return !['date', 'time', 'number'].includes(type);\n        case 'hasPlaceholderOption':\n            return type === 'select';\n        case 'lang':\n            return type === 'country';\n        default:\n            return false;\n    }\n};\n\nconst getFieldProps = (field, lang) => {\n    const { type, required, size, options } = field;\n    const specificComponent = specificComponents[type];\n    const maxLength = size || DYNAMIC_FIELD_SIZE_NORMAL;\n    const props = {\n        required,\n        label: getLocalizedDynamicLabel(field),\n        component: specificComponent,\n    };\n\n    if (specificComponent) {\n        const optionsArray = options?.split(/\\r?\\n/).filter(Boolean).map((option) => ({ label: option, value: option }));\n\n        if (isFieldPropSupported(type, 'hasPlaceholderOption')) {\n            optionsArray.unshift({ label: __t('not_selected'), value: '' });\n        }\n\n        props.options = optionsArray;\n\n        if (isFieldPropSupported(type, 'paneProp')) {\n            props.pane = true;\n        }\n    } else if (maxLength > DYNAMIC_FIELD_SIZE_NORMAL && type === 'text') {\n        props.component = Textarea;\n    } else {\n        props.component = Input;\n        props.type = inputSpecificTypes[type] || type;\n        props.onKeyPress = handleEnterKey;\n\n        if (type === 'number') {\n            props.min = 0;\n            props.inputMode = 'numeric';\n            props.pattern = '[0-9]*';\n        }\n    }\n\n    if (isFieldPropSupported(type, 'maxLength')) {\n        props.maxLength = maxLength;\n    }\n\n    if (isFieldPropSupported(type, 'lang')) {\n        props.lang = lang;\n    }\n\n    return props;\n};\n\nexport const DynamicFormInput = ({ index, input, as, theme, lang }) => {\n    const style = useInputTheme(theme);\n    const fieldProps = useMemo(() => getFieldProps(input, lang), [input, lang]);\n    const [field, meta] = useField(mapDynamicFieldToName(input, index));\n\n    return (\n        <FormField\n            shakeError\n            as={as}\n            errors={meta.touched && meta.error}\n            style={style.input}\n            errorStyle={style.error}\n            inputClassName={styles.input}\n            labelClassName={styles.label}\n            {...field}\n            {...fieldProps}\n        />\n    );\n};\n\nDynamicFormInput.propTypes = {\n    input: DynamicFormTypes.input.isRequired,\n    index: PropTypes.number.isRequired,\n    as: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType]),\n    theme: PropTypes.object,\n    lang: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_17Piks1c\"};","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { cls } from '@mssgme/helpers';\nimport { DynamicFormInput } from './DynamicFormInput';\nimport { DynamicFormTypes } from './dynamicFormTypes';\n\nimport styles from './DynamicFormInputs.module.scss';\n\nexport const DynamicFormInputs = ({ items, theme, lang, ...rest }) => {\n    return (\n        <ul {...cls([styles.root, styles[theme.gridMode]], rest)}>\n            {items.map((item, index) => (\n                <DynamicFormInput\n                    as=\"li\"\n                    key={item._id || index}\n                    index={index}\n                    input={item}\n                    theme={theme}\n                    lang={lang}\n                />\n            ))}\n        </ul>\n    );\n};\n\nDynamicFormInputs.propTypes = {\n    items: DynamicFormTypes.inputs.isRequired,\n    theme: PropTypes.object.isRequired,\n    lang: PropTypes.string,\n};\n","import TinyColor2 from 'tinycolor2';\n\nconst wrap = (color) => (color?.getBrightness ? color : new TinyColor2(color));\n\nexport default (backgroundColor, color, text) => {\n    const factor1 = wrap(backgroundColor).getBrightness();\n    const factor2 = wrap(color).getBrightness();\n\n    if (Math.abs(factor1 - factor2) < 30) {\n        return {\n            backgroundColor,\n            color: wrap(text)\n                .setAlpha(0.9)\n                .toRgbString(),\n            border: color,\n        };\n    }\n\n    return {\n        backgroundColor,\n        color,\n        border: color,\n    };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2yeGCsqz\",\"contentAlignLeft\":\"S-QATZQl\"};","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\n\nimport { cls, getContourColor, keyHash } from '@mssgme/helpers';\nimport { Button } from '@mssgme/ui';\n\nimport styles from './ThemedButton.module.scss';\n\nexport const ThemedButton = ({ theme, isFetching, disabled, contour, style: baseStyle, contentAlignLeft, ...rest }) => {\n    const style = useMemo(() => {\n        if (contour) {\n            const { backgroundColor, color, border } = getContourColor(\n                theme.backgroundColor,\n                theme.buttonBackground,\n                theme.buttonTextColor\n            );\n\n            return {\n                backgroundColor,\n                color,\n                border: `1px solid ${border}`,\n                ...baseStyle,\n            };\n        }\n\n        return {\n            backgroundColor: theme.buttonBackground,\n            color: theme.buttonTextColor,\n            ...baseStyle,\n        };\n    }, [contour, theme, keyHash(baseStyle)]);\n\n    return (\n        <Button\n            tag=\"a\"\n            size=\"standart\"\n            isFetching={isFetching}\n            disabled={disabled}\n            style={style}\n            loaderColor={style.color}\n            {...cls([styles.root, contentAlignLeft && styles.contentAlignLeft], rest)}\n        />\n    );\n};\n\nThemedButton.propTypes = {\n    ...Button.propTypes,\n    theme: PropTypes.object.isRequired,\n    contour: PropTypes.bool,\n    contentAlignLeft: PropTypes.bool,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"buttonContainer\":\"cj99FfzI\",\"successContent\":\"FCtOqd0H\",\"icon\":\"_3Diq6yIl\",\"closeIcon\":\"_14615TDm\",\"text\":\"_1jTzIMNM\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useAsyncFn } from 'react-use';\nimport { AnimatePresence } from 'framer-motion';\nimport { FiCheck, FiX } from 'react-icons/fi';\n\nimport { FormikProvider, LandingsPropTypes, SubmitButton, useEnhancedFormik } from '@mssgme/ui';\nimport { DynamicFormInputs, ThemedButton, ThemedModal, useDynamicForm, useDynamicFormErrors } from '../../../UI';\n\nimport styles from './SubscriptionFormContent.module.scss';\n\nexport const SubscriptionFormContent = ({ block, theme, onSubmit: rawSubmit, interactive, ...rest }) => {\n    const lang = navigator.language;\n    const [sent, setSent] = useState();\n    const { validationSchema, initialValues } = useDynamicForm({\n        items: block.items,\n        lang,\n    });\n    const FormTag = interactive ? 'form' : 'div';\n\n    const [{ loading, error }, onSubmit] = useAsyncFn(\n        async (values) => {\n            if (false === (await rawSubmit(values))) {\n                return;\n            }\n\n            setSent(true);\n        },\n        [rawSubmit]\n    );\n\n    const formik = useEnhancedFormik({\n        initialValues,\n        validationSchema,\n        onSubmit,\n    });\n\n    const handleSentModalClosed = useCallback(() => {\n        setSent(false);\n        formik.resetForm();\n    }, [formik.resetForm]);\n\n    useEffect(() => {\n        if (sent && block.hasUrl && block.sentUrl) {\n            const timer = setTimeout(() => (window.location = block.sentUrl), 1000);\n\n            return () => clearTimeout(timer);\n        }\n    }, [sent, block.hasUrl, block.sentUrl]);\n\n    useDynamicFormErrors(error?.errors, formik.setErrors);\n\n    return (\n        <FormikProvider value={formik}>\n            <FormTag id={`form_${block._id}`} {...rest}>\n                <DynamicFormInputs items={block.items} theme={theme} lang={lang} />\n\n                <div className={styles.buttonContainer}>\n                    <SubmitButton\n                        fullWidth\n                        as={ThemedButton}\n                        theme={theme}\n                        isInitialHidden={false}\n                        isFetching={loading}\n                        disabled={!block.items.length}\n                        style={{\n                            borderRadius: theme.borderRadius,\n                        }}\n                    >\n                        {block.sendLabel}\n                    </SubmitButton>\n                </div>\n            </FormTag>\n\n            <AnimatePresence>\n                {sent && (\n                    <ThemedModal compact overlay showHeader={false} onClose={handleSentModalClosed}>\n                        {(handleClose) => (\n                            <div className={styles.successContent}>\n                                <div className={styles.closeIcon} onClick={handleClose}>\n                                    <FiX size={26} />\n                                </div>\n                                <FiCheck size={60} className={styles.icon} />\n                                <p className={styles.text}>{block.sentText}</p>\n                            </div>\n                        )}\n                    </ThemedModal>\n                )}\n            </AnimatePresence>\n        </FormikProvider>\n    );\n};\n\nSubscriptionFormContent.propTypes = {\n    block: LandingsPropTypes.block.isRequired,\n    theme: PropTypes.object.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    interactive: PropTypes.bool,\n};\n","import { useLayoutEffect } from 'react';\nimport { mapValues } from 'lodash';\nimport { __t } from '@mssgme/shared';\n\n// todo: fix dynamic form translates and then remove this\nexport const useDynamicFormErrors = (errors, onChange) => useLayoutEffect(\n    () => {\n        onChange(mapValues(errors, (value) => __t(value)));\n    },\n    [errors, onChange]\n);\n","import React, { useCallback } from 'react';\n\nimport { SubscriptionFormBlockKind } from '@mssgme/shared';\nimport { feedbackApi } from '@mssgme/lib';\nimport { LandingsPropTypes, useMergedStyles } from '@mssgme/ui';\n\nimport { useBlockTheme, usePageData, useWebsiteData } from '../../../hooks';\nimport { BlockBase } from '../BlockBase';\nimport { SubscriptionFormContent } from './SubscriptionFormContent';\n\nexport default function SubscriptionForm({ block, style: baseStyle, interactive, ...rest }) {\n    const { theme, style } = useBlockTheme(block);\n    const website = useWebsiteData();\n    const page = usePageData();\n    const combined = useMergedStyles(style, baseStyle);\n\n    const handleSubmit = useCallback(\n        async (values) => {\n            if (!interactive) {\n                return;\n            }\n\n            await feedbackApi.submit(\n                website.workspace,\n                website._id,\n                { pageId: page._id, blockId: block._id, data: values }\n            );\n\n            const submitEvent = new CustomEvent('formSubmitted', {\n                detail: block._id,\n            });\n\n            document.dispatchEvent(submitEvent);\n        },\n        [website, interactive]\n    );\n\n    return (\n        <BlockBase\n            as={SubscriptionFormContent}\n            interactive={interactive}\n            block={block}\n            style={combined}\n            theme={theme}\n            onSubmit={handleSubmit}\n            {...rest}\n        />\n    );\n}\n\nSubscriptionForm.propTypes = {\n    ...BlockBase.propTypes,\n    block: LandingsPropTypes.block.isRequired,\n};\n\nSubscriptionForm.defaultProps = BlockBase.defaultProps;\n\nSubscriptionForm.kind = SubscriptionFormBlockKind;\n","import { useMemo } from 'react';\nimport { keyHash } from '@mssgme/helpers';\n\nexport function useMergedStyles(baseStyle, additionalStyle) {\n    return useMemo(\n        () => (baseStyle && additionalStyle) ? { ...baseStyle, ...additionalStyle } : (baseStyle || additionalStyle),\n        [keyHash(baseStyle), keyHash(additionalStyle)]\n    );\n}\n","import SubscriptionForm from './SubscriptionForm';\n\nexport default SubscriptionForm;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3b8Ycz5u\",\"spinner\":\"_1Rh5MPD-\",\"rotate\":\"uVvsUoBR\",\"black\":\"_21R2-M7g\",\"gray\":\"kpP_DuD9\",\"white\":\"_23bgChkK\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\n\nimport styles from './Spinner.module.scss';\n\nexport const POINTS = ['%', 'px', 'pt', 'em'];\nexport const COLORS = ['black', 'white', 'gray'];\n\nSpinner.propTypes = {\n    className: PropTypes.string,\n    style: PropTypes.object,\n    size: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    borderWidth: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    color: PropTypes.oneOf(COLORS),\n    duration: PropTypes.number,\n};\n\nSpinner.defaultProps = {\n    size: 40,\n    duration: 0.8,\n    color: 'black',\n};\n\nexport default function Spinner({ className, borderWidth, size, duration, color, style: baseStyle, ...rest }) {\n    const style = useMemo(() => {\n        const normalized = normalizeSize(size);\n        const normalizedBorderWidth = normalizeSize(borderWidth || Math.round(+normalized * 0.05));\n\n        return {\n            width: normalized,\n            height: normalized,\n            borderWidth: normalizedBorderWidth,\n            animationDuration: `${duration}s`,\n            WebkitAnimationDuration: `${duration}s`,\n            MozAnimationDuration: `${duration}s`,\n        };\n    }, [size, duration, borderWidth]);\n\n    return (\n        <div className={cn(styles.root, className)} style={baseStyle}>\n            <div className={cn(styles.spinner, styles[color])} style={style} {...rest} />\n        </div>\n    );\n}\n\nexport function normalizeSize(size, def = 'px') {\n    if (!size) return;\n\n    const str = String(size);\n    const withPoints = POINTS.find((points) => str.indexOf(points) > 0);\n\n    return withPoints ? size : `${size}${def}`;\n}\n","import Spinner from './Spinner';\n\nexport default Spinner;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2ao_NRDG\",\"disabled\":\"eO-kJRgs\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport { __t } from '@mssgme/shared';\nimport styles from './MoreButton.module.scss';\n\nexport const MoreButton = ({ disabled, className, ...rest }) => (\n    <span className={classNames(styles.root, { [styles.disabled]: disabled }, className)} {...rest}>\n        {__t('show_more')}\n    </span>\n);\n\nMoreButton.propTypes = {\n    disabled: PropTypes.bool,\n    className: PropTypes.string,\n};\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\nfunction ImageIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M19 3H5a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2V5a2 2 0 00-2-2z\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n            <path\n                d=\"M8.5 10a1.5 1.5 0 100-3 1.5 1.5 0 000 3zM21 15l-5-5L5 21\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\nconst ForwardRef = React.forwardRef(ImageIcon);\nexport default ForwardRef;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3bCsauXR\"};","import React from 'react';\n\nimport { ImageIcon } from '@mssgme/icons';\n\nimport styles from './Thumbnail.module.scss';\n\nexport default function Thumbnail() {\n    return <ImageIcon className={styles.root} />;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3e7QNRth\",\"img\":\"_3vG302zd\",\"fit\":\"_3VbF7O6o\",\"spinner\":\"_2ul-wS9D\",\"visible\":\"_3OhZyTcu\",\"inline\":\"SPLTsGa3\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport { cls } from '@mssgme/helpers';\nimport Spinner from '../Spinner';\nimport useLoadImage from './useLoadImage';\nimport useIntersect from './useIntersect';\nimport Thumbnail from './Thumbnail';\n\nimport styles from './LazyImage.module.scss';\n\nexport default function LazyImage({ mode, src, alt, containerClassName, ...rest }) {\n    const { ref, isIntersecting, isIntersect } = useIntersect();\n    const { isFetching, isLoaded, onLoad, onError, error } = useLoadImage();\n\n    return (\n        <div ref={ref} className={classNames(styles.root, styles[mode], containerClassName)}>\n            {isFetching && mode !== 'inline' && <Spinner size=\"50%\" color=\"gray\" className={styles.spinner} />}\n            {error && <Thumbnail />}\n            <img\n                src={isIntersect ? src : null}\n                alt={alt}\n                onLoad={onLoad}\n                onError={onError}\n                {...cls([styles.img, isLoaded && isIntersecting && styles.visible], rest)}\n            />\n        </div>\n    );\n}\n\nLazyImage.propTypes = {\n    className: PropTypes.string,\n    containerClassName: PropTypes.string,\n    mode: PropTypes.oneOf(['fit', 'inline']),\n    src: PropTypes.string.isRequired,\n    alt: PropTypes.string,\n};\n\nLazyImage.defaultProps = {\n    mode: 'fit',\n};\n","import { useRef, useEffect, useMemo, useState } from 'react';\n\nexport default function useIntersect() {\n    const ref = useRef(null);\n    const [isIntersecting, setIsIntersecting] = useState(false);\n    const [isIntersect, setIsIntersect] = useState(false);\n\n    const observer = useMemo(\n        () =>\n            new IntersectionObserver(\n                function onIntersect([entry]) {\n                    if (entry?.isIntersecting) {\n                        setIsIntersecting(true);\n                        setIsIntersect(true);\n                    } else if (entry.rootBounds) {\n                        setIsIntersecting(false);\n                    }\n                },\n                {\n                    root: null,\n                    rootMargin: '100px 0px 100px 0px',\n                    threshold: 0.01,\n                }\n            ),\n        []\n    );\n\n    useEffect(() => {\n        const element = ref.current;\n\n        if (!element) {\n            return;\n        }\n\n        observer.observe(element);\n\n        return () => {\n            observer.unobserve(element);\n        };\n    }, [ref.current]);\n\n    return {\n        ref,\n        isIntersecting,\n        isIntersect,\n    };\n}\n","import { useCallback, useState } from 'react';\n\nexport default function useLoadImage() {\n    const [state, setState] = useState({ isFetching: true, isLoaded: false, error: null });\n\n    const onLoad = useCallback(() => setState({ isFetching: false, isLoaded: true, error: null }), []);\n    const onError = useCallback((error) => setState({ isFetching: false, isLoaded: false, error }), []);\n\n    return {\n        ...state,\n        onLoad,\n        onError,\n    };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"_3i0RYyzx\",\"thumbnail\":\"_3nghvdYf\",\"emptyPlaceholder\":\"_26eyOOj7\",\"meta\":\"_2-Jm8Kqt\",\"title\":\"At3EshTx\",\"price\":\"_2OiOAEyh\",\"discountPrice\":\"_11OX8a5t\",\"lineThrough\":\"_2AiMmAX4\",\"list\":\"_2CVXm-B4\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport { IoMdImage } from 'react-icons/io';\n\nimport { __t } from '@mssgme/shared';\nimport { LazyImage } from '@mssgme/ui';\nimport { useUploads, MediaSizes } from '../../../hooks';\n\nimport styles from './ServicesGridItem.module.scss';\n\nexport const ServicesGridItem = ({ item, themeStyles, ...rest }) => {\n    const { getMediaSizeUrl } = useUploads();\n    const photoUrl = getMediaSizeUrl(item.photoUrl, MediaSizes.Half);\n\n    return (\n        <div className={cn(styles.item, styles[themeStyles.gridMode])} {...rest}>\n            <div className={styles.thumbnail} style={{ backgroundColor: themeStyles.backgroundColor }}>\n                {photoUrl ? (\n                    <LazyImage src={photoUrl} alt={item.title} />\n                ) : (\n                    <div className={styles.emptyPlaceholder}>\n                        <IoMdImage size=\"40%\" color=\"#fff\" />\n                    </div>\n                )}\n            </div>\n            <div className={styles.meta} style={{ color: themeStyles.color }}>\n                <div>\n                    <h6 className={styles.title}>{item.title}</h6>\n                    {item.price && (\n                        <div className={styles.price}>\n                            {item.price.formattedDiscount &&\n                                (item.price.discount === 0 ? (\n                                    <span className={styles.discountPrice}>{__t('free')}</span>\n                                ) : (\n                                    <span className={styles.discountPrice}>{item.price.formattedDiscount}</span>\n                                ))}\n                            {item.price.amount === 0 ? (\n                                __t('free')\n                            ) : (\n                                <span className={item.price.formattedDiscount ? styles.lineThrough : null}>\n                                    {item.price.formatted}\n                                </span>\n                            )}\n                        </div>\n                    )}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nServicesGridItem.propTypes = {\n    item: PropTypes.object.isRequired,\n    themeStyles: PropTypes.object.isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"S3bAp94B\",\"opacity\":\"_2a34KYIK\",\"root\":\"qBHVQMTC\",\"active\":\"_2cNHyy1o\",\"closeButtonWrapper\":\"ADdo2OLo\",\"closeButton\":\"_2PoJVfiW\",\"swiperContainer\":\"_3j2O4fev\",\"preloader\":\"bS1fgGVp\",\"swiper\":\"_9F-nukYn\",\"slide\":\"PCIc8MAp\",\"slideImage\":\"_9Bzii90O\",\"imagePreloader\":\"_2wdrSS_3\",\"loaded\":\"uwUjL2hh\",\"zoomIcon\":\"h4xyuowR\",\"controlsContainer\":\"oC3GN-M9\",\"hidden\":\"ffWtCXu8\",\"controls\":\"_17hOUAvl\",\"control\":\"_2qsit8Zp\",\"pagination\":\"_38c03yd2\",\"clickablePagination\":\"tPjH--Qc\",\"dot\":\"_1Sc0v4Cm\",\"activeBullet\":\"_1SlMiqjm\",\"content\":\"_k0gsuOS\",\"dark\":\"_2tRlGrSW\",\"title\":\"UJ66Mtef\",\"price\":\"_2_N2jYWK\",\"lineThrough\":\"_3X1sMxR_\",\"description\":\"E8Viv-bc\",\"externalButton\":\"_18OLPdvH\",\"buttonContent\":\"_1bzMZzvX\",\"url\":\"_1_7rc7KX\",\"blurred\":\"Fq681W1q\",\"contacts\":\"_2Q7Qz2la\",\"actionsBuy\":\"_1YteH_GQ\",\"actionsBuyButton\":\"_1j1eO2qb\",\"actionsWrap\":\"_1Y9WkOE9\",\"fixedPane\":\"_21GK1KK0\",\"noSwiping\":\"_6Ayxzp_L\",\"cartBouncer\":\"_3LDVdfc5\"};","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { FiZoomIn } from 'react-icons/fi';\n\nimport { cls } from '@mssgme/helpers';\nimport { LoadingIndicator } from '@mssgme/ui';\nimport { MediaSizes, useUploads } from '../../hooks';\n\nimport styles from './ServiceContent.module.scss';\n\nexport const ServicePhoto = React.forwardRef(function ServicePhoto(\n    { photoUrl, title, index, style, onLoad, onClick, ...rest },\n    ref\n) {\n    const { getMediaSizeUrl } = useUploads();\n    const handleClick = useCallback(() => void onClick(index), [index, onClick]);\n\n    return (\n        <div ref={ref} {...cls(styles.slide, rest)}>\n            <div className={styles.slideImage}>\n                <img\n                    {...{ 'data-src': getMediaSizeUrl(photoUrl, MediaSizes.Large) }}\n                    className=\"swiper-lazy\"\n                    alt={title}\n                    onLoad={onLoad}\n                    onClick={handleClick}\n                />\n                <div className={styles.zoomIcon} style={style.common}>\n                    <FiZoomIn size={14} />\n                </div>\n                <div className={styles.imagePreloader} style={style.background}>\n                    <div>\n                        <LoadingIndicator />\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n});\n\nServicePhoto.propTypes = {\n    photoUrl: PropTypes.string.isRequired,\n    title: PropTypes.string.isRequired,\n    index: PropTypes.number.isRequired,\n    style: PropTypes.object.isRequired,\n    onLoad: PropTypes.func.isRequired,\n    onClick: PropTypes.func.isRequired,\n};\n","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\nimport { FiChevronLeft, FiChevronRight, FiX } from 'react-icons/fi';\n\nimport { LoadingIndicator, Swiper } from '@mssgme/ui';\nimport { LightBox } from '../LightBox';\nimport { ServicePhoto } from './ServicePhoto';\n\nimport styles from './ServiceContent.module.scss';\n\nconst lazy = {\n    loadPrevNext: true,\n    preloaderClass: styles.imagePreloader,\n    loadedClass: styles.loaded,\n};\n\nexport const ServicePhotos = ({ photos, title, isActive, isPrev, isNext, themeStyles, style, onClose }) => {\n    const navigationPrevRef = React.useRef(null);\n    const navigationNextRef = React.useRef(null);\n    const paginationElRef = useRef(null);\n    const [shouldSwiperLoad, setShouldSwiperLoad] = useState(false);\n    const [swiper, setSwiper] = useState(null);\n    const [isLightbox, setIsLightbox] = useState(false);\n    const [currentLightBoxSlideIndex, setCurrentLightBoxSlideIndex] = useState(0);\n\n    const hasMultiplePhotos = photos.length > 1;\n    const hasNavElements = !!paginationElRef.current && !!navigationPrevRef.current && !!navigationNextRef.current;\n    const showSwiper = shouldSwiperLoad && (!hasMultiplePhotos || hasNavElements);\n    const isSwipeable = isActive || isPrev || isNext;\n\n    const openLightBox = useCallback(() => setIsLightbox(true), []);\n    const closeLightBox = useCallback(() => setIsLightbox(false), []);\n\n    const handleSlide = useCallback((index) => {\n        setCurrentLightBoxSlideIndex(index);\n        openLightBox();\n    });\n\n    const pagination = useMemo(\n        () =>\n            hasMultiplePhotos && {\n                el: paginationElRef.current,\n                clickable: true,\n                renderBullet: (index, className) => {\n                    return `<div class=\"${className} ${styles.dot}\"><div style=\"background-color: ${\n                        themeStyles ? themeStyles.color : 'null'\n                    }\"></div></div>`;\n                },\n                clickableClass: styles.clickablePagination,\n                bulletActiveClass: styles.activeBullet,\n            },\n        [paginationElRef.current, hasMultiplePhotos, themeStyles]\n    );\n\n    const handleLoad = useCallback(() => void (swiper && swiper.updateAutoHeight()), [swiper]);\n\n    useEffect(() => {\n        if (isSwipeable) {\n            setShouldSwiperLoad(true);\n        }\n    }, [isSwipeable]);\n\n    return (\n        <div className={styles.swiperContainer}>\n            {showSwiper ? (\n                <Swiper\n                    className={styles.swiper}\n                    nested\n                    autoHeight\n                    lazy={lazy}\n                    pagination={pagination}\n                    navigation={{\n                        prevEl: navigationPrevRef.current,\n                        nextEl: navigationNextRef.current,\n                    }}\n                    speed={600}\n                    watchOverflow={hasMultiplePhotos}\n                    loop={hasMultiplePhotos}\n                    onSwiper={setSwiper}\n                >\n                    {photos.map((photoUrl, index) => (\n                        <ServicePhoto\n                            key={photoUrl + index}\n                            index={index}\n                            photoUrl={photoUrl}\n                            title={title}\n                            style={style}\n                            onLoad={handleLoad}\n                            onClick={handleSlide}\n                        />\n                    ))}\n                </Swiper>\n            ) : (\n                <div className={styles.preloader}>\n                    <div>\n                        <LoadingIndicator />\n                    </div>\n                </div>\n            )}\n            {hasMultiplePhotos && (\n                <div className={cn(styles.controlsContainer, { [styles.hidden]: !showSwiper })}>\n                    <div className={cn(styles.controls, styles.noSwiping)} style={style.pagination}>\n                        <div className={styles.control} ref={navigationPrevRef}>\n                            <FiChevronLeft size={16} />\n                        </div>\n                        <div className={styles.pagination} ref={paginationElRef} />\n                        <div className={styles.control} ref={navigationNextRef}>\n                            <FiChevronRight size={16} />\n                        </div>\n                    </div>\n                </div>\n            )}\n            <div\n                className={cn(styles.closeButtonWrapper, styles.noSwiping)}\n                onClick={onClose}\n                style={{ display: 'flex' }}\n            >\n                <div className={styles.closeButton} style={style.common}>\n                    <FiX size={14} />\n                </div>\n            </div>\n\n            {isLightbox && (\n                <React.Suspense fallback={null}>\n                    <LightBox\n                        activeIndex={currentLightBoxSlideIndex}\n                        images={photos.map((url) => ({ url }))}\n                        onClose={closeLightBox}\n                    />\n                </React.Suspense>\n            )}\n        </div>\n    );\n};\n\nServicePhotos.propTypes = {\n    photos: PropTypes.arrayOf(PropTypes.string.isRequired).isRequired,\n    isActive: PropTypes.bool,\n    isPrev: PropTypes.bool,\n    isNext: PropTypes.bool,\n    title: PropTypes.string.isRequired,\n    themeStyles: PropTypes.object,\n    style: PropTypes.object.isRequired,\n    onClose: PropTypes.func,\n};\n","import { useCallback } from 'react';\nimport { useRouteMatch, useLocation } from 'react-router-dom';\n\nimport { resolvePathname } from '@mssgme/helpers';\n\n/**\n * @param {{ useMatchUrl: boolean }} [defaults] Generator default options\n * @returns {{\n *   pathname: string;\n *   state: *;\n *   generateUrl: (path: string, options?: { useMatchUrl: boolean }) => string;\n * }} Generator method\n */\nexport function useNavigationUtils(defaults) {\n    const { url } = useRouteMatch();\n    const { pathname, state } = useLocation();\n\n    const generateUrl = useCallback(\n        (path, options) => {\n            const isRelative = path.charAt(0) !== '/';\n\n            if (isRelative) {\n                options = defaults ? { ...defaults, ...options } : options;\n\n                return resolvePathname(options?.useMatchUrl ? url : pathname, path);\n            }\n\n            return resolvePathname(path);\n        },\n        [url, pathname, defaults?.useMatchUrl]\n    );\n\n    return { generateUrl, pathname, url, state };\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2Vb8gBOm\"};","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useAsyncFn, useToggle } from 'react-use';\nimport { Link } from 'react-router-dom';\n\nimport { __t } from '@mssgme/shared';\nimport { cls } from '@mssgme/helpers';\nimport { ShoppingCartIcon } from '@mssgme/icons';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { useCoreContext, useFrontAPI, useModalThemes, usePageData, useSavedOrders } from '../../hooks';\nimport { ThemedButton } from '../ThemedButton';\nimport { ThemedModal } from '../ThemedModal';\n\nimport styles from './BuyButton.module.scss';\n\nconst propTypes = {\n    service: PropTypes.object.isRequired,\n    interactive: PropTypes.bool,\n    onCartAdd: PropTypes.func,\n    productCurrency: PropTypes.string,\n};\n\nfunction BuyButton({ service, interactive, onCartAdd, productCurrency, ...rest }) {\n    const api = useFrontAPI();\n    const { generateUrl } = useNavigationUtils();\n    const { router } = useCoreContext();\n    const { currentOrder, saveOrderId } = useSavedOrders();\n    const { _id: pageId } = usePageData();\n    const { contentStyle } = useModalThemes();\n    const isInCart = useMemo(() => !!currentOrder?.items.find((item) => item.productId === service._id), [\n        currentOrder,\n        service._id,\n    ]);\n    const orderId = currentOrder?._id;\n    const orderPath = useMemo(() => orderId && router.orders.toView(orderId, generateUrl('.')), [orderId]);\n    const isDifferentCurrency = useMemo(() => {\n        const orderCurrency = currentOrder?.items[0]?.price?.currency;\n\n        return !!(orderCurrency && orderCurrency !== productCurrency);\n    }, [currentOrder?.items, productCurrency]);\n    const [restrictCurrenciesMessage, toggleRestrictCurrenciesMessage] = useToggle(false);\n    const [{ loading }, handleBuy] = useAsyncFn(async () => {\n        if (isInCart || !interactive) {\n            return;\n        }\n\n        // restrict adding products with different currencies\n        if (isDifferentCurrency) {\n            toggleRestrictCurrenciesMessage(true);\n\n            return;\n        }\n\n        const payload = { items: [{ productId: service._id, quantity: 1 }] };\n        let result;\n\n        if (orderId) {\n            result = await api.orders.modify({ orderId, payload });\n        } else {\n            result = await api.orders.create({ pageId, payload });\n\n            saveOrderId(result._id);\n        }\n\n        onCartAdd && onCartAdd();\n\n        return result;\n    }, [interactive, service._id, pageId, orderId, isInCart, isDifferentCurrency, saveOrderId]);\n\n    return (\n        <>\n            <ThemedButton\n                fullWidth\n                theme={contentStyle}\n                disabled={!interactive}\n                isFetching={loading}\n                beforeIcon={isInCart && <ShoppingCartIcon />}\n                {...(isInCart\n                    ? {\n                        tag: Link,\n                        to: {\n                            pathname: orderPath,\n                            state: service.slug ? { backPath: router.product.toView(service.slug) } : null,\n                        },\n                    }\n                    : { onClick: handleBuy })}\n                {...cls(styles.root, rest)}\n            >\n                {isInCart ? __t('to_cart') : __t('buy')}\n            </ThemedButton>\n            {restrictCurrenciesMessage && (\n                <ThemedModal\n                    overlay\n                    compact\n                    padding\n                    title={__t('error_occurred')}\n                    onClose={toggleRestrictCurrenciesMessage}\n                >\n                    <div style={{ textAlign: 'center' }}>{__t('different_currencies_error')}</div>\n                </ThemedModal>\n            )}\n        </>\n    );\n}\n\nBuyButton.propTypes = propTypes;\n\nexport default BuyButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cls } from '@mssgme/helpers';\nimport { useRenderer } from '../../hooks';\nimport BuyButton from './BuyButton';\n\nimport styles from './ServiceContent.module.scss';\n\nexport const ServiceActionsPane = ({\n    contacts,\n    service,\n    interactive,\n    enabledPayments,\n    onCartAdd,\n    currency,\n    ...rest\n}) => {\n    const renderBlock = useRenderer();\n    const hasContacts = !!contacts?.length;\n\n    return (\n        <div {...cls(styles.contacts, rest)}>\n            {enabledPayments && (\n                <div className={styles.actionsBuy}>\n                    <BuyButton\n                        className={styles.actionsBuyButton}\n                        service={service}\n                        productCurrency={currency}\n                        interactive={interactive}\n                        onCartAdd={onCartAdd}\n                    />\n                </div>\n            )}\n\n            {hasContacts && (\n                <div className={styles.actionsWrap}>{contacts?.map(renderBlock)}</div>\n            )}\n        </div>\n    );\n};\n\nServiceActionsPane.propTypes = {\n    contacts: PropTypes.arrayOf(PropTypes.shape({ kind: PropTypes.string.isRequired })),\n    service: PropTypes.object.isRequired,\n    interactive: PropTypes.bool,\n    enabledPayments: PropTypes.bool,\n    onCartAdd: PropTypes.func.isRequired,\n    currency: PropTypes.string,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { __t } from '@mssgme/shared';\nimport { parseUrl, urlSafeComponent } from '@mssgme/helpers';\nimport { LinkBlank } from '@mssgme/ui';\nimport { ThemedButton } from '../ThemedButton';\nimport styles from './ServiceContent.module.scss';\n\nexport const ExternalUrlButton = ({ service, themeStyles }) => {\n    const url = service.externalButton?.url || service.externalUrl;\n    const parsed = url && parseUrl(url);\n\n    if (!url) {\n        return null;\n    }\n\n    return (\n        <ThemedButton\n            fullWidth\n            tag={LinkBlank}\n            theme={themeStyles}\n            href={url}\n            data-id={service._id}\n            data-title={service.title || service.name}\n            data-element=\"custom-link\"\n            data-event-name={urlSafeComponent(url)}\n            className={styles.externalButton}\n        >\n            <div className={styles.buttonContent}>\n                <span>{service.externalButton?.title || __t('visit_website')}</span>\n                {!!parsed && <span className={styles.url}>{parsed.hostname}</span>}\n            </div>\n        </ThemedButton>\n    );\n};\n\nExternalUrlButton.propTypes = {\n    service: PropTypes.object.isRequired,\n    themeStyles: PropTypes.object.isRequired,\n};\n","export default (url) => {\n    try {\n        return url && new URL(url);\n    } catch (err) {\n        return null;\n    }\n};\n","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { useToggle } from 'react-use';\nimport { AnimatePresence, motion } from 'framer-motion';\n\nimport { __t } from '@mssgme/shared';\nimport { isLightColor } from '@mssgme/helpers';\nimport { useWebsiteData } from '../../hooks';\nimport { ServicePhotos } from './ServicePhotos';\nimport { ServiceActionsPane } from './ServiceActionsPane';\nimport { ExternalUrlButton } from './ExternalUrlButton';\nimport { ShoppingCartButton } from '../ShoppingCartButton';\n\nimport styles from './ServiceContent.module.scss';\n\nexport function ServiceContent({\n    service: { description, price },\n    service,\n    contacts,\n    isActive,\n    isPrev,\n    isNext,\n    interactive,\n    themeStyles,\n    backUrl,\n    onClose,\n}) {\n    const [isCartAddAnimation, toggleCartAddAnimation] = useToggle(false);\n    const rootEl = useRef(null);\n    const serviceTitle = service.title || service.name;\n    const isDarkTheme = !isLightColor(themeStyles.backgroundColor);\n    const style = useMemo(() => {\n        const { color, backgroundColor } = themeStyles;\n        const backgroundColorRGB = backgroundColor.substring(0, 7);\n\n        return {\n            common: {\n                color,\n                backgroundColor,\n            },\n            color: {\n                color,\n            },\n            background: {\n                backgroundColor,\n            },\n            pagination: {\n                backgroundColor: backgroundColorRGB + '80',\n                color,\n            },\n            contacts: {\n                backgroundImage: `linear-gradient(to bottom, ${\n                    backgroundColorRGB\n                }00 0%, ${backgroundColor} 18px, ${backgroundColor} 100%)`,\n            },\n        };\n    }, [themeStyles]);\n\n    const isSwipeable = isActive || isPrev || isNext;\n\n    const onCartAdd = () => {\n        toggleCartAddAnimation();\n\n        const addedToCartEvent = new CustomEvent('productAddedToCart', {\n            detail: {\n                productId: service._id,\n                name: service.name,\n                price: service.price?.discount || service.price?.amount || 0,\n                currency: service.price?.currency || 'USD',\n            },\n        });\n\n        document.dispatchEvent(addedToCartEvent);\n    };\n\n    const contactsEl = (\n        <ServiceActionsPane\n            style={style.contacts}\n            contacts={contacts}\n            service={service}\n            interactive={interactive}\n            enabledPayments\n            onCartAdd={onCartAdd}\n            currency={price?.currency}\n        />\n    );\n\n    const handleClose = useCallback(\n        (e) => {\n            e?.preventDefault?.();\n\n            onClose(backUrl);\n        },\n        [backUrl, onClose]\n    );\n\n    useEffect(() => {\n        if (rootEl.current && rootEl.current.scrollTop !== 0) {\n            rootEl.current.scrollTo({ top: 0, behavior: 'smooth' });\n        }\n    }, [isSwipeable]);\n\n    useEffect(() => {\n        if (!isCartAddAnimation) {\n            return;\n        }\n\n        const timer = setTimeout(() => toggleCartAddAnimation(false), 1000);\n\n        return () => {\n            clearTimeout(timer);\n        };\n    }, [isCartAddAnimation]);\n\n    return (\n        <div className={styles.wrapper}>\n            <div className={cn(styles.root, { [styles.active]: isActive })} ref={rootEl} style={style.color}>\n                <ServicePhotos\n                    photos={service.photos}\n                    title={serviceTitle}\n                    isActive={isActive}\n                    isPrev={isPrev}\n                    isNext={isNext}\n                    themeStyles={themeStyles}\n                    style={style}\n                    onClose={handleClose}\n                />\n\n                <div className={cn(styles.content, isDarkTheme && styles.dark)}>\n                    <div>\n                        <h1 className={styles.title}>{serviceTitle}</h1>\n\n                        {price && (\n                            <div className={styles.price} style={style.color}>\n                                {price.formattedDiscount && (\n                                    <span>\n                                        {price.discount === 0 ? __t('free') : price.formattedDiscount}\n                                    </span>\n                                )}\n                                {price.amount === 0 ? (\n                                    __t('free')\n                                ) : (\n                                    <span className={price.formattedDiscount ? styles.lineThrough : null}>\n                                        {price.formatted}\n                                    </span>\n                                )}\n                            </div>\n                        )}\n\n                        <ExternalUrlButton themeStyles={themeStyles} service={service} />\n                    </div>\n                    {description && <p className={styles.description}>{description}</p>}\n                    {contactsEl && <div className={styles.fixedPane}>{contactsEl}</div>}\n\n                    <AnimatePresence>\n                        {isCartAddAnimation && (\n                            <motion.div\n                                className={styles.cartBouncer}\n                                animate={{ bottom: 16 }}\n                                exit={{ bottom: -60 }}\n                                transition={{ type: 'spring', stiffness: 100 }}\n                            >\n                                <ShoppingCartButton steady absolute />\n                            </motion.div>\n                        )}\n                    </AnimatePresence>\n                </div>\n            </div>\n\n            {contactsEl}\n        </div>\n    );\n}\n\nServiceContent.propTypes = {\n    service: PropTypes.object.isRequired,\n    contacts: PropTypes.array,\n    isActive: PropTypes.bool.isRequired,\n    isPrev: PropTypes.bool.isRequired,\n    isNext: PropTypes.bool.isRequired,\n    interactive: PropTypes.bool,\n    themeStyles: PropTypes.object.isRequired,\n    onClose: PropTypes.func.isRequired,\n    backUrl: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"_3dFwYfDF\",\"swiper\":\"_2FC4hRrn\",\"noSwiping\":\"_2oeRzOdh\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { isMatchedById } from '@mssgme/shared';\nimport { Swiper } from '@mssgme/ui';\nimport { usePageData } from '../../../hooks';\nimport { ServiceContent, ThemedModal } from '../../../UI';\n\nimport styles from './ServicesModal.module.scss';\n\nexport function ServicesModal({\n    services,\n    contacts,\n    activeIndex,\n    interactive,\n    onClose,\n    onClosing,\n    themeStyles,\n    handleHash,\n}) {\n    const page = usePageData();\n    const history = useHistory();\n    const hasMultipleServices = services.length > 1;\n\n    const contactBlocks = useMemo(\n        () =>\n            contacts\n                .filter(({ enabled }) => enabled)\n                .map(({ blockId }) => page.blocks.find(isMatchedById(blockId))),\n        [page, contacts]\n    );\n\n    const handleSlideChange = useCallback(\n        (swiper) => {\n            if (handleHash) {\n                history.replace('#' + services[swiper.realIndex]._id);\n            }\n        },\n        [handleHash, services]\n    );\n\n    return (\n        <ThemedModal overlay handleHash showHeader={false} onClose={onClose}>\n            <div className={styles.content}>\n                <Swiper\n                    className={styles.swiper}\n                    allowTouchMove={hasMultipleServices}\n                    initialSlide={activeIndex}\n                    noSwipingClass={styles.noSwiping}\n                    speed={600}\n                    pagination={false}\n                    onInit={handleSlideChange}\n                    onSlideChange={handleSlideChange}\n                >\n                    {services.map((service, index) =>\n                        Object.assign(\n                            ({ isActive, isPrev, isNext }) => (\n                                <ServiceContent\n                                    themeStyles={themeStyles}\n                                    service={service}\n                                    contacts={contactBlocks}\n                                    isActive={isActive}\n                                    isPrev={isPrev}\n                                    isNext={isNext}\n                                    interactive={interactive}\n                                    onClose={onClose}\n                                />\n                            ),\n                            { key: service._id || index }\n                        )\n                    )}\n                </Swiper>\n            </div>\n        </ThemedModal>\n    );\n}\n\nServicesModal.propTypes = {\n    services: PropTypes.array.isRequired,\n    contacts: PropTypes.array.isRequired,\n    activeIndex: PropTypes.number.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onClosing: PropTypes.func,\n    themeStyles: PropTypes.object.isRequired,\n    handleHash: PropTypes.bool,\n    interactive: PropTypes.bool,\n};\n\nServicesModal.defaultProps = {\n    handleHash: true,\n    interactive: true,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"servicesList\":\"_3rPL4LYT\",\"list\":\"_1IJ_QQ0p\",\"moreButtonContainer\":\"_2mLqLzuY\",\"blurred\":\"_3iGCU3Zs\"};","import PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useLocation, useHistory } from 'react-router';\nimport { useTimeoutFn } from 'react-use';\n\nimport { __t, ServicesGridBlockKind } from '@mssgme/shared';\nimport { LandingsPropTypes, Spinner } from '@mssgme/ui';\nimport { useBlockTheme } from '../../../hooks';\nimport { MoreButton } from '../../../UI';\nimport { BlockBase } from '../BlockBase';\nimport { ServicesGridItem } from './ServicesGridItem';\nimport { ServicesModal } from './ServicesModal';\n\nimport styles from './ServicesGrid.module.scss';\n\nconst ITEMS_PER_PAGE = 6;\n\n// TODO: Migrate/convert all service grid items to normal products and remove this block. Replace with Products block.\n\nexport default function ServicesGrid({ block, sortable, interactive, delay = 0, ...rest }) {\n    const location = useLocation();\n    const history = useHistory();\n    const hashId = location.hash && location.hash.slice(1);\n    const slideIndexFromHash = hashId && block.items.findIndex((item) => item._id === hashId);\n    const hasSlideFromHash = Number.isInteger(slideIndexFromHash) && slideIndexFromHash >= 0;\n    const { theme } = useBlockTheme(block);\n    const [page, setPage] = useState(1);\n    const [isDelayed, setDelayed] = useState(!!delay);\n    const [isServicesModal, setIsServicesModal] = useState(false);\n    const [currentServiceIndex, setCurrentServiceIndex] = useState(0);\n    const total = block.items.length;\n    const pages = Math.ceil(total / ITEMS_PER_PAGE);\n    const hasMore = page < pages;\n    const sliced = hasMore ? block.items.slice(0, page * ITEMS_PER_PAGE) : block.items;\n\n    const handleLoadMore = useCallback(() => setPage((old) => old + 1), []);\n    const openServicesModal = useCallback(() => {\n        setIsServicesModal(true);\n    }, []);\n    const closeServicesModal = useCallback(() => {\n        setIsServicesModal(false);\n        history.push(location.pathname);\n    }, [location.pathname]);\n\n    useEffect(() => {\n        if (hasSlideFromHash && !sortable) {\n            setCurrentServiceIndex(slideIndexFromHash);\n            openServicesModal();\n        }\n    }, [hasSlideFromHash]);\n\n    useTimeoutFn(() => setDelayed(false), delay);\n\n    if (isDelayed) {\n        return (\n            <BlockBase {...rest}>\n                <Spinner />\n            </BlockBase>\n        );\n    }\n\n    return (\n        <BlockBase lazy {...rest}>\n            {sliced.length ? (\n                <ul className={cn(styles.servicesList, styles[theme.gridMode])}>\n                    {sliced.map((item, index) => (\n                        <li key={item._id || index}>\n                            <ServicesGridItem\n                                item={item}\n                                themeStyles={theme}\n                                onClick={() => {\n                                    setCurrentServiceIndex(index);\n                                    openServicesModal();\n                                }}\n                            />\n                        </li>\n                    ))}\n                </ul>\n            ) : (\n                <ul\n                    className={cn(styles.servicesList, styles[theme.gridMode])}\n                    style={{ opacity: 0.7, pointerEvents: 'none' }}\n                >\n                    <li>\n                        <ServicesGridItem\n                            themeStyles={theme}\n                            item={{\n                                title: __t('title'),\n                                price: { amount: 9.99, formatted: '$19.99', formattedDiscount: '$9.99' },\n                            }}\n                        />\n                    </li>\n                    <li>\n                        <ServicesGridItem\n                            themeStyles={theme}\n                            item={{\n                                title: __t('title'),\n                                price: { amount: 9.99, formatted: '$19.99', formattedDiscount: '$9.99' },\n                            }}\n                        />\n                    </li>\n                </ul>\n            )}\n\n            {hasMore && (\n                <div className={styles.moreButtonContainer}>\n                    <MoreButton\n                        onClick={handleLoadMore}\n                        style={{\n                            backgroundColor: theme.backgroundColor,\n                            color: theme.color,\n                            borderRadius: theme.borderRadius,\n                        }}\n                    />\n                </div>\n            )}\n            {isServicesModal && (\n                <ServicesModal\n                    handleHash={interactive}\n                    themeStyles={theme}\n                    contacts={block.contacts}\n                    services={block.items}\n                    activeIndex={currentServiceIndex}\n                    interactive={interactive}\n                    onClose={closeServicesModal}\n                />\n            )}\n        </BlockBase>\n    );\n}\n\nServicesGrid.propTypes = {\n    ...BlockBase.propTypes,\n    block: LandingsPropTypes.block.isRequired,\n    delay: PropTypes.number,\n};\n\nServicesGrid.defaultProps = BlockBase.defaultProps;\n\nServicesGrid.kind = ServicesGridBlockKind;\n","import ServicesGrid from './ServicesGrid';\n\nexport default ServicesGrid;\n","import { isEmpty, isMatch as _isMatch, omit } from 'lodash';\n\nexport const tidyFilter = (filter) => Object.fromEntries(Object.entries(filter).filter(([, v]) => v ?? (v !== '')));\n\nexport const isMatch = (...args) => (i) => _isMatch(i, ...args);\nexport const isMatchId = (id) => isMatch({ _id: id });\nexport const isExact = (a) => (b) => a === b;\nexport const isSubstring = (a) => {\n    const match = String(a).toLowerCase();\n\n    return (b) => {\n        return String(b).toLowerCase().includes(match);\n    };\n};\n\nconst byEquality = (value, key) => (item) => item[key] === value;\nconst bySubstring = (value, key) => {\n    const cmp = isSubstring(value);\n\n    return (item) => cmp(item[key] || '');\n};\nconst byProps = (props, isEqual = isExact) => (value) => {\n    const cmp = isEqual(value);\n\n    return (item) => props.some((prop) => cmp(item[prop]));\n};\n\nconst mapping = {\n    0: byEquality,\n    1: bySubstring,\n};\nconst match = (items, matchers = {}) => {\n    const reducer = (result, [key, value]) => {\n        const mapKey = matchers[key];\n\n        if (mapKey === -1) {\n            // ignore filter\n            return result;\n        }\n\n        const matcher = typeof mapKey === 'function' ? mapKey : mapping[mapKey] || byEquality;\n        const predicate = matcher(value, key);\n\n        if (!result.every(predicate)) {\n            return result.filter(predicate);\n        }\n\n        return result;\n    };\n\n    return (filters) => Object.entries(filters).reduce(reducer, items);\n};\n\nconst filterWithSpecifier = (filter, invert) => {\n    const pairs = Object.entries(filter);\n\n    return (item) => !!(pairs.every(([key, value]) => !value || item[key] === value) ^ !!invert);\n};\n\nconst filterWithExclusion = (items, specifier) => {\n    if (!specifier) {\n        return items;\n    }\n\n    const filter = specifier.filter;\n    const exclude = specifier.exclude;\n\n    const hasFilter = !!filter;\n    const hasExclusion = !isEmpty(exclude);\n    const query = hasFilter || hasExclusion ? omit(specifier, ['filter', 'exclude']) : specifier;\n\n    if (hasFilter) {\n        items = items.filter(filter);\n    }\n\n    if (hasExclusion) {\n        items = items.filter(filterWithSpecifier(exclude, true));\n    }\n\n    if (!isEmpty(query)) {\n        items = items.filter(filterWithSpecifier(query));\n    }\n\n    return items;\n};\n\nexport default {\n    match,\n    isMatch,\n    isMatchId,\n    isExact,\n    isSubstring,\n    byEquality,\n    bySubstring,\n    byProps,\n    filterWithSpecifier,\n    filterWithExclusion,\n};\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\nfunction SearchIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M11 19a8 8 0 100-16 8 8 0 000 16zM21 21l-4.35-4.35\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\nconst ForwardRef = React.forwardRef(SearchIcon);\nexport default ForwardRef;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_37sP17sj\",\"disabled\":\"_3Fldiu2P\",\"thumbnail\":\"Iw0H2PoM\",\"emptyPlaceholder\":\"_1p1siz5F\",\"meta\":\"_1hepS0MX\",\"title\":\"sa1h4Yo7\",\"price\":\"_3aUDHCdJ\",\"discountPrice\":\"_1f15ytDW\",\"lineThrough\":\"_2e0CG0zl\"};","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { IoMdImage } from 'react-icons/io';\n\nimport { __t, mediaUtils } from '@mssgme/shared';\nimport { LazyImage } from '@mssgme/ui';\n\nimport styles from './ProductItem.module.scss';\n\nexport const ProductItem = ({ tag: Tag, product: { name, price, published, photoUrl }, themeStyles, ...rest }) => {\n    return (\n        <Tag className={classNames(styles.root, !published && styles.disabled)} {...rest}>\n            <div className={styles.thumbnail} style={{ backgroundColor: themeStyles.backgroundColor }}>\n                {photoUrl ? (\n                    <LazyImage src={mediaUtils.generateProductThumbnailUrl(photoUrl)} alt={name} />\n                ) : (\n                    <div className={styles.emptyPlaceholder}>\n                        <IoMdImage size=\"40%\" color=\"#fff\" />\n                    </div>\n                )}\n            </div>\n            <div className={styles.meta} style={{ color: themeStyles.color }}>\n                <span className={styles.title}>{name}</span>\n                {price && (\n                    <span className={styles.price}>\n                        {price.formattedDiscount &&\n                            (price.discount === 0 ? (\n                                <span className={styles.discountPrice}>{__t('free')}</span>\n                            ) : (\n                                <span className={styles.discountPrice}>{price.formattedDiscount}</span>\n                            ))}\n                        {price.amount === 0 ? (\n                            __t('free')\n                        ) : (\n                            <span className={price.formattedDiscount ? styles.lineThrough : null}>\n                                {price.formatted}\n                            </span>\n                        )}\n                    </span>\n                )}\n            </div>\n        </Tag>\n    );\n};\n\nProductItem.propTypes = {\n    product: PropTypes.object.isRequired,\n    themeStyles: PropTypes.object,\n    tag: PropTypes.any,\n};\n\nProductItem.defaultProps = {\n    tag: 'div',\n    themeStyles: {},\n};\n","import { BaseApi } from './baseApi';\n\nexport class ProductsApi extends BaseApi {\n    list(workspaceId, params) {\n        return this.get([`/workspaces/${workspaceId}/products`, params]);\n    }\n\n    load(workspaceId, productId) {\n        return this.get([`/workspaces/${workspaceId}/products/${productId}`]);\n    }\n\n    loadBySlug(workspaceId, productSlug, collectionId) {\n        return this.get([`/workspaces/${workspaceId}/products/${collectionId}/${productSlug}`]);\n    }\n}\n\nexport default new ProductsApi();\n","export const handleError = (error) => {\n    error = error || new Error('Unhandled error');\n\n    console.error(error);\n\n    if (window.Sentry) {\n        window.Sentry.captureException(error);\n    }\n};\n","import { useMediaQuery } from 'react-responsive';\n\nexport const MEDIA_BREAKPOINTS = {\n    desktop: { minWidth: 1025 },\n    aboveMobile: { minWidth: 601 },\n    belowDesktop: { maxWidth: 1024 },\n    tablet: { maxWidth: 1024, minWidth: 768 },\n    mobile: { maxWidth: 600 },\n};\n\nexport function useBreakpoints() {\n    const isDesktop = useMediaQuery(MEDIA_BREAKPOINTS['desktop']);\n    const isAboveMobile = useMediaQuery(MEDIA_BREAKPOINTS['aboveMobile']);\n    const isBelowDesktop = useMediaQuery(MEDIA_BREAKPOINTS['belowDesktop']);\n    const isTablet = useMediaQuery(MEDIA_BREAKPOINTS['tablet']);\n    const isMobile = useMediaQuery(MEDIA_BREAKPOINTS['mobile']);\n\n    return { isDesktop, isAboveMobile, isBelowDesktop, isTablet, isMobile };\n}\n\nexport const useIsMobile = () => {\n    return !!useMediaQuery(MEDIA_BREAKPOINTS['mobile']);\n};\n\nexport const useIsDesktop = () => {\n    return !!useMediaQuery(MEDIA_BREAKPOINTS['desktop']);\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3xemyhkw\",\"list\":\"_3oWAVCFk\",\"clipLeft\":\"_1mLJa0n8\",\"clipRight\":\"_3wkVW7tt\",\"controlContainerLeft\":\"_2OR97iY4\",\"controlContainerRight\":\"_2I596m4e\",\"control\":\"_3QwuNDjw\"};","import PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport React from 'react';\nimport { useDeepCompareEffect } from 'react-use';\n\nimport { cls } from '@mssgme/helpers';\nimport { renderNode, useHorizontalTabbedScroll } from '@mssgme/ui';\nimport { useBasePageColor } from '../../hooks';\n\nimport styles from './ScrollableBar.module.scss';\n\nexport const ScrollableBar = ({ items, color, containerClass, children, ...rest }) => {\n    const scroll = useHorizontalTabbedScroll(items.length);\n    const { root, list, hasLeftBtn, hasRightBtn, moveLeft, moveRight, moveTo } = scroll;\n    const { backgroundColor } = useBasePageColor();\n\n    useDeepCompareEffect(() => {\n        if (items.length) {\n            moveTo(0);\n        }\n    }, [items]);\n\n    containerClass = cn(styles.list, hasLeftBtn && styles.clipLeft, hasRightBtn && styles.clipRight, containerClass);\n\n    return (\n        <div ref={root} {...cls(styles.root, rest)}>\n            {hasLeftBtn && (\n                <div key={`le-${backgroundColor}`} className={styles.controlContainerLeft} onClick={moveLeft}>\n                    <div className={styles.control} style={{ color }}>\n                        &larr;\n                    </div>\n                </div>\n            )}\n\n            <ul ref={list} className={cn(styles.list, containerClass)}>\n                {renderNode(children, scroll)}\n            </ul>\n\n            {hasRightBtn && (\n                <div key={`ri-${backgroundColor}`} className={styles.controlContainerRight} onClick={moveRight}>\n                    <div className={styles.control} style={{ color }}>\n                        &rarr;\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n};\n\nScrollableBar.propTypes = {\n    items: PropTypes.array.isRequired,\n    color: PropTypes.string,\n    containerClass: PropTypes.string,\n};\n","import { useCallback, useRef, useState } from 'react';\nimport { useMeasure, useScroll } from 'react-use';\n\nimport { useIsDesktop } from './useBreakpoints';\n\nexport const useHorizontalTabbedScroll = (items, tag = 'li') => {\n    const isDesktop = useIsDesktop();\n    const list = useRef(null);\n    const [index, setIndex] = useState(0);\n    const [root, { width }] = useMeasure();\n    const { x: listScrollX } = useScroll(list);\n\n    const listScrollWidth = (list.current && list.current.scrollWidth) || width;\n    const hasScroll = isDesktop && listScrollWidth > width;\n    const hasLeftBtn = hasScroll && listScrollX > 0;\n    const hasRightBtn = hasScroll && listScrollX + width < listScrollWidth - 1;\n\n    const moveTo = useCallback(\n        (targetIndex) => {\n            if (targetIndex < 0 || targetIndex > items - 1) {\n                return;\n            }\n\n            const parentWidth = list.current.parentElement.clientWidth;\n            const nodes = Array.from(list.current.querySelectorAll(tag));\n            let scrollPosition = 0;\n\n            for (let i = 0; i < targetIndex; i++) {\n                scrollPosition += nodes[i].clientWidth + 8;\n            }\n\n            list.current.scrollLeft = scrollPosition - (parentWidth - 32) / 2 + nodes[targetIndex].clientWidth / 2 - 4;\n            setIndex(targetIndex);\n        },\n        [items, index, listScrollWidth]\n    );\n    const moveLeft = useCallback(() => moveTo(index - 1), [moveTo]);\n    const moveRight = useCallback(() => moveTo(index + 1), [moveTo]);\n\n    return { root, hasLeftBtn, moveLeft, list, hasRightBtn, moveRight, moveTo, currentIndex: index };\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_18jT4PQ_\",\"item\":\"_1f5KOzx9\",\"active\":\"_3pSVr3e_\",\"list\":\"_2n-Pz9IB\"};","import PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport React, { useCallback, useMemo } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport { __t } from '@mssgme/shared';\nimport { resolvePathname } from '@mssgme/helpers';\n\nimport styles from './ButtonsMenu.module.scss';\n\nexport const ButtonsMenuItems = ({ items, interactive, activeCollectionId, theme, onSelect, moveTo }) => {\n    const location = useLocation();\n    const baseUrl = useMemo(() => resolvePathname(location.pathname, 'c'), [location.pathname]);\n    const themeStyle = useMemo(\n        () => ({\n            button: {\n                backgroundColor: theme.backgroundColor,\n                color: theme.productsCategoryTextColor || theme.color,\n                borderRadius: theme.borderRadius,\n            },\n            buttonActive: {\n                backgroundColor: theme.buttonBackground,\n                color: theme.buttonTextColor,\n                borderRadius: theme.borderRadius,\n            },\n        }),\n        [theme]\n    );\n\n    const isTabbed = theme.filterMode === 'tabs';\n    const ItemTag = interactive ? Link : 'div';\n    const handleClick = useCallback(\n        (e) => {\n            if (!isTabbed) {\n                return;\n            }\n\n            e.preventDefault();\n\n            const slug = e.target.dataset?.slug;\n            const index = items.findIndex((item) => item.slug === slug);\n            const id = items[index]?._id;\n\n            if (id === activeCollectionId) {\n                // onSelect(null);\n            } else {\n                moveTo(index);\n                onSelect(id);\n            }\n        },\n        [isTabbed, activeCollectionId, items, moveTo, onSelect]\n    );\n\n    return (\n        items.map((col, index) => {\n            const isActive = isTabbed && activeCollectionId === col._id;\n\n            return (\n                <li\n                    key={col._id}\n                    data-index={index}\n                    className={cn(styles.item, isActive && styles.active)}\n                >\n                    <ItemTag\n                        style={isActive ? themeStyle.buttonActive : themeStyle.button}\n                        data-slug={col.slug}\n                        onClick={handleClick}\n                        to={interactive && `${baseUrl}/${col.slug}` || undefined}\n                    >\n                        {col.default ? __t('all_products') : col.name}\n                    </ItemTag>\n                </li>\n            );\n        })\n    );\n};\n\nButtonsMenuItems.propTypes = {\n    items: PropTypes.array.isRequired,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { useDeepCompareEffect } from 'react-use';\n\nimport { cls } from '@mssgme/helpers';\nimport { ScrollableBar } from '../../../../../UI';\nimport { ButtonsMenuItems } from './ButtonsMenuItems';\n\nimport styles from './ButtonsMenu.module.scss';\n\nexport const ButtonsMenu = ({ items, interactive, activeCollectionId, theme, onSelect, ...rest }) => {\n    useDeepCompareEffect(() => {\n        if (items.length) {\n            onSelect(items[0]._id);\n        }\n    }, [items]);\n\n    return (\n        <ScrollableBar containerClass={styles.list} color={theme.color} items={items} {...cls(styles.root, rest)}>\n            {(scroll) => (\n                <ButtonsMenuItems\n                    theme={theme}\n                    activeCollectionId={activeCollectionId}\n                    interactive={interactive}\n                    items={items}\n                    onSelect={onSelect}\n                    {...scroll}\n                />\n            )}\n        </ScrollableBar>\n    );\n};\n\nButtonsMenu.propTypes = {\n    items: PropTypes.array.isRequired,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\nfunction ChevronDownIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path d=\"M6 9l6 6 6-6\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n        </IconBase>\n    );\n}\nconst ForwardRef = React.forwardRef(ChevronDownIcon);\nexport default ForwardRef;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nPureButton.propTypes = {\n    as: PropTypes.elementType,\n    className: PropTypes.string,\n    startIcon: PropTypes.node,\n    endIcon: PropTypes.node,\n    styles: PropTypes.shape({\n        button: PropTypes.string,\n        startIcon: PropTypes.string,\n        endIcon: PropTypes.string,\n    }),\n};\n\nPureButton.defaultProps = {\n    as: 'button',\n    styles: {},\n};\n\nexport default function PureButton({ as: Component, className, startIcon, endIcon, children, styles, ...rest }) {\n    return (\n        <Component className={cn(styles.button, className)} {...getProps(Component, rest)}>\n            {startIcon && <span className={styles.startIcon}>{startIcon}</span>}\n            {children}\n            {endIcon && <span className={styles.endIcon}>{endIcon}</span>}\n        </Component>\n    );\n}\n\nexport function getProps(el, props) {\n    const { type, disabled, ...rest } = props;\n    const out = { ...rest };\n\n    if (el === 'button') {\n        out.type = type || 'button';\n        out.disabled = disabled;\n    } else {\n        out.role = 'button';\n        out.tabIndex = '0';\n        if (disabled) out['aria-disabled'] = true;\n    }\n\n    return out;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"_32Fgb1H8\",\"startIcon\":\"xsp63gah\",\"endIcon\":\"_28JsmioI\"};","import React from 'react';\nimport PureButton from './PureButton';\n\nimport styles from './TextButton.module.scss';\n\nexport default function TextButton(props) {\n    return <PureButton styles={styles} {...props} />;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { CSSTransition } from 'react-transition-group';\n\nexport const DURATION_MAP = {\n    'extra-fast': 100,\n    fast: 200,\n    normal: 300,\n    slow: 500,\n    'extra-slow': 800,\n};\n\nexport default function createTransition(displayName, classNames) {\n    function Transition({ in: inProp, appear, duration, children, ...innerRest }) {\n        const timeout = duration in DURATION_MAP ? DURATION_MAP[duration] : duration;\n\n        const content = React.cloneElement(\n            children,\n            {\n                ...children.props,\n                style: {\n                    ...children.props.style,\n                    transitionDuration: `${timeout}ms`,\n                },\n            },\n            children.props.children\n        );\n\n        return (\n            <CSSTransition\n                unmountOnExit\n                in={inProp}\n                appear={appear}\n                timeout={timeout}\n                classNames={classNames}\n                {...innerRest}\n            >\n                {content}\n            </CSSTransition>\n        );\n    }\n\n    Transition.propTypes = {\n        in: PropTypes.bool,\n        appear: PropTypes.bool,\n        duration: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf(Object.keys(DURATION_MAP))]),\n    };\n\n    Transition.defaultProps = {\n        in: false,\n        appear: false,\n        duration: 'slow',\n    };\n\n    Transition.displayName = displayName;\n\n    return Transition;\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"appear\":\"Suj3llKJ\",\"enter\":\"_12N2A-JS\",\"appearActive\":\"_3AjOYERt\",\"enterActive\":\"_199ALsnl\",\"exit\":\"wgSRpLQh\",\"exitActive\":\"_2qKwlfZ8\"};","import createTransition from './createTransition';\nimport styles from './Fade.module.scss';\n\nexport default createTransition('Fade', styles);\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Hmwggku0\",\"select\":\"_2Yegfa_5\",\"button\":\"-UluhrLO\",\"label\":\"_3fg4TlLN\",\"arrow\":\"_2T4LtWB2\",\"option\":\"_3mqYM8GM\",\"active\":\"_3NoXcFSo\",\"optionLabel\":\"_1TY62Q6Y\",\"badge\":\"_3GfR4Q-Z\",\"dropdown\":\"CQAuc8tf\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useRef } from 'react';\nimport { useClickAway, useToggle } from 'react-use';\n\nimport { __t } from '@mssgme/shared';\nimport { isMatchId } from '@mssgme/helpers';\nimport { ChevronDownIcon } from '@mssgme/icons';\nimport { Fade, TextButton } from '@mssgme/ui';\n\nimport styles from './FilterMenu.module.scss';\n\nexport const FilterMenuItem = ({ collection, active, onSelect }) => {\n    const handleClick = useCallback(() => onSelect(collection._id), [onSelect, collection]);\n\n    return (\n        <div className={cn(styles.option, active && styles.active)} onClick={handleClick}>\n            <span className={styles.optionLabel}>{collection.default ? __t('all_products') : collection.name}</span>\n            <span className={styles.badge}>{collection.publishedProductsCount}</span>\n        </div>\n    );\n};\n\nFilterMenuItem.propTypes = {\n    collection: PropTypes.object.isRequired,\n    onSelect: PropTypes.func.isRequired,\n    active: PropTypes.bool,\n};\n\nexport const FilterMenu = ({ items, activeCollectionId, theme, interactive, onSelect, ...rest }) => {\n    const root = useRef();\n    const [isOpen, toggle] = useToggle();\n    const selected = items.find(isMatchId(activeCollectionId));\n\n    useClickAway(root, () => toggle(false));\n\n    const handleSelect = useCallback((id) => {\n        onSelect(id);\n        toggle(false);\n    });\n\n    return (\n        <div className={styles.root} {...rest}>\n            <div className={styles.select} ref={root}>\n                <TextButton aria-pressed={isOpen} className={styles.button} onClick={toggle}>\n                    <span className={styles.label}>\n                        {selected && (selected.default ? __t('all_products') : selected.name)}\n                        {selected && <span>&nbsp;({selected?.publishedProductsCount})</span>}\n                    </span>\n                    <ChevronDownIcon size={16} className={styles.arrow} />\n                </TextButton>\n\n                <Fade in={isOpen}>\n                    <div className={styles.dropdown}>\n                        {items.map((collection) => (\n                            <FilterMenuItem\n                                key={collection._id}\n                                active={collection._id === activeCollectionId}\n                                collection={collection}\n                                onSelect={handleSelect}\n                            />\n                        ))}\n                    </div>\n                </Fade>\n            </div>\n        </div>\n    );\n};\n\nFilterMenu.propTypes = {\n    items: PropTypes.array.isRequired,\n    baseUrl: PropTypes.string.isRequired,\n    buttonStyle: PropTypes.object,\n    arrowsStyle: PropTypes.object,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { ButtonsMenu } from './ButtonsMenu';\nimport { FilterMenu } from './FilterMenu';\n\nexport function CollectionsBar({ theme, ...rest }) {\n    return theme.filterMode === 'filter' ? (\n        <FilterMenu theme={theme} {...rest} />\n    ) : (\n        <ButtonsMenu theme={theme} {...rest} />\n    );\n}\n\nCollectionsBar.propTypes = {\n    items: PropTypes.array.isRequired,\n    interactive: PropTypes.bool,\n    activeCollectionId: PropTypes.string,\n    theme: PropTypes.object.isRequired,\n    onSelect: PropTypes.func,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2XEcLPTg\",\"title\":\"_1OXGJSWl\",\"list\":\"_2CuOjRV5\",\"mobileMode\":\"ihe2oK8x\",\"empty\":\"_2sQn329n\",\"icon\":\"_2uw0NwEm\",\"description\":\"_15dFHqfr\",\"moreBtnContainer\":\"_2tFbuN8l\",\"moreBtn\":\"_19by1yX6\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useMountedState } from 'react-use';\nimport { get, pick } from 'lodash';\n\nimport { __t, ProductsBlockKind } from '@mssgme/shared';\nimport { cls, isMatchId, isMobile, keyHash } from '@mssgme/helpers';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { LandingsPropTypes, Spinner } from '@mssgme/ui';\nimport { SearchIcon } from '@mssgme/icons';\nimport { ProductItem } from '../../../../products';\nimport { useBlockTheme, useProductsApi, useWebsiteData } from '../../../hooks';\nimport { MoreButton } from '../../../UI';\nimport { BlockBase } from '../BlockBase';\nimport { CollectionsBar } from './CollectionsBar';\n\nimport styles from './Products.module.scss';\n\nexport const Item = ({ product, baseProductUrl, fromCollection, interactive, ...rest }) => {\n    const to = useMemo(\n        () =>\n            interactive\n                ? {\n                    pathname: `${baseProductUrl}/${product.slug?.toLowerCase()}`,\n                    state: { fromCollection },\n                }\n                : undefined,\n        [baseProductUrl, interactive, product]\n    );\n\n    return <ProductItem product={product} tag={interactive ? Link : 'div'} to={to} {...rest} />;\n};\n\nItem.propTypes = {\n    product: PropTypes.object.isRequired,\n    interactive: PropTypes.bool,\n    fromCollection: PropTypes.string,\n    baseProductUrl: PropTypes.string,\n    style: PropTypes.object,\n};\n\nexport default function Products({ block, interactive, isMobileMode, ...rest }) {\n    const website = useWebsiteData();\n    const isMounted = useMountedState();\n    const { generateUrl } = useNavigationUtils();\n    const { theme, style } = useBlockTheme(block);\n    const { commonStyle, moreStyle } = useMemo(() => ({\n        commonStyle: { color: style.color },\n        moreStyle: { ...style, color: theme.productsCategoryTextColor },\n    }), [style]);\n    const collectionIds = get(block, 'collections.include', []);\n    const activeCollections = website.collections.filter((col) => col.published && col.publishedProductsCount);\n    const showCollections = collectionIds.length\n        ? collectionIds.map((id) => activeCollections.find(isMatchId(id))).filter(Boolean)\n        : activeCollections;\n    const isTabbed = theme.filterMode !== 'buttons';\n    const [activeCollectionId, setActiveCollectionId] = useState(showCollections[0]?._id || null);\n\n    const options = pick(block, ['products', 'total', 'sort']);\n    const query = useMemo(\n        () => ({\n            ...options,\n            limit: isMobile() ? 6 : 12,\n            collections: activeCollectionId && isTabbed ? { include: [activeCollectionId] } : block.collections,\n        }),\n        [website.collections, keyHash(options), activeCollectionId, isTabbed]\n    );\n    const { hasNext, isFetching, items, getProducts } = useProductsApi({\n        workspaceId: website.workspace,\n        websiteId: website._id,\n        query,\n    });\n    const handleMore = useCallback(() => getProducts(), [getProducts]);\n    const baseProductUrl = useMemo(() => generateUrl('p'), [generateUrl]);\n    const getFromCollection = (product) => Object.keys(product.cols || {}).find((id) => collectionIds.includes(id));\n\n    useEffect(() => {\n        const firstId = showCollections[0]?._id;\n\n        if (firstId !== activeCollectionId && !showCollections.find(isMatchId(activeCollectionId))) {\n            if (isMounted()) {\n                setActiveCollectionId(firstId);\n            }\n        }\n    }, [activeCollectionId, showCollections]);\n\n    return (\n        <BlockBase {...cls([styles.root, isMobileMode && styles.mobileMode], rest)}>\n            {!!block.title && (\n                <div className={styles.title} style={commonStyle}>\n                    {block.title}\n                </div>\n            )}\n\n            {showCollections.length > 1 && (\n                <CollectionsBar\n                    theme={theme}\n                    style={commonStyle}\n                    items={showCollections}\n                    interactive={interactive}\n                    activeCollectionId={activeCollectionId}\n                    onSelect={setActiveCollectionId}\n                />\n            )}\n\n            <ul className={styles.list}>\n                {items.map((product) => (\n                    <li key={product._id}>\n                        <Item\n                            product={product}\n                            interactive={interactive}\n                            baseProductUrl={baseProductUrl}\n                            fromCollection={activeCollectionId || getFromCollection(product)}\n                            themeStyles={theme}\n                            style={commonStyle}\n                        />\n                    </li>\n                ))}\n\n                {!(items.length || isFetching) && (\n                    <li key=\"empty-list\" className={styles.empty} style={commonStyle}>\n                        <SearchIcon className={styles.icon} size={48} />\n                        <div className={styles.description}>{__t('no_products')}</div>\n                    </li>\n                )}\n            </ul>\n\n            {isFetching ? (\n                <Spinner />\n            ) : (\n                hasNext && (\n                    <div className={styles.moreBtnContainer}>\n                        <MoreButton\n                            className={styles.moreBtn}\n                            style={moreStyle}\n                            onClick={handleMore}\n                            disabled={isFetching}\n                        />\n                    </div>\n                )\n            )}\n        </BlockBase>\n    );\n}\n\nProducts.propTypes = {\n    ...BlockBase.propTypes,\n    block: LandingsPropTypes.block.isRequired,\n};\n\nProducts.defaultProps = BlockBase.defaultProps;\n\nProducts.kind = ProductsBlockKind;\n","import { useState } from 'react';\nimport { useDebounce, useMountedState } from 'react-use';\n\nimport { handleError, productsApi } from '@mssgme/lib';\nimport { useFetching } from '@mssgme/hooks';\n\nexport const useProductsApi = ({ workspaceId, websiteId, query }) => {\n    const isMounted = useMountedState();\n    const [store, setStore] = useState({ hasNext: false, next: null, publishedCount: 0, items: [], isFetching: true });\n    const { pending: isFetching, run: getProducts } = useFetching(\n        async (resetStore) => {\n            const { results, next, ...productsStore } = await productsApi.list(workspaceId, {\n                limit: query.limit,\n                next: resetStore ? null : store.next,\n                collection: query.collections.include,\n                website: websiteId,\n                published: true,\n            });\n\n            if (!isMounted()) {\n                return;\n            }\n\n            setStore((prevProducts) => {\n                const items = resetStore ? results : prevProducts.items.concat(results);\n                const hasNext = productsStore.hasNext && !(query.total && items.length >= query.total);\n\n                return {\n                    ...productsStore,\n                    next: (hasNext && next) || null,\n                    items: query.total ? items.slice(0, query.total) : items,\n                    hasNext,\n                };\n            });\n        },\n        [store.next, query]\n    );\n\n    useDebounce(() => void getProducts(true).catch(handleError), 100, [query]);\n\n    return {\n        ...store,\n        isFetching: store.isFetching || isFetching,\n        getProducts,\n    };\n};\n","import Products from './Products';\n\nexport default Products;\n","import invariant from 'tiny-invariant';\nimport { useMemo } from 'react';\nimport { useRouteMatch } from 'react-router-dom';\nimport { flatten } from 'lodash';\n\nconst join = (parent, child) => ((parent && child) ? `${parent}/${child}` : child).replace(/\\/{2,}/g, '/');\nconst joinPathArrays = (parent, child) => {\n    if (Array.isArray(parent)) {\n        return flatten(parent.map((part) => joinPathArrays(part, child)));\n    }\n\n    return Array.isArray(child)\n        ? child.map((part) => join(parent, part))\n        : join(parent, child);\n};\n\nconst mapChildRoute = function* (parent, routeConfig) {\n    invariant(routeConfig, `Miss-configured route \"${parent}/*\"`);\n\n    const { path: childPath, component, children } = routeConfig;\n    const path = childPath ? joinPathArrays(parent, childPath) : parent;\n\n    if (component) {\n        const descriptor = {\n            path,\n            component,\n        };\n\n        if (routeConfig.exact ?? !children) {\n            descriptor.exact = true;\n        }\n\n        if (routeConfig.strict) {\n            descriptor.strict = true;\n        }\n\n        if (routeConfig.sensitive) {\n            descriptor.sensitive = true;\n        }\n\n        if (routeConfig.props) {\n            descriptor.props = routeConfig.props;\n        }\n\n        yield descriptor;\n    }\n\n    if (children?.length) {\n        for (const config of children) {\n            yield* mapChildRoute(path, config);\n        }\n    }\n};\n\nconst mapRouting = (path, children) =>\n    flatten(\n        Array.from(mapChildRoute(path, { children }))\n    );\n\n/**\n * @template {{\n *   path: string|string[];\n *   component?: ComponentType;\n *   exact?: boolean;\n *   strict?: boolean;\n *   sensitive?: boolean;\n *   props?: *;\n * }} Route\n * @template {Route & { children?: RouteDefinition[] }} RouteDefinition\n * @param {RouteDefinition[]} routes Route definitions list\n * @param {string} pathname Current location pathname\n * @param {string} [base] Optional base path if no `base` specified - current matched route path would be used\n * @returns {Route[]} Mapped and flattened routes list\n */\nexport const useRoutes = (routes, pathname, base) => {\n    const { path, url } = useRouteMatch();\n    // when recursively nesting routers, remember this node depth\n    const nested = useMemo(() => path.split('/').length, [path]);\n    // throw-away rest of the location if matching upper node of nested routing\n    const baseline = useMemo(\n        () => path.split('/').slice(0, nested).join('/'),\n        [nested, url]\n    );\n    const basePath = base || baseline;\n\n    return useMemo(() => mapRouting(basePath, routes), [basePath, routes]);\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { Route } from 'react-router-dom';\n\nimport { usePresenceRemoval } from '../../hooks';\n\nexport const PresentableRoute = ({ match, component: Component, props }) => {\n    usePresenceRemoval();\n\n    return (\n        <Route computedMatch={match}>\n            <Component key={match.path} {...match.params} {...props} />\n        </Route>\n    );\n};\n\nPresentableRoute.propTypes = {\n    component: PropTypes.elementType.isRequired,\n    match: PropTypes.object.isRequired,\n    props: PropTypes.object,\n};\n","import PropTypes from 'prop-types';\nimport React from 'react';\nimport { matchPath, useLocation } from 'react-router-dom';\nimport { AnimatePresence } from 'framer-motion';\n\nimport { RoutingTypes } from '../../domainTypes';\nimport { useRoutes } from './useRoutes';\nimport { PresentableRoute } from './PresentableRoute';\n\n/**\n * @template {{\n *   path: string|string[];\n *   component?: ComponentType;\n *   exact?: boolean;\n *   strict?: boolean;\n *   sensitive?: boolean;\n *   props?: *;\n * }} Route\n * @template {Route & { children?: RouteDefinition[] }} RouteDefinition\n * @param {object} props Props\n * @param {RouteDefinition[]} props.routing Route definitions list\n * @param {string} [props.base] Optional base path if no `base` specified - current matched route path would be used\n * @returns {ReactNode} React node\n */\nexport const AnimateableRoutes = ({ routing, base }) => {\n    const { pathname } = useLocation();\n    const resolved = useRoutes(routing, pathname, base);\n\n    return (\n        <AnimatePresence>\n            {resolved.map((route) => {\n                const matched = matchPath(pathname, route);\n\n                return matched && (\n                    <PresentableRoute key={matched.path} match={matched} {...route} />\n                );\n            })}\n        </AnimatePresence>\n    );\n};\n\nAnimateableRoutes.propTypes = {\n    base: PropTypes.string,\n    routing: RoutingTypes.children.isRequired,\n};\n","import { useMemo } from 'react';\nimport { cloneDeep, merge } from 'lodash';\n\nimport { CRM_IDENTITY } from '../../products';\nimport { useWebsiteData } from '../../hooks';\n\n/**\n * @returns {typeof CRM_IDENTITY} CRM data\n */\nexport const useCRMData = () => {\n    const { crm } = useWebsiteData();\n\n    return useMemo(() => merge(cloneDeep(CRM_IDENTITY), crm), [crm]);\n};\n","import { useMemo } from 'react';\n\nimport { MessengersBlockKind } from '@mssgme/shared';\nimport { useCRMData } from '../hooks';\n\nexport function useContacts(map) {\n    const { contacts: { messengers } } = useCRMData();\n\n    return useMemo(\n        () =>\n            messengers.length ? [\n                {\n                    _id: `messengers-${messengers.map(({ _id }) => _id).join('-')}`,\n                    kind: MessengersBlockKind,\n                    messengers: map ? messengers.map(map) : messengers,\n                    enabled: true,\n                },\n            ] : undefined,\n        [messengers, map]\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2wgo7yxh\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './Grid.module.scss';\n\nexport function Grid({ children, itemClassName }) {\n    return (\n        <ul className={styles.root}>\n            {React.Children.map(children, (item, index) => (\n                <li key={index} className={itemClassName}>\n                    {item}\n                </li>\n            ))}\n        </ul>\n    );\n}\n\nGrid.propTypes = {\n    children: PropTypes.node,\n    itemClassName: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"content\":\"_2FjRUFkp\",\"moreBtnContainer\":\"_3blCnB8n\",\"moreBtn\":\"_1GtOLRR6\",\"animated\":\"_15ax4bsN\",\"revealItem\":\"_3aAVi18T\"};","// extracted by mini-css-extract-plugin\nexport default {\"ordersList\":\"_1oQBYySu\",\"orderHeader\":\"_1vqM5Xps\",\"orderContent\":\"g_UJCA8T\"};","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { __t } from '@mssgme/shared';\nimport { usePresenceRemoval } from '@mssgme/ui';\nimport { usePageTheme, useSavedOrders } from '../../hooks';\nimport { ThemedModal } from '../../UI';\n\nimport styles from './UserOrdersPage.module.scss';\n\nconst immediate = ['cod', 'other'];\nconst shouldRenderPaymentStatus = ({ paymentMethod, feedback: { status } }) => (\n    !immediate.includes(paymentMethod) && status !== 'rejected'\n);\n\nexport function UserOrdersPage() {\n    const { generateUrl } = useNavigationUtils();\n    const { theme } = usePageTheme();\n    const { userOrders } = useSavedOrders();\n    const finalizedOrders = userOrders.filter((order) => order.finalized && order.feedback);\n\n    usePresenceRemoval();\n\n    if (!finalizedOrders.length) {\n        return null;\n    }\n\n    return (\n        <ThemedModal overlay compact padding title={__t('my_orders')} onClose={generateUrl('..')}>\n            <ul className={styles.ordersList}>\n                {finalizedOrders.map((order) => (\n                    <li key={order._id}>\n                        <Link to={generateUrl(order._id)} style={theme.blocks.features}>\n                            <div className={styles.orderHeader}>\n                                <div>\n                                    <h2>\n                                        {__t('order_term')} #{order.feedback.order}\n                                    </h2>\n                                    <div>\n                                        <span\n                                            style={{\n                                                color: theme.colors.background,\n                                                backgroundColor: theme.colors.text,\n                                            }}\n                                        >\n                                            {__t(`order_status_${order.feedback.status}`)}\n                                        </span>\n                                        {shouldRenderPaymentStatus(order) && (\n                                            <span\n                                                style={{\n                                                    color: theme.colors.background,\n                                                    backgroundColor: theme.colors.text,\n                                                }}\n                                            >\n                                                {__t(`payment_status_${order.status}`)}\n                                            </span>\n                                        )}\n                                    </div>\n                                </div>\n                                <div>\n                                    <div>\n                                        <span>{new Date(order.feedback.timestamp).toLocaleDateString()}</span>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className={styles.orderContent}>\n                                <div>\n                                    <h3>{__t('products')}</h3>\n                                    <span>\n                                        {order.items.map((item) => `${item.name} x${item.quantity}`).join(', ')}\n                                    </span>\n                                </div>\n                                <div>\n                                    {order.total.amount} {order.total.currency}\n                                </div>\n                            </div>\n                        </Link>\n                    </li>\n                ))}\n            </ul>\n        </ThemedModal>\n    );\n}\n","import { useAsync } from 'react-use';\n\nimport { NotFoundError } from '@mssgme/api-client';\nimport { isMatchedById } from '@mssgme/shared';\nimport { useFrontAPI, useUserOrders } from '../hooks';\n\nexport function useOrder(orderId) {\n    const api = useFrontAPI();\n    const userOrders = useUserOrders() || [];\n    const { loading, error, value: immediate } = useAsync(\n        () => api.orders.show({ orderId, query: { complete: true } }),\n        [orderId]\n    );\n    const isNotFound = error && NotFoundError.is(error);\n    const order = userOrders.find(isMatchedById(orderId)) || immediate;\n\n    return {\n        isNotFound,\n        loading,\n        order,\n        error,\n        immediate,\n    };\n}\n","import { useMemo } from 'react';\n\nimport { useCRMData } from './useCRMData';\n\nexport const immediateCompletion = ['cod', 'other', 'transfer'];\nexport const handlesPaymentsStatus = (provider) => !immediateCompletion.includes(provider);\n\nexport const usePaymentConfigs = () => {\n    const { payments } = useCRMData();\n\n    return useMemo(() => {\n        const providers = Object.entries(payments || {}).filter(([, config]) => config.enabled);\n        const immediate = [];\n        const online = [];\n\n        for (const entry of providers) {\n            if (handlesPaymentsStatus(entry[0])) {\n                online.push(entry);\n            } else {\n                immediate.push(entry);\n            }\n        }\n\n        return {\n            payments,\n            providers,\n            immediate,\n            online,\n            isSingular: providers.length <= 1,\n            isSingularOnline: online.length <= 1,\n        };\n    }, [payments]);\n};\n","import { FaPaypal, FaStripe } from 'react-icons/fa';\nimport { FiChevronsRight } from 'react-icons/fi';\nimport { MdPayment } from 'react-icons/md';\n\nexport const PAYMENT_PROVIDERS = {\n    stripe: {\n        label: 'Stripe',\n        icon: FaStripe,\n    },\n    liqpay: {\n        label: 'LiqPay',\n        icon: FiChevronsRight,\n    },\n    paypal: {\n        label: 'PayPal',\n        icon: FaPaypal,\n        supported_currencies: [\n            'AUD',\n            'BRL',\n            'CAD',\n            'CNY',\n            'CZK',\n            'DKK',\n            'EUR',\n            'HKD',\n            'HUF',\n            'ILS',\n            'JPY',\n            'MYR',\n            'MXN',\n            'TWD',\n            'NZD',\n            'NOK',\n            'PHP',\n            'PLN',\n            'GBP',\n            'RUB',\n            'SGD',\n            'SEK',\n            'CHF',\n            'THB',\n            'USD',\n        ],\n    },\n    wayforpay: {\n        label: 'Wayforpay',\n        icon: MdPayment,\n    },\n    robokassa: {\n        label: 'Robokassa',\n        icon: MdPayment,\n    },\n};\n","import React from 'react';\n\nimport { __t, PAYMENT_PROVIDERS } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useModalThemes, usePaymentConfigs } from '../../hooks';\nimport { ThemedButton } from '../../UI';\n\nexport const PayButton = ({ provider, ...props }) => {\n    const { isSingular } = usePaymentConfigs();\n    const { contentStyle } = useModalThemes();\n    const label = PAYMENT_PROVIDERS[provider]?.label || provider;\n    const Icon = PAYMENT_PROVIDERS[provider]?.icon;\n\n    return (\n        <ThemedButton\n            fullWidth\n            tag=\"button\"\n            type=\"submit\"\n            beforeIcon={Icon && <Icon size={24} />}\n            theme={contentStyle}\n            contentAlignLeft\n            {...props}\n        >\n            {__t(isSingular ? 'pay' : 'payWith', { provider: label })}\n        </ThemedButton>\n    );\n};\n\nPayButton.propTypes = {\n    provider: LandingsPropTypes.paymentMethod,\n};\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useAsync, useMountedState } from 'react-use';\nimport { CardElement, useElements, useStripe } from '@stripe/react-stripe-js';\nimport { pick } from 'lodash';\n\nimport { FormErrors } from '@mssgme/ui';\nimport { useFrontAPI, useInputTheme } from '../hooks';\nimport { PayButton } from './PayButton';\n\nimport styles from './StripeCheckoutForm.module.scss';\n\nconst CARD_OPTIONS = {\n    hidePostalCode: true,\n    iconStyle: 'solid',\n    classes: {\n        base: styles.cardBase,\n        webkitAutofill: styles.cardAutofill,\n    },\n};\n\nconst propTypes = {\n    orderId: PropTypes.string.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nfunction StripeCheckoutForm({ orderId, disabled: rawDisabled, onPay }) {\n    const stripe = useStripe();\n    const elements = useElements();\n    const api = useFrontAPI();\n    const isMounted = useMountedState();\n    const inputStyles = useInputTheme();\n    const [succeeded, setSucceeded] = useState(false);\n    const [processing, setProcessing] = useState(false);\n    const [disabled, setDisabled] = useState(true);\n    const [error, setError] = useState(null);\n\n    const { style, options } = useMemo(\n        () => ({\n            options: {\n                ...CARD_OPTIONS,\n                disabled: processing || succeeded,\n                style: {\n                    base: {\n                        iconColor: inputStyles.input.color,\n                        color: inputStyles.input.color,\n                        // ...pick(inputStyles.input, ['backgroundColor', 'color']),\n                        '::placeholder': pick(inputStyles.input, ['backgroundColor', 'color']),\n                        '::selection': { backgroundColor: 'currentColor' },\n                        ':-webkit-autofill': {\n                            color: inputStyles.input.color,\n                        },\n                    },\n                },\n            },\n            style: {\n                ...inputStyles.input,\n                overflow: 'hidden',\n            },\n        }),\n        [processing, succeeded, inputStyles.input]\n    );\n\n    const { value: clientSecret } = useAsync(\n        async () => (await api.orders.signatures.createStripePaymentIntent({ orderId })).clientSecret,\n        [orderId]\n    );\n\n    const isDisabled = processing || disabled || succeeded || rawDisabled || !clientSecret;\n\n    const handleSubmit = useCallback(\n        async (e) => {\n            e.preventDefault();\n            setProcessing(true);\n\n            try {\n                const payload = await stripe.confirmCardPayment(clientSecret, {\n                    payment_method: {\n                        card: elements.getElement(CardElement),\n                    },\n                });\n\n                setError(payload.error ? `Payment failed ${payload.error.message}` : null);\n\n                if (!payload.error) {\n                    setSucceeded(true);\n\n                    onPay('stripe', payload);\n                }\n            } finally {\n                if (isMounted()) {\n                    setProcessing(false);\n                }\n            }\n        },\n        [stripe, elements, clientSecret, onPay]\n    );\n\n    const handleChange = useCallback(async (e) => {\n        setDisabled(e.empty || !!e.error);\n        setError(e.error ? e.error.message : '');\n    });\n\n    return (\n        <form onSubmit={handleSubmit}>\n            <div style={style}>\n                <CardElement onChange={handleChange} options={options} />\n            </div>\n            {error && <FormErrors error={error} shake errorStyle={inputStyles.error} />}\n\n            <PayButton disabled={isDisabled} provider=\"stripe\" style={{ marginTop: 16 }} contentAlignLeft={false} />\n        </form>\n    );\n}\n\nStripeCheckoutForm.propTypes = propTypes;\n\nexport default StripeCheckoutForm;\n","// extracted by mini-css-extract-plugin\nexport default {\"cardBase\":\"_2wizWrqH\",\"cardInvalid\":\"_2ETD4YEc\",\"cardAutofill\":\"_2a0yXvSC\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2XvYo06w\",\"overlapButton\":\"FyygQEOs\"};","import PropTypes from 'prop-types';\nimport React, { Fragment, useEffect, useMemo, useState } from 'react';\nimport { PayButton } from '../../../PayButton';\n\nconst CURRENCIES = ['UAH', 'USD', 'EUR', 'RUB'];\nconst PAYMENT_URL = 'https://secure.wayforpay.com/pay';\n\nconst productShape = PropTypes.shape({\n    name: PropTypes.string.isRequired,\n    price: PropTypes.number.isRequired,\n    count: PropTypes.number.isRequired,\n});\n\nconst propTypes = {\n    merchantAccount: PropTypes.string.isRequired,\n    merchantDomainName: PropTypes.string,\n    orderReference: PropTypes.string.isRequired,\n    orderDate: PropTypes.number.isRequired,\n    amount: PropTypes.number.isRequired,\n    currency: PropTypes.oneOf(CURRENCIES),\n    products: PropTypes.arrayOf(productShape).isRequired,\n    returnUrl: PropTypes.string,\n    serviceUrl: PropTypes.string,\n    disabled: PropTypes.bool,\n    createSignature: PropTypes.func.isRequired,\n    orderPaymentTimeout: PropTypes.number,\n};\n\nconst defaultProps = {\n    merchantDomainName: document.location.hostname,\n    orderPaymentTimeout: 0,\n};\n\nfunction WayforpayButton({\n    merchantAccount,\n    merchantDomainName,\n    orderReference,\n    orderDate,\n    amount,\n    currency,\n    products,\n    returnUrl,\n    serviceUrl,\n    createSignature,\n    orderPaymentTimeout,\n    disabled: rawDisabled,\n}) {\n    const productName = useMemo(() => products.map(({ name }) => name), [products]);\n    const productPrice = useMemo(() => products.map(({ price }) => price), [products]);\n    const productCount = useMemo(() => products.map(({ count }) => count), [products]);\n    const [merchantSignature, setMerchantSignature] = useState('');\n    const [disabled, setDisabled] = useState(true);\n    const isDisabled = disabled || rawDisabled;\n\n    useEffect(() => {\n        async function request() {\n            if (!rawDisabled) {\n                setDisabled(true);\n\n                try {\n                    const json = await createSignature({\n                        merchantAccount,\n                        merchantDomainName,\n                        orderReference,\n                        orderDate,\n                        amount,\n                        currency,\n                        productName,\n                        productPrice,\n                        productCount,\n                    });\n\n                    setMerchantSignature(json.merchantSignature);\n                } finally {\n                    setDisabled(false);\n                }\n            }\n        }\n\n        void request();\n    }, [\n        merchantAccount,\n        merchantDomainName,\n        orderReference,\n        orderDate,\n        amount,\n        currency,\n        productName,\n        productPrice,\n        productCount,\n        createSignature,\n    ]);\n\n    return (\n        <form method=\"POST\" action={PAYMENT_URL}>\n            <input type=\"hidden\" name=\"merchantAccount\" value={merchantAccount} />\n            <input type=\"hidden\" name=\"merchantDomainName\" value={merchantDomainName} />\n            <input type=\"hidden\" name=\"merchantSignature\" value={merchantSignature} />\n            <input type=\"hidden\" name=\"merchantTransactionType\" value=\"AUTO\" />\n            <input type=\"hidden\" name=\"merchantTransactionSecureType\" value=\"AUTO\" />\n            <input type=\"hidden\" name=\"orderReference\" value={orderReference} />\n            <input type=\"hidden\" name=\"orderDate\" value={orderDate} />\n            <input type=\"hidden\" name=\"amount\" value={amount} />\n            <input type=\"hidden\" name=\"currency\" value={currency} />\n            <input type=\"hidden\" name=\"orderTimeout\" value={orderPaymentTimeout} />\n            <input type=\"hidden\" name=\"orderLifetime\" value={orderPaymentTimeout} />\n            {productName.map((name, index) => (\n                <Fragment key={index}>\n                    <input type=\"hidden\" name=\"productName[]\" value={name} />\n                </Fragment>\n            ))}\n            {productPrice.map((price, index) => (\n                <Fragment key={index}>\n                    <input type=\"hidden\" name=\"productPrice[]\" value={price} />\n                </Fragment>\n            ))}\n            {productCount.map((count, index) => (\n                <Fragment key={index}>\n                    <input type=\"hidden\" name=\"productCount[]\" value={count} />\n                </Fragment>\n            ))}\n            {returnUrl && <input type=\"hidden\" name=\"returnUrl\" value={returnUrl} />}\n            {serviceUrl && <input type=\"hidden\" name=\"serviceUrl\" value={serviceUrl} />}\n\n            <PayButton disabled={isDisabled} provider=\"wayforpay\" />\n        </form>\n    );\n}\n\nWayforpayButton.propTypes = propTypes;\nWayforpayButton.defaultProps = defaultProps;\n\nexport default WayforpayButton;\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\n// import moment from 'moment';\n\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { BACKEND_ENDPOINTS, useCRMData, useFrontAPI, useWebsiteData } from '../../../hooks';\nimport WayforpayButton from './Buttons/WayforpayButton';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    disabled: PropTypes.bool,\n};\n\nfunction extractProduct({ name, price, quantity }) {\n    return { name, price: price.amount, count: quantity };\n}\n\nexport function WayforpayPayment({ order, disabled }) {\n    const { finalUrl } = useWebsiteData();\n    const { payments } = useCRMData();\n    const api = useFrontAPI();\n    /*\n     * TODO: generate orderReference considering order timeout to avoid duplicated orders in wayforpay personal\n     *       cabinet (need more logic in cart and crm for that)\n     */\n    // const orderPaymentTimeout = 86400; // 1 day\n    // const orderCreatedInLocalTime = moment\n    //     .utc(order.createdAt)\n    //     .local()\n    //     .unix();\n    // const isOrderPaymentDead = Math.round(Date.now() / 1000) - orderCreatedInLocalTime > orderPaymentTimeout;\n    const orderReference = `${order._id}_uniq${Math.floor(Math.random() * 100000)}`;\n    const orderDate = useMemo(() => Math.round(Date.now() / 1000), []);\n    const products = useMemo(() => order.items.map(extractProduct), [order]);\n    const createSignature = useCallback(\n        (payload) => api.orders.signatures.createWayforpaySignature({ orderId: order._id, payload }),\n        [order._id]\n    );\n    const returnUrl = BACKEND_ENDPOINTS.getWayforpayCallback(order);\n\n    return (\n        <WayforpayButton\n            merchantAccount={payments.wayforpay.merchantAccount}\n            merchantDomainName={finalUrl}\n            orderReference={orderReference}\n            orderDate={orderDate}\n            amount={order.total.amount}\n            currency={order.total.currency}\n            products={products}\n            createSignature={createSignature}\n            returnUrl={returnUrl}\n            disabled={disabled}\n            // orderPaymentTimeout={orderPaymentTimeout}\n        />\n    );\n}\n\nWayforpayPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useState } from 'react';\n\nimport { PayButton } from '../../../PayButton';\n\nconst CURRENCIES = ['USD', 'EUR', 'RUB', 'KZT'];\nconst PAYMENT_URL = 'https://auth.robokassa.ru/Merchant/Index.aspx';\n\nconst propTypes = {\n    merchantLogin: PropTypes.string.isRequired,\n    invId: PropTypes.string.isRequired,\n    outSum: PropTypes.number.isRequired,\n    outSumCurrency: PropTypes.oneOf(CURRENCIES),\n    createSignature: PropTypes.func.isRequired,\n    isTest: PropTypes.bool.isRequired,\n    disabled: PropTypes.bool,\n};\n\nconst defaultProps = {\n    outSumCurrency: 'RUB',\n    isTest: false,\n};\n\nfunction RobokassaButton({\n    merchantLogin,\n    invId,\n    outSum,\n    outSumCurrency,\n    createSignature,\n    disabled: rawDisabled,\n    isTest,\n}) {\n    const [signature, setSignature] = useState('');\n    const [disabled, setDisabled] = useState(true);\n    const isDisabled = disabled || rawDisabled;\n\n    useEffect(() => {\n        async function request() {\n            setDisabled(true);\n\n            try {\n                const json = await createSignature({});\n\n                setSignature(json.signature);\n            } finally {\n                setDisabled(false);\n            }\n        }\n        void request();\n    }, []);\n\n    return (\n        <form method=\"POST\" action={PAYMENT_URL}>\n            <input type=\"hidden\" name=\"MerchantLogin\" value={merchantLogin} />\n            <input type=\"hidden\" name=\"InvId\" value={invId} />\n            <input type=\"hidden\" name=\"SignatureValue\" value={signature} />\n            <input type=\"hidden\" name=\"OutSum\" value={outSum} />\n            <input type=\"hidden\" name=\"OutSumCurrency\" value={outSumCurrency} />\n            {isTest && <input type=\"hidden\" name=\"IsTest\" value=\"1\" />}\n\n            <PayButton disabled={isDisabled} provider=\"robokassa\" />\n        </form>\n    );\n}\n\nRobokassaButton.propTypes = propTypes;\nRobokassaButton.defaultProps = defaultProps;\n\nexport default RobokassaButton;\n","import PropTypes from 'prop-types';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { encode } from 'js-base64';\n\nimport { PayButton } from '../../../PayButton';\n\nconst CURRENCIES = ['USD', 'EUR', 'RUB', 'UAH', 'BYN', 'KZT'];\nconst PAYMENT_URL = 'https://www.liqpay.ua/api/3/checkout';\nconst ACTIONS = ['pay', 'hold', 'subscribe', 'paydonate', 'auth'];\nconst VERSION = 3;\n\nconst propTypes = {\n    publicKey: PropTypes.string.isRequired,\n    action: PropTypes.oneOf(ACTIONS),\n    amount: PropTypes.number.isRequired,\n    currency: PropTypes.oneOf(CURRENCIES).isRequired,\n    description: PropTypes.string.isRequired,\n    orderId: PropTypes.string.isRequired,\n    resultUrl: PropTypes.string,\n    serverUrl: PropTypes.string,\n    disabled: PropTypes.bool,\n    createSignature: PropTypes.func.isRequired,\n};\n\nconst defaultProps = {\n    action: ACTIONS[0],\n};\n\nfunction LiqpayButton({\n    publicKey,\n    action,\n    amount,\n    currency,\n    description,\n    orderId,\n    createSignature,\n    resultUrl,\n    serverUrl,\n    disabled: rawDisabled,\n}) {\n    const [disabled, setDisabled] = useState(true);\n    const [signature, setSignature] = useState('');\n    const isDisabled = disabled || rawDisabled;\n\n    const data = useMemo(() => {\n        const params = {\n            public_key: publicKey,\n            version: VERSION,\n            action,\n            amount,\n            currency,\n            description,\n            order_id: orderId,\n        };\n        if (resultUrl) params['result_url'] = resultUrl;\n        if (serverUrl) params['server_url'] = serverUrl;\n\n        return encode(JSON.stringify(params));\n    }, [publicKey, action, amount, currency, description, orderId]);\n\n    useEffect(() => {\n        async function request() {\n            if (!rawDisabled) {\n                setDisabled(true);\n\n                try {\n                    const json = await createSignature({ data });\n\n                    setSignature(json.signature);\n                } finally {\n                    setDisabled(false);\n                }\n            }\n        }\n\n        void request();\n    }, [data]);\n\n    return (\n        <form method=\"POST\" action={PAYMENT_URL}>\n            <input type=\"hidden\" name=\"data\" value={data} />\n            <input type=\"hidden\" name=\"signature\" value={signature} />\n\n            <PayButton disabled={isDisabled} provider=\"liqpay\" />\n        </form>\n    );\n}\n\nLiqpayButton.propTypes = propTypes;\nLiqpayButton.defaultProps = defaultProps;\n\nexport default LiqpayButton;\n","import { FiChevronsRight, FiTruck } from 'react-icons/fi';\nimport { FaMoneyBillAlt, FaPaypal, FaStripe } from 'react-icons/fa';\n\nimport { CashOnDeliveryPayment } from './CashOnDeliveryPayment';\nimport { StripePayment } from './StripePayment';\nimport { PayPalPayment } from './PayPalPayment';\nimport { WayforpayPayment } from './WayforpayPayment';\nimport { RobokassaPayment } from './RobokassaPayment';\nimport { LiqpayPayment } from './LiqpayPayment';\nimport { OtherPayment } from './OtherPayment';\n\nexport const PAYMENT_PROVIDERS = [\n    { provider: 'cod', icon: FiTruck },\n    { provider: 'paypal', icon: FaPaypal },\n    { provider: 'stripe', icon: FaStripe },\n    { provider: 'wayforpay', icon: FaMoneyBillAlt },\n    // { provider: 'robokassa', icon: FaMoneyBillAlt },\n    { provider: 'liqpay', icon: FiChevronsRight },\n    // { provider: 'other', icon: FaMoneyBillAlt },\n];\n\nexport const PAYMENT_PROVIDER_RENDERERS = {\n    cod: CashOnDeliveryPayment,\n    stripe: StripePayment,\n    paypal: PayPalPayment,\n    wayforpay: WayforpayPayment,\n    robokassa: RobokassaPayment,\n    liqpay: LiqpayPayment,\n    other: OtherPayment,\n};\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\n\nimport { __t } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useModalThemes } from '../../../hooks';\nimport { ThemedButton } from '../../../UI';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function CashOnDeliveryPayment({ disabled, onPay }) {\n    const { contentStyle } = useModalThemes();\n\n    const handleOrder = useCallback(() => onPay('cod'), [onPay]);\n\n    return (\n        <ThemedButton fullWidth theme={contentStyle} disabled={disabled} onClick={handleOrder}>\n            {__t('make_order')}\n        </ThemedButton>\n    );\n}\n\nCashOnDeliveryPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { Elements } from '@stripe/react-stripe-js';\nimport { loadStripe } from '@stripe/stripe-js/pure';\nimport { useToggle } from 'react-use';\n\nimport { __t, PAYMENT_PROVIDERS } from '@mssgme/shared';\nimport { useModalThemes, usePaymentConfigs } from '../../../hooks';\nimport { ThemedButton, ThemedModal } from '../../../UI';\nimport StripeCheckoutForm from '../../StripeCheckoutForm';\n\nconst propTypes = {\n    order: PropTypes.object.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function StripePayment({ order, disabled, onPay }) {\n    const { icon: Icon, label } = PAYMENT_PROVIDERS.stripe;\n    const { payments, isSingularOnline } = usePaymentConfigs();\n    const { contentStyle } = useModalThemes();\n    const [isModal, toggleModal] = useToggle(false);\n    const stripePromise = useMemo(() => loadStripe(payments.stripe.publicKey), [payments.stripe.publicKey]);\n\n    const elements = (\n        <Elements stripe={stripePromise}>\n            <StripeCheckoutForm orderId={order._id} disabled={disabled} onPay={onPay} />\n        </Elements>\n    );\n\n    if (isSingularOnline) {\n        return elements;\n    }\n\n    return (\n        <ThemedButton\n            fullWidth\n            beforeIcon={<Icon size={24} />}\n            theme={contentStyle}\n            disabled={disabled}\n            onClick={toggleModal}\n            contentAlignLeft\n        >\n            {__t('payWith', { provider: label })}\n\n            {isModal && (\n                <ThemedModal noop compact overlay padding title={label} onClose={toggleModal}>\n                    {elements}\n                </ThemedModal>\n            )}\n        </ThemedButton>\n    );\n}\n\nStripePayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { PayPalButtons, PayPalScriptProvider } from '@paypal/react-paypal-js';\n\nimport { __t, PAYMENT_PROVIDERS } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { ThemedButton } from '../../../UI';\nimport { useCRMData, useModalThemes } from '../../../hooks';\n\n// paypal buttons docs: https://paypal.github.io/react-paypal-js\n\nimport styles from './PayPalPayment.module.scss';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function PayPalPayment({\n    order: {\n        total,\n        items,\n        contactInfo: { firstName, lastName } = {},\n    },\n    disabled,\n    onPay,\n}) {\n    const { icon: Icon, label, supported_currencies } = PAYMENT_PROVIDERS.paypal;\n    const { payments } = useCRMData();\n    const { contentStyle } = useModalThemes();\n    const isSupportedCurrency = supported_currencies.includes(total.currency);\n\n    const createOrder = useCallback(\n        (data, actions) =>\n            actions.order.create({\n                purchase_units: [\n                    {\n                        amount: {\n                            currency_code: total.currency,\n                            value: total.amount,\n                            breakdown: {\n                                item_total: {\n                                    currency_code: total.currency,\n                                    value: total.amount,\n                                },\n                            },\n                        },\n                        payer: {\n                            name: {\n                                given_name: firstName,\n                                surname: lastName,\n                            },\n                        },\n                        items: items.map(({ name, price, quantity }) => ({\n                            name,\n                            unit_amount: {\n                                currency_code: price.currency,\n                                value: price.amount,\n                            },\n                            quantity,\n                        })),\n                    },\n                ],\n            }),\n        [total]\n    );\n\n    const onApprove = useCallback(\n        async (data, actions) => {\n            const details = await actions.order.capture();\n            await onPay('paypal', details);\n        },\n        [onPay]\n    );\n\n    return (\n        <div className={styles.root}>\n            <ThemedButton\n                fullWidth\n                beforeIcon={<Icon size={24} />}\n                theme={contentStyle}\n                disabled={disabled || !isSupportedCurrency}\n                className={styles.overlapButton}\n                contentAlignLeft\n            >\n                {__t('payWith', { provider: label })}\n            </ThemedButton>\n\n            {isSupportedCurrency && (\n                <PayPalScriptProvider options={{ 'client-id': payments.paypal.clientId, currency: total.currency }}>\n                    <PayPalButtons\n                        style={{ layout: 'horizontal', tagline: false }}\n                        disabled={disabled}\n                        createOrder={createOrder}\n                        onApprove={onApprove}\n                    />\n                </PayPalScriptProvider>\n            )}\n        </div>\n    );\n}\n\nPayPalPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\n\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useCRMData, useFrontAPI } from '../../../hooks';\nimport RobokassaButton from './Buttons/RobokassaButton';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function RobokassaPayment({ order, disabled }) {\n    const api = useFrontAPI();\n    const {\n        payments: {\n            robokassa: { merchantLogin, test: isTest },\n        },\n    } = useCRMData();\n    const createSignature = useCallback(\n        (payload) => api.orders.signatures.createRobokassaSignature({ orderId: order._id, payload }),\n        [order._id]\n    );\n\n    return (\n        <RobokassaButton\n            merchantLogin={merchantLogin}\n            outSum={order.total.amount}\n            outSumCurrency={order.total.currency}\n            invId={order._id}\n            createSignature={createSignature}\n            disabled={disabled}\n            isTest={isTest}\n        />\n    );\n}\n\nRobokassaPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { __t } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useCRMData, useFrontAPI, BACKEND_ENDPOINTS, useWebsiteData } from '../../../hooks';\nimport LiqpayButton from './Buttons/LiqpayButton';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function LiqpayPayment({ order, disabled }) {\n    const api = useFrontAPI();\n    const orderReference = `${order._id}_uniq${Math.floor(Math.random() * 100000)}`;\n    const { payments } = useCRMData();\n    const { finalUrl } = useWebsiteData();\n    const description = `${__t('payment_for_order')}${order._id}:\\n\\n${order.items\n        .map(\n            (product, index) =>\n                `${index + 1}. ${product.name} ${product.quantity}x${product.price.amount}${product.price.currency}\\n`\n        )\n        .join('')}\\n\\n${finalUrl}`;\n    const { resultUrl, serverUrl } = useMemo(\n        () => ({\n            serverUrl: BACKEND_ENDPOINTS.getLiqPayCallback(order),\n            resultUrl: BACKEND_ENDPOINTS.getLiqPayResultUrl(order),\n        }),\n        [order]\n    );\n\n    const createSignature = useCallback(\n        (payload) => api.orders.signatures.createLiqpaySignature({ orderId: order._id, payload }),\n        [order._id]\n    );\n\n    return (\n        <LiqpayButton\n            publicKey={payments.liqpay.publicKey}\n            amount={order.total.amount}\n            currency={order.total.currency}\n            orderId={orderReference}\n            description={description}\n            createSignature={createSignature}\n            resultUrl={resultUrl}\n            serverUrl={serverUrl}\n            disabled={disabled}\n        />\n    );\n}\n\nLiqpayPayment.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\nimport { useToggle } from 'react-use';\n\nimport { __t } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useCRMData, useModalThemes } from '../../../hooks';\nimport { ThemedButton, ThemedModal } from '../../../UI';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    onPay: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n};\n\nexport function OtherPayment({ order, disabled, onPay }) {\n    const { payments } = useCRMData();\n    const { contentStyle } = useModalThemes();\n    const [isModal, toggleModal] = useToggle();\n\n    const handleOrder = useCallback(() => onPay('other'), [onPay]);\n    const handleModal = useCallback(() => {\n        if (payments.other.instructions) {\n            toggleModal(true);\n        } else {\n            handleOrder();\n        }\n    }, [payments.other.instructions, toggleModal]);\n\n    return (\n        <div>\n            <ThemedButton fullWidth theme={contentStyle} disabled={disabled} onClick={handleModal}>\n                {__t('make_order')}\n            </ThemedButton>\n\n            {isModal && (\n                <ThemedModal noop compact overlay padding title={__t('payments_instructions')} onClose={toggleModal}>\n                    {(handleClose) => (\n                        <div>\n                            <div style={{ whiteSpace: 'pre-wrap' }}>{payments.other.instructions}</div>\n\n                            <ThemedButton fullWidth theme={contentStyle} disabled={disabled} onClick={handleClose}>\n                                {__t('make_order')}\n                            </ThemedButton>\n                        </div>\n                    )}\n                </ThemedModal>\n            )}\n        </div>\n    );\n}\n\nOtherPayment.propTypes = propTypes;\n","// extracted by mini-css-extract-plugin\nexport default {\"pane\":\"_22bNT242\",\"row\":\"_1aKGTBoE\",\"rowHeading\":\"_2wol5j8d\",\"rowValue\":\"_2y4mBT-6\",\"products\":\"_2oeH4yHJ\",\"messengers\":\"_11ZcmkRn\",\"sectionHeading\":\"_3AQKaSPi\",\"buttons\":\"_2kTPySrm\",\"paymentButtons\":\"_22nke0JS\",\"cancelPrompt\":\"y4u_ljJp\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cls } from '@mssgme/helpers';\nimport { FeaturesBlockKind } from '@mssgme/shared';\nimport { useBlockTheme } from '../../../hooks';\n\nimport styles from './OrderView.module.scss';\n\nexport const Section = ({ title, ...rest }) => {\n    const { style } = useBlockTheme({ kind: FeaturesBlockKind });\n\n    return (\n        <>\n            {title && <h3 className={styles.sectionHeading}>{title}</h3>}\n            <div style={style} {...cls(styles.pane, rest)} />\n        </>\n    );\n};\n\nSection.propTypes = {\n    title: PropTypes.any,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cls } from '@mssgme/helpers';\n\nimport styles from './OrderView.module.scss';\n\nexport const Row = ({ title, ...rest }) => {\n    return (\n        <div className={styles.row}>\n            <div className={styles.rowHeading}>{title}</div>\n            <div {...cls(styles.rowValue, rest)} />\n        </div>\n    );\n};\n\nRow.propTypes = {\n    title: PropTypes.any,\n};\n","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { useAsyncFn, useToggle } from 'react-use';\nimport { AnimatePresence, motion } from 'framer-motion';\n\nimport { __t, getLocalizedDynamicLabel } from '@mssgme/shared';\nimport { useBooleanHandler } from '@mssgme/hooks';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport {\n    handlesPaymentsStatus,\n    useContacts,\n    useFrontAPI,\n    useModalThemes,\n    usePaymentConfigs,\n    useRenderer,\n} from '../../../hooks';\nimport { ThemedButton, ThemedModal } from '../../../UI';\nimport { PAYMENT_PROVIDER_RENDERERS } from '../../CheckoutPage';\nimport { Section } from './Section';\nimport { Row } from './Row';\n\nimport styles from './OrderView.module.scss';\n\nconst CONTACT_TYPES = ['name', 'phone', 'email'];\nconst mapLabels = (items) =>\n    items\n        .map((item) => item.value && {\n            ...item,\n            key: `${item.type}-${item.label}`,\n            label: getLocalizedDynamicLabel(item),\n        })\n        .filter(Boolean);\n\nOrderView.propTypes = {\n    isFetching: PropTypes.bool,\n    order: LandingsPropTypes.order.isRequired,\n};\n\nexport function OrderView({ isFetching, order }) {\n    const api = useFrontAPI();\n    const payments = usePaymentConfigs();\n    const renderBlock = useRenderer();\n    const contacts = useContacts();\n    const orderId = order._id;\n    const [isPayNowModal, togglePayNowModal] = useToggle(false);\n    const [isShowingCancelPrompt, showCancelPrompt, hideCancelPrompt] = useBooleanHandler();\n    const { contentStyle } = useModalThemes();\n\n    const { contactsData, additionalData } = useMemo(() => {\n        const contacts = CONTACT_TYPES.map((type) => order.fields.filter((f) => f.type === type)).flat();\n        const additional = order.fields.filter((i) => !contacts.includes(i));\n\n        return {\n            contactsData: mapLabels(contacts),\n            additionalData: mapLabels(additional),\n        };\n    }, [order.fields]);\n\n    const { immediate, online } = useMemo(() => {\n        const mapper = ([provider]) => [provider, PAYMENT_PROVIDER_RENDERERS[provider]];\n\n        return {\n            immediate: payments.immediate.map(mapper),\n            online: payments.online.map(mapper),\n        };\n    }, [payments]);\n\n    const [{ loading: finalizeLoading }, handlePay] = useAsyncFn(\n        async (paymentMethod) => {\n            await api.orders.finalize({ orderId, payload: { paymentMethod } });\n            togglePayNowModal();\n        },\n        [orderId]\n    );\n\n    const [{ loading: cancelLoading }, handleCancelOrder] = useAsyncFn(async () => {\n        await api.orders.cancel({ orderId });\n        hideCancelPrompt();\n    }, [orderId]);\n\n    if (!order.finalized) {\n        return null;\n    }\n\n    const loading = isFetching || finalizeLoading || cancelLoading;\n    const isJustOneOnlinePaymentMethod = !immediate.length && online.length === 1;\n    const onlineElements = online.map(\n        ([key, Renderer]) => <Renderer key={key} order={order} disabled={loading} onPay={handlePay} />\n    );\n\n    return (\n        <div>\n            <Section>\n                <Row title={__t('order_status')}>{__t(`order_status_${order.feedback.status}`)}</Row>\n                {handlesPaymentsStatus(order.paymentMethod) && (\n                    <Row title={__t('payment_status')}>{__t(`payment_status_${order.status}`)}</Row>\n                )}\n            </Section>\n\n            {!!contactsData.length && (\n                <Section title={__t('your_contacts')}>\n                    {contactsData.map((item) => (\n                        <Row key={item.key} title={item.label}>{item.value}</Row>\n                    ))}\n                </Section>\n            )}\n\n            {!!additionalData.length && (\n                <Section title={__t('other_data')}>\n                    {additionalData.map((item) => (\n                        <Row key={item.key} title={item.label}>{item.value}</Row>\n                    ))}\n                </Section>\n            )}\n\n            <Section className={styles.products} title={__t('order_content')}>\n                {order.items.map((product, index) => (\n                    <Row key={index} title={product.name}>\n                        {product.quantity}x{product.price.amount} {product.price.currency}\n                    </Row>\n                ))}\n\n                <Row title={__t('order_summary')}>{order.total.amount} {order.total.currency}</Row>\n            </Section>\n\n            {contacts && (\n                <Section className={styles.messengers} title={__t('store_contacts')}>\n                    {contacts.map(renderBlock)}\n                </Section>\n            )}\n\n            <AnimatePresence>\n                {order.status === 'failed' && order.feedback.status !== 'rejected' && (\n                    <motion.div\n                        key=\"order-actions\"\n                        className={styles.buttons}\n                        exit={{ opacity: 0, height: 0, marginTop: '0px' }}\n                    >\n                        {isJustOneOnlinePaymentMethod ? (\n                            onlineElements\n                        ) : (\n                            <ThemedButton theme={contentStyle} onClick={togglePayNowModal}>\n                                {__t('pay_order')}\n                            </ThemedButton>\n                        )}\n\n                        <ThemedButton theme={contentStyle} contour onClick={showCancelPrompt}>\n                            {__t('cancel_order')}\n                        </ThemedButton>\n                    </motion.div>\n                )}\n\n                {!isJustOneOnlinePaymentMethod && isPayNowModal && (\n                    <ThemedModal\n                        key=\"online-payment-options\"\n                        overlay\n                        compact\n                        padding\n                        className={styles.paymentButtons}\n                        title={__t('choose_payment_method')}\n                        onClose={togglePayNowModal}\n                    >\n                        {onlineElements}\n                    </ThemedModal>\n                )}\n\n                {isShowingCancelPrompt && (\n                    <ThemedModal\n                        key=\"order-cancellation\"\n                        overlay\n                        compact\n                        padding\n                        title={__t('order_cancellation')}\n                        onClose={hideCancelPrompt}\n                    >\n                        <div className={styles.cancelPrompt}>\n                            {__t('order_cancellation_prompt')}\n                        </div>\n\n                        <ThemedButton\n                            theme={contentStyle}\n                            onClick={handleCancelOrder}\n                            disabled={loading}\n                        >\n                            {__t('order_cancellation_prompt_button')}\n                        </ThemedButton>\n                    </ThemedModal>\n                )}\n            </AnimatePresence>\n        </div>\n    );\n}\n","import { useEffect, useMemo, useState } from 'react';\nimport { useAsync } from 'react-use';\n\nimport { isMatchedById, ServicesGridBlockKind } from '@mssgme/shared';\n\nconst PRODUCT_KIND = 'product';\nconst SERVICE_KIND = 'service';\nconst getIdsByKind = (items, kind) => items.filter((item) => item.kind === kind).map(({ productId }) => productId);\n\nexport const useOrderProducts = (website, order, retrieveFn) => {\n    const [resolved, setResolved] = useState(null);\n    const { pages = [] } = website;\n    const { value } = useAsync(async () => {\n        const productIds = getIdsByKind(order.items, PRODUCT_KIND);\n        const serviceIds = getIdsByKind(order.items, SERVICE_KIND);\n        const products = [];\n        const services = [];\n\n        if (productIds.length && retrieveFn) {\n            await Promise.all(\n                productIds.map(async (productId) => {\n                    try {\n                        const product = await retrieveFn({ productId });\n\n                        if (product) {\n                            products.push(product);\n                        }\n                    } catch (e) {\n                        // eslint-disable-next-line no-console\n                        console.warn(`Product with ID \"${productId}\" not found`);\n                    }\n                })\n            );\n        }\n\n        if (serviceIds.length) {\n            let total = serviceIds.length;\n            const missing = new Set(serviceIds);\n\n            for (const page of pages) {\n                for (const block of page.blocks) {\n                    if (block.kind !== ServicesGridBlockKind) {\n                        continue;\n                    }\n\n                    for (const item of block.items) {\n                        if (missing.has(item._id)) {\n                            services.push(item);\n                            total--;\n\n                            if (total <= 0) {\n                                break;\n                            }\n                        }\n                    }\n\n                    if (total <= 0) {\n                        break;\n                    }\n                }\n\n                if (total <= 0) {\n                    break;\n                }\n            }\n        }\n\n        return {\n            products,\n            services,\n        };\n    }, [order.items, retrieveFn]);\n\n    useEffect(() => {\n        if (value) {\n            setResolved(value);\n        }\n    }, [value]);\n\n    return useMemo(\n        () =>\n            order.items.map((item) => {\n                const product = resolved && ((item.kind === PRODUCT_KIND ? resolved.products : resolved.services))\n                    .find(isMatchedById(item.productId));\n\n                return {\n                    ...item,\n                    product: product || { name: item.name, price: item.price, photoUrl: '' },\n                };\n            }),\n        [order.items, resolved]\n    );\n};\n","import { useMemo } from 'react';\n\nimport { usePageTheme } from '../hooks';\n\nexport const usePageColors = (styles) => {\n    const { theme } = usePageTheme();\n\n    return useMemo(() => {\n        const backgroundColor = styles && styles.backgroundColor;\n        const color = styles && styles.color;\n\n        return backgroundColor && color\n            ? styles\n            : {\n                backgroundColor: backgroundColor || theme.colors.background,\n                color: color || theme.colors.text,\n            };\n    }, [styles, theme.colors]);\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_389NbFoE\"};","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\n\nimport { cls } from '@mssgme/helpers';\nimport { usePageColors } from '../../hooks';\n\nimport styles from './Divider.module.scss';\n\nexport const Divider = ({ style: baseStyle, ...props }) => {\n    const colors = usePageColors();\n    const style = useMemo(() => ({ borderTop: `1px solid ${colors.color}`, ...baseStyle }));\n\n    return <div style={style} {...cls(styles.root, props)} />;\n};\n\nDivider.propTypes = {\n    style: PropTypes.object,\n};\n","import TinyColor2 from 'tinycolor2';\n\nexport default (rawColor, opacity) => {\n    const color = rawColor?.setAlpha ? rawColor : new TinyColor2(rawColor);\n\n    return color.setAlpha(opacity);\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"_3zOmJzIQ\",\"disabled\":\"LsSgMyv2\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cls } from '@mssgme/helpers';\nimport { getProps } from './PureButton';\n\nimport styles from './IconButton.module.scss';\n\nIconButton.propTypes = {\n    as: PropTypes.elementType,\n    className: PropTypes.string,\n    disabled: PropTypes.bool,\n};\n\nIconButton.defaultProps = {\n    as: 'button',\n};\n\nexport default function IconButton({ as: Component, children, disabled, ...rest }) {\n    return (\n        <Component {...cls([styles.button, disabled && styles.disabled], getProps(Component, rest))}>\n            {children}\n        </Component>\n    );\n}\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\nfunction MinusIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path d=\"M5 12h14\" stroke=\"currentColor\" strokeWidth={2} strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n        </IconBase>\n    );\n}\nconst ForwardRef = React.forwardRef(MinusIcon);\nexport default ForwardRef;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\nfunction PlusIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M12 5v14M5 12h14\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\nconst ForwardRef = React.forwardRef(PlusIcon);\nexport default ForwardRef;\n","import { formatPrice } from '@mssgme/shared';\n\nexport function printPrice(price) {\n    return formatPrice(price.amount, price.currency, navigator.language);\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2p_krtoC\",\"divider\":\"_32xswSN8\",\"knob\":\"_1OsT2mWl\",\"thumbnail\":\"_34dPzqVj\",\"meta\":\"_1DAKM6mP\",\"title\":\"_25jFGq4s\",\"details\":\"_3SVkZpMQ\",\"row\":\"xnUPykD9\",\"quantity\":\"_3m-71WTB\",\"quantityText\":\"_1vBi3POF\",\"price\":\"kDYwhBh4\",\"subTotal\":\"IvUozG8W\",\"list\":\"_1rZRO169\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo } from 'react';\nimport { IoMdImage } from 'react-icons/io';\n\nimport { getTransparentColor } from '@mssgme/helpers';\nimport { mediaUtils } from '@mssgme/shared';\nimport { IconButton, LandingsPropTypes, LazyImage } from '@mssgme/ui';\nimport { CloseIcon, MinusIcon, PlusIcon } from '@mssgme/icons';\nimport { usePageColors } from '../../hooks';\nimport { printPrice } from '../printPrice';\n\nimport styles from './OrderItem.module.scss';\n\nconst propTypes = {\n    item: LandingsPropTypes.orderItem.isRequired,\n    tag: PropTypes.oneOfType([PropTypes.string, PropTypes.elementType]),\n    onAdjust: PropTypes.func,\n};\n\nexport function OrderItem({ item, onAdjust, tag: Tag = 'li' }) {\n    const colors = usePageColors();\n    const style = useMemo(() => ({ borderColor: getTransparentColor(colors.color, 0.2) }));\n    const isEditable = !!onAdjust;\n    const isMultiEditable = item.quantity > 1 && isEditable;\n\n    const handleAdjust = useCallback(\n        (delta) => onAdjust([{ productId: item.productId, quantity: Math.max(0, item.quantity + delta) }]),\n        [item, onAdjust]\n    );\n    const handleAdd = useCallback(() => handleAdjust(+1), [handleAdjust]);\n    const handleSubtract = useCallback(() => handleAdjust(-1), [handleAdjust]);\n    const handleRemove = useCallback(() => handleAdjust(-Infinity), [handleAdjust]);\n\n    return (\n        <Tag className={styles.root}>\n            <div className={styles.divider} style={{ backgroundColor: colors.color }} />\n            <div className={styles.thumbnail}>\n                {item.product.photoUrl ? (\n                    <LazyImage src={mediaUtils.generateProductThumbnailUrl(item.product.photoUrl)} alt={item.name} />\n                ) : (\n                    <div className={styles.emptyPlaceholder}>\n                        <IoMdImage size={70} color=\"#fff\" />\n                    </div>\n                )}\n            </div>\n            <div className={styles.meta}>\n                <div className={styles.title} style={style}>\n                    <div>{item.name}</div>\n\n                    {isEditable && (\n                        <IconButton className={styles.knob} onClick={handleRemove}>\n                            <CloseIcon />\n                        </IconButton>\n                    )}\n                </div>\n                <div className={styles.details}>\n                    <div className={styles.row}>\n                        <div className={styles.quantity}>\n                            {isEditable && (\n                                <IconButton\n                                    className={styles.knob}\n                                    disabled={item.quantity <= 1}\n                                    onClick={handleSubtract}\n                                >\n                                    <MinusIcon size={16} />\n                                </IconButton>\n                            )}\n                            <div className={styles.quantityText} style={{ margin: isEditable ? '0 8px' : '0' }}>\n                                {!isEditable && 'x'}\n                                {item.quantity}\n                            </div>\n                            {isEditable && (\n                                <IconButton className={styles.knob} onClick={handleAdd}>\n                                    <PlusIcon size={16} />\n                                </IconButton>\n                            )}\n                        </div>\n                        <div className={styles.price} style={{ fontWeight: isMultiEditable ? 400 : 600 }}>\n                            {isMultiEditable && `${item.quantity} x `}\n                            {printPrice(isEditable ? item.price : item.subtotal)}\n                        </div>\n                    </div>\n\n                    {isMultiEditable && <div className={styles.subTotal}>= {printPrice(item.subtotal)}</div>}\n                </div>\n            </div>\n        </Tag>\n    );\n}\n\nOrderItem.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useCallback } from 'react';\n\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { productsApi } from '@mssgme/lib';\nimport { useOrderProducts, useWebsiteData } from '../../hooks';\nimport { Divider } from '../Divider';\nimport { OrderItem } from './OrderItem';\n\nimport styles from './OrderItem.module.scss';\n\nconst propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    onAdjust: PropTypes.func,\n};\n\nexport function OrderItemsList({ order, onAdjust, ...rest }) {\n    const website = useWebsiteData();\n    const products = useOrderProducts(\n        website,\n        order,\n        useCallback(({ productId }) => productsApi.load(website.workspace, productId), [])\n    );\n\n    return (\n        <div {...rest}>\n            <Divider style={{ marginBottom: 0 }} />\n            <ul className={styles.list}>\n                {products.map((item) => (\n                    <OrderItem key={item._id} item={item} onAdjust={onAdjust} />\n                ))}\n            </ul>\n            <Divider style={{ marginTop: 0 }} />\n        </div>\n    );\n}\n\nOrderItemsList.propTypes = propTypes;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_2WhlHgZd\",\"padded\":\"_3VFJvSAH\",\"pullout\":\"iRlRNarM\"};","import PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\nimport { cls } from '@mssgme/helpers';\n\nimport styles from './FloatingActions.module.scss';\n\nexport const FloatingActions = ({ children, gap = 32, padded, pullout, style: baseStyle, ...rest }) => {\n    const style = useMemo(() => (padded ? baseStyle : { bottom: gap, margin: gap, ...baseStyle }), [\n        baseStyle,\n        gap,\n    ]);\n\n    return (\n        <div style={style} {...cls([styles.root, padded && styles.padded, pullout && styles.pullout], rest)}>\n            {children}\n        </div>\n    );\n};\n\nFloatingActions.propTypes = {\n    gap: PropTypes.number,\n    style: PropTypes.object,\n    padded: PropTypes.bool,\n    pullout: PropTypes.bool,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"tNmpor4A\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { Button, FloatingActions } from '@mssgme/ui';\nimport { useModalThemes } from '../../hooks';\nimport { ThemedButton } from '../../UI';\n\nimport styles from './FormFooter.module.scss';\n\nFormFooter.propTypes = {\n    ...Button.propTypes,\n    contour: PropTypes.bool,\n    contentAlignLeft: PropTypes.bool,\n};\n\nexport function FormFooter(props) {\n    const { contentStyle } = useModalThemes();\n\n    return (\n        <FloatingActions padded className={styles.root}>\n            <ThemedButton fullWidth theme={contentStyle} type=\"submit\" {...props} />\n        </FloatingActions>\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"Ph3174kY\",\"label\":\"_2gBu1uHh\",\"value\":\"_27nAkx6J\"};","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { cls } from '@mssgme/helpers';\nimport styles from './Row.module.scss';\n\nconst propTypes = {\n    label: PropTypes.string.isRequired,\n    value: PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.element]).isRequired,\n};\n\nexport function Row({ label, value, ...rest }) {\n    return (\n        <div {...cls(styles.root, rest)}>\n            <div className={styles.label}>{label}</div>\n            <div className={styles.value}>{value}</div>\n        </div>\n    );\n}\n\nRow.propTypes = propTypes;\n","import PropTypes from 'prop-types';\nimport React, { useEffect } from 'react';\nimport { Link, Redirect } from 'react-router-dom';\nimport { useAsyncFn } from 'react-use';\n\nimport { __t } from '@mssgme/shared';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useCoreContext, useFrontAPI } from '../../hooks';\nimport { OrderItemsList } from '../OrderItem';\nimport { printPrice } from '../printPrice';\nimport { FormFooter } from '../FormFooter';\nimport { Row } from './Row';\n\nShoppingCart.propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    onClose: PropTypes.func.isRequired,\n};\n\nexport function ShoppingCart({ order, onClose }) {\n    const { router } = useCoreContext();\n    const { generateUrl } = useNavigationUtils();\n    const api = useFrontAPI();\n    const orderId = order._id;\n    const hasItems = order.items.length;\n\n    const [{ loading }, handleModifyItems] = useAsyncFn(\n        /** @param {{ productId: string, quantity: number }[]} items Order items */\n        async (items) => await api.orders.modify({\n            orderId,\n            payload: {\n                items,\n            },\n        }),\n        [orderId]\n    );\n\n    useEffect(() => {\n        if (order.finalized) {\n            return;\n        }\n\n        const { total: { amount, currency }, items } = order;\n\n        document.dispatchEvent(new CustomEvent('openCart', {\n            detail: {\n                currency,\n                value: amount,\n                items: items.map(({ name, _id, price: { amount }, quantity }) =>\n                    ({\n                        name,\n                        id: _id,\n                        price: amount,\n                        quantity,\n                    })\n                ),\n            },\n        }));\n    }, []);\n\n    if (order.finalized) {\n        return <Redirect to={router.orders.toStatus(order._id, order.status)} />;\n    }\n\n    return (\n        <div>\n            <OrderItemsList order={order} onAdjust={order.finalized ? undefined : handleModifyItems} />\n            <Row label={__t('total_to_pay')} value={printPrice(order.total)} />\n\n            <FormFooter\n                isFetching={loading}\n                {...(hasItems ? {\n                    tag: Link,\n                    to: generateUrl('checkout'),\n                    children: __t('make_order'),\n                } : {\n                    onClick: onClose,\n                    children: __t('close'),\n                })}\n            />\n        </div>\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"error\":\"_27zh863S\",\"root\":\"_1H74SOeQ\",\"cancelPrompt\":\"_1sJ_30TG\"};","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_1IJ7hJnx\",\"icon\":\"_1uGD0Z98\",\"title\":\"_3xZREUB7\",\"subTitle\":\"_2QnSsLZW\",\"orderTitle\":\"_3QYYAC-z\"};","import * as React from 'react';\nimport { IconBase } from 'react-icons';\nfunction CheckCircleIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M22 11.08V12a10 10 0 11-5.93-9.14\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n            <path\n                d=\"M22 4L12 14.01l-3-3\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\nconst ForwardRef = React.forwardRef(CheckCircleIcon);\nexport default ForwardRef;\n","import * as React from 'react';\nimport { IconBase } from 'react-icons';\nfunction CircleIcon(props, svgRef) {\n    return (\n        <IconBase fill=\"none\" viewBox=\"0 0 24 24\" ref={svgRef} {...props}>\n            <path\n                d=\"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z\"\n                stroke=\"currentColor\"\n                strokeWidth={2}\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n            />\n        </IconBase>\n    );\n}\nconst ForwardRef = React.forwardRef(CircleIcon);\nexport default ForwardRef;\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_1SXwPFZZ\",\"content\":\"_1uaQZPAb\",\"check\":\"_2v-3JRmC\",\"active\":\"_232gM3b4\",\"disabled\":\"_27rmNeQK\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport { cls } from '@mssgme/helpers';\nimport { CheckCircleIcon, CircleIcon } from '@mssgme/icons';\n\nimport styles from './CheckableItem.module.scss';\n\nexport const CheckableItem = ({ active, disabled, size = 24, children, color, contentClass, ...rest }) => {\n    return (\n        <div {...cls([styles.root, active && styles.active, disabled && styles.disabled], rest)}>\n            <div className={cn(styles.content, contentClass)}>{children}</div>\n            <div className={styles.check}>\n                {active ? <CheckCircleIcon color={color} size={size} /> : <CircleIcon color={color} size={size} />}\n            </div>\n        </div>\n    );\n};\n\nCheckableItem.propTypes = {\n    active: PropTypes.bool,\n    disabled: PropTypes.bool,\n    size: PropTypes.number,\n    color: PropTypes.string,\n    contentClass: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"root\":\"_3Ba-S6oD\",\"groupLabel\":\"szvbRXj9\",\"choice\":\"_3NA6QBBD\",\"active\":\"_1hIH3AMU\",\"rounded\":\"_3kGbZSvl\",\"checkMark\":\"_13P8LlaW\",\"icon\":\"_25huiXgK\",\"label\":\"_3A425TGz\",\"grid\":\"_1cWiPMVk\"};","import React, { useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\nimport { FiCheck } from 'react-icons/fi';\n\nimport styles from './ListInput.module.scss';\n\nexport default function ListInput({\n    options,\n    groups,\n    value,\n    toggle,\n    multiple,\n    grid,\n    containerClassName,\n    choiceClassName,\n    activeClassName,\n    groupLabelClassName,\n    fullWidthClassName,\n    renderOption,\n    style,\n    onChange,\n}) {\n    const isSelected = (selected) => {\n        return multiple ? value.includes(selected) : value === selected;\n    };\n    const handleClick = (selected, e) => {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const add = toggle && isSelected(selected);\n\n        if (multiple) {\n            if (add) {\n                onChange(value.filter((item) => item !== selected));\n            } else {\n                onChange([...new Set([...value, selected])]);\n            }\n        } else {\n            if (add) {\n                onChange(undefined);\n            } else {\n                onChange(selected);\n            }\n        }\n    };\n\n    const grouped = useMemo(() => {\n        const result = new Map((groups || []).map((group) => [group.id, { ...group, options: [] }]));\n\n        if (!result.get('default')) {\n            result.set('default', { id: 'default', options: [], label: '' });\n        }\n\n        if (groups) {\n            for (const option of options) {\n                if (option.group) {\n                    const group = result.get(option.group);\n\n                    if (group) {\n                        group.options.push(option);\n                    } else {\n                        result.set(option.group, { id: 'default', options: [option], label: option.group });\n                    }\n                }\n            }\n\n            for (const group of [...result.values()]) {\n                if (!group.options.length) {\n                    result.delete(group.id);\n                }\n            }\n        }\n\n        return new Map(\n            [...result.entries()].sort(([, a], [, b]) => {\n                const indexA = Number.isInteger(a.index) ? a.index : a.id;\n                const indexB = Number.isInteger(b.index) ? b.index : b.id;\n\n                return indexB - indexA;\n            })\n        );\n    }, [groups]);\n\n    const renderOptions = (options) =>\n        options.map((option) => {\n            const active = isSelected(option.value);\n            const Icon = option.icon;\n            const content = (renderOption && renderOption({ option, active })) ||\n                (option.props && option.props.children) || (\n                <>\n                    {Icon && (\n                        <div className={styles.icon}>\n                            <Icon size={24} />\n                        </div>\n                    )}\n                    <div className={styles.label}>{(option.props && option.props.children) || option.label}</div>\n                    <div className={cn({ [styles.checkMark]: true, [styles.active]: active })}>\n                        <FiCheck size={24} />\n                    </div>\n                </>\n            );\n\n            return (\n                <div\n                    key={option.value || option.label}\n                    className={cn(\n                        styles.choice,\n                        active && styles.active,\n                        option.rounded && styles.rounded,\n                        choiceClassName,\n                        active && activeClassName,\n                        option.fullWidth && fullWidthClassName\n                    )}\n                    onClick={onChange && handleClick.bind(null, option.value)}\n                    {...option.props}\n                >\n                    {content}\n                </div>\n            );\n        });\n\n    if (grouped.size > 1) {\n        return (\n            <div style={style}>\n                {[...grouped.values()].map(({ id, label, options }) => (\n                    <div key={id}>\n                        <div className={cn(styles.groupLabel, groupLabelClassName)}>{label}</div>\n\n                        <div className={cn(styles.root, grid && styles.grid, containerClassName)}>\n                            {renderOptions(options)}\n                        </div>\n                    </div>\n                ))}\n            </div>\n        );\n    }\n\n    return (\n        <div className={cn(styles.root, grid && styles.grid, containerClassName)} style={style}>\n            {renderOptions(options)}\n        </div>\n    );\n}\n\nconst OptionValuePropType = PropTypes.oneOfType([PropTypes.string, PropTypes.number, PropTypes.bool]);\n\nexport const OptionProps = {\n    label: PropTypes.oneOfType([PropTypes.string, PropTypes.element]),\n    group: PropTypes.string,\n    value: OptionValuePropType,\n    icon: PropTypes.any,\n    fullWidth: PropTypes.bool,\n};\nexport const OptionGroupProps = {\n    label: PropTypes.any,\n    id: PropTypes.string,\n    index: PropTypes.number,\n    values: PropTypes.arrayOf(OptionValuePropType).isRequired,\n    icon: PropTypes.any,\n};\n\nListInput.propTypes = {\n    value: PropTypes.oneOfType([OptionValuePropType, PropTypes.arrayOf(OptionValuePropType)]),\n    options: PropTypes.arrayOf(PropTypes.shape(OptionProps)).isRequired,\n    groups: PropTypes.arrayOf(PropTypes.shape(OptionGroupProps)),\n    toggle: PropTypes.bool,\n    grid: PropTypes.bool,\n    multiple: PropTypes.bool,\n    renderOption: PropTypes.func,\n    style: PropTypes.object,\n    onChange: PropTypes.func.isRequired,\n    containerClassName: PropTypes.string,\n    choiceClassName: PropTypes.string,\n    activeClassName: PropTypes.string,\n    groupLabelClassName: PropTypes.string,\n    fullWidthClassName: PropTypes.string,\n};\n\nListInput.defaultProps = {\n    value: null,\n    groups: null,\n    toggle: false,\n    multiple: false,\n    grid: false,\n    onChoiceRef: null,\n    renderOption: null,\n    containerClassName: '',\n    choiceClassName: '',\n    activeClassName: '',\n    groupLabelClassName: '',\n    fullWidthClassName: '',\n};\n\nListInput.styles = styles;\n","// extracted by mini-css-extract-plugin\nexport default {\"orBar\":\"-ksh6W9Y\",\"choices\":\"_2TOD8_7Q\",\"choice\":\"_1S1VaBSq\",\"choiceWrapper\":\"_2iMNee72\",\"choiceContent\":\"_3_lUcu0U\",\"paymentButtons\":\"_1B5BoEYJ\"};","import PropTypes from 'prop-types';\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { useAsyncFn, useToggle } from 'react-use';\nimport { useHistory } from 'react-router-dom';\nimport { AnimatePresence } from 'framer-motion';\n\nimport { __t } from '@mssgme/shared';\nimport { getContourColor } from '@mssgme/helpers';\nimport { CheckableItem, LandingsPropTypes, ListInput } from '@mssgme/ui';\nimport { ThemedModal } from '../../UI';\nimport { useCoreContext, useFrontAPI, useModalThemes, usePaymentConfigs, useSavedOrders } from '../../hooks';\nimport { PAYMENT_PROVIDER_RENDERERS, PAYMENT_PROVIDERS } from './Providers';\nimport { FormFooter } from '../FormFooter';\n\nimport styles from './PaymentStep.module.scss';\n\nconst ONLINE_KEY = 'online';\n\nPaymentStep.propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n    disabled: PropTypes.bool,\n    onAccept: PropTypes.func.isRequired,\n};\n\nexport function PaymentStep({ order, disabled, onAccept }) {\n    const orderId = order._id;\n    const history = useHistory();\n    const api = useFrontAPI();\n    const payments = usePaymentConfigs();\n    const { removeCurrentOrderId } = useSavedOrders();\n    const { router } = useCoreContext();\n    const { contentStyle } = useModalThemes();\n    const [isPayNowModal, togglePayNowModal] = useToggle(false);\n\n    const { immediate, online } = useMemo(() => {\n        const mapper = ([provider]) => [provider, PAYMENT_PROVIDER_RENDERERS[provider]];\n\n        return {\n            immediate: payments.immediate.map(mapper),\n            online: payments.online.map(mapper),\n        };\n    }, [payments]);\n    const hasOnlineMethods = !!online.length;\n    const hasImmediateMethods = !!immediate.length;\n    const isJustOneOnlinePaymentMethod = hasOnlineMethods && !hasImmediateMethods;\n\n    const [{ loading }, handlePay] = useAsyncFn(\n        async (paymentMethod) => {\n            await api.orders.finalize({ orderId, payload: { paymentMethod } });\n\n            togglePayNowModal();\n            removeCurrentOrderId();\n\n            history.push(router.orders.toStatus(orderId, 'paid'));\n        },\n        [router, orderId]\n    );\n\n    const [selected, setSelected] = useState(hasOnlineMethods ? ONLINE_KEY : immediate[0]?.[0]);\n\n    const optionStyles = useMemo(() => {\n        const { backgroundColor, color, border } = getContourColor(\n            contentStyle.backgroundColor,\n            contentStyle.buttonBackground,\n            contentStyle.buttonTextColor\n        );\n\n        return {\n            option: {\n                backgroundColor,\n                color,\n                border: `1px solid ${border}`,\n            },\n            active: {\n                backgroundColor: contentStyle.buttonBackground,\n                color: contentStyle.buttonTextColor,\n                border: `1px solid ${contentStyle.buttonBackground}`,\n            },\n        };\n    }, [contentStyle]);\n    const options = useMemo(\n        () =>\n            [\n                hasOnlineMethods && {\n                    value: ONLINE_KEY,\n                    label: __t('pay_now'),\n                    icon: (\n                        <div>\n                            {online.map(([provider]) => {\n                                const found = PAYMENT_PROVIDERS.find((i) => i.provider === provider);\n                                const Icon = found?.icon;\n\n                                return Icon && <Icon key={provider} />;\n                            })}\n                        </div>\n                    ),\n                },\n                ...immediate.map(([key]) => ({\n                    value: key,\n                    label: __t(`payments_${key}`),\n                })),\n            ].filter(Boolean),\n        [online, immediate]\n    );\n\n    const renderOption = useCallback(\n        ({ option, active }) => {\n            const style = active ? optionStyles.active : optionStyles.option;\n\n            return (\n                <CheckableItem\n                    className={styles.choiceWrapper}\n                    contentClass={styles.choiceContent}\n                    style={style}\n                    active={active}\n                    color={style.color}\n                >\n                    {option.label}\n                    {option.icon}\n                </CheckableItem>\n            );\n        },\n        [optionStyles]\n    );\n\n    const handleNext = useCallback(async () => {\n        if (false === (await onAccept())) {\n            return;\n        }\n\n        if (selected === ONLINE_KEY) {\n            togglePayNowModal(true);\n        } else {\n            void handlePay(selected);\n        }\n    }, [selected, handlePay, onAccept]);\n\n    const onlineElements = (\n        <div className={styles.paymentButtons}>\n            {online.map(([key, Renderer]) => (\n                <Renderer key={key} order={order} disabled={loading || disabled} onPay={handlePay} />\n            ))}\n        </div>\n    );\n\n    return (\n        <div>\n            {isJustOneOnlinePaymentMethod ? (\n                onlineElements\n            ) : (\n                <div style={{ marginBottom: -8 }}>\n                    <ListInput\n                        containerClassName={styles.choices}\n                        choiceClassName={styles.choice}\n                        value={selected}\n                        options={options}\n                        renderOption={renderOption}\n                        onChange={setSelected}\n                    />\n\n                    {hasOnlineMethods && (\n                        <AnimatePresence>\n                            {isPayNowModal && (\n                                <ThemedModal\n                                    overlay\n                                    compact\n                                    padding\n                                    title={__t('choose_payment_method')}\n                                    onClose={() => togglePayNowModal(false)}\n                                >\n                                    {onlineElements}\n                                </ThemedModal>\n                            )}\n                        </AnimatePresence>\n                    )}\n                </div>\n            )}\n\n            {!isJustOneOnlinePaymentMethod && (\n                <FormFooter isFetching={loading} disabled={disabled} onClick={handleNext}>\n                    {hasOnlineMethods ? __t('choose_payment_method') : __t('make_order')}\n                </FormFooter>\n            )}\n        </div>\n    );\n}\n","import React from 'react';\nimport { Form, FormikProvider } from 'formik';\nimport { useAsyncFn } from 'react-use';\nimport { isEmpty } from 'lodash';\n\nimport { __t, SubscriptionFormBlockKind } from '@mssgme/shared';\nimport { useEventCallback } from '@mssgme/hooks';\nimport { ApiError, ValidationError } from '@mssgme/api-client';\nimport { LandingsPropTypes, useEnhancedFormik } from '@mssgme/ui';\nimport { DynamicFormInputs, useDynamicForm } from '../../UI';\nimport { useBlockTheme, useCRMData, useFrontAPI } from '../../hooks';\nimport { PaymentStep } from './PaymentStep';\n\nconst applyError = (err, helpers) => {\n    if (!ValidationError.is(err)) {\n        return;\n    }\n\n    for (const [fieldName, message] in Object.entries(err.errors)) {\n        helpers.setFieldError(fieldName, __t(message));\n    }\n};\n\nCheckoutForm.propTypes = {\n    order: LandingsPropTypes.order.isRequired,\n};\n\nexport function CheckoutForm({ order }) {\n    const orderId = order._id;\n    const api = useFrontAPI();\n    const { theme } = useBlockTheme({ kind: SubscriptionFormBlockKind });\n    const { form } = useCRMData();\n    const { validationSchema, initialValues, mapValues } = useDynamicForm({ items: form.fields });\n\n    const [{ loading }, onSubmit] = useAsyncFn(\n        async (fields, helpers) => {\n            try {\n                await api.orders.update({ orderId, payload: { fields } });\n            } catch (err) {\n                applyError(err, helpers);\n\n                throw err;\n            }\n        },\n        [orderId, mapValues]\n    );\n\n    const disabled = order.finalized || loading || !form.fields.length;\n\n    const formik = useEnhancedFormik({\n        initialValues,\n        validationSchema,\n        onSubmit,\n    });\n\n    const handleAccept = useEventCallback(async () => {\n        const valid = isEmpty(await formik.validateForm());\n\n        try {\n            await formik.submitForm();\n\n            // useEnhancedFormik swallows the error, thrown in onSubmit and treats it as 'result'.\n            // Apply it manually here\n            if (ApiError.is(formik.submit.result)) {\n                applyError(formik.submit.result, formik);\n\n                return false;\n            }\n        } catch (e) {\n            return false;\n        }\n\n        return valid;\n    });\n\n    return (\n        <div>\n            <FormikProvider value={formik}>\n                <Form>\n                    <DynamicFormInputs items={form.fields} theme={theme} />\n                </Form>\n            </FormikProvider>\n\n            <PaymentStep order={order} disabled={disabled} onAccept={handleAccept} />\n        </div>\n    );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"error\":\"eT8XvRxz\",\"root\":\"_3b4kbdIl\",\"cancelPrompt\":\"_1QvCGJoQ\"};","import React from 'react';\nimport { Provider } from 'react-redux';\n\nimport { AnimateableRoutes, usePresenceRemoval } from '@mssgme/ui';\nimport { useCoreContext } from '../../../hooks';\nimport { CollectionView, ProductView } from '../../Product';\nimport { CheckoutPage, PaymentStatusPage, UserOrderPage, UserOrdersPage } from '../../Order';\n\nconst ordersRouting = {\n    path: 'orders',\n    component: UserOrdersPage,\n    exact: true,\n    children: [\n        {\n            path: ':orderId',\n            component: UserOrderPage,\n            children: [\n                { path: 'payment/:status', component: PaymentStatusPage },\n            ],\n        },\n        {\n            path: ':orderId/checkout',\n            component: CheckoutPage,\n        },\n    ],\n};\n\nconst productRouting = {\n    path: 'p/:productSlug',\n    component: ProductView,\n    children: [\n        ordersRouting,\n    ],\n};\n\nconst routing = [\n    ordersRouting,\n    productRouting,\n    {\n        path: 'c/:collectionSlug',\n        component: CollectionView,\n        children: [\n            productRouting,\n        ],\n    },\n];\n\nexport function PageProductsRouting(props) {\n    const { store } = useCoreContext();\n\n    usePresenceRemoval();\n\n    const content = <AnimateableRoutes routing={routing} {...props} />;\n\n    return store ? <Provider store={store}>{content}</Provider> : content;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useLocation } from 'react-router-dom';\n\nimport { __t } from '@mssgme/shared';\nimport { Spinner } from '@mssgme/ui';\nimport { useEventCallback } from '@mssgme/hooks';\n\nimport { ThemedModal } from '../../UI';\nimport { useCoreContext, useFrontAPI, useSavedOrders } from '../../hooks';\nimport { useOrder } from '../useOrder';\nimport { OrderView } from './OrderView';\nimport { ShoppingCart } from './ShoppingCart';\n\nimport styles from './UserOrderPage.module.scss';\n\nexport const UserOrderPage = ({ orderId }) => {\n    const api = useFrontAPI();\n    const { state } = useLocation();\n    const { router } = useCoreContext();\n    const { order, loading, error, isNotFound } = useOrder(orderId);\n    const { removeOrderId } = useSavedOrders();\n    const backPath = state?.backPath || router.toHome();\n\n    const handleClosing = useEventCallback(async () => {\n        if (!order.items.length) {\n            removeOrderId(order._id);\n\n            return api.orders.remove({ orderId });\n        }\n    });\n\n    if (!(loading || error || order)) {\n        return null;\n    }\n\n    const title = order?.finalized ? `${__t('order_term')} #${order.feedback.order}` : __t('checkout');\n    const renderContent = (handleClose) => {\n        if (loading) {\n            return <Spinner />;\n        }\n\n        if (error) {\n            return (\n                <div className={styles.error}>\n                    {isNotFound ? __t('order_not_found') : error.message}\n                </div>\n            );\n        }\n\n        if (order.finalized) {\n            return <OrderView order={order} isFetching={loading} />;\n        }\n\n        return (\n            <ShoppingCart order={order} onClose={handleClose} />\n        );\n    };\n\n    return (\n        <ThemedModal overlay compact padding title={title} onClosing={handleClosing} onClose={backPath}>\n            {renderContent}\n        </ThemedModal>\n    );\n};\n\nUserOrderPage.propTypes = {\n    orderId: PropTypes.string.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { FaRegFrown, FaRegSmileBeam } from 'react-icons/fa';\n\nimport { __t } from '@mssgme/shared';\nimport { LandingsPropTypes } from '@mssgme/ui';\nimport { useCoreContext, useCRMData, useModalThemes, useViewOrder } from '../hooks';\nimport { SmartButton, ThemedButton, ThemedModal } from '../UI';\n// import { OrderItemsList } from './OrderItem';\n\nimport styles from './PaymentStatusPage.module.scss';\n\nPaymentStatusPage.propTypes = {\n    orderId: PropTypes.string.isRequired,\n    status: LandingsPropTypes.orderStatus.isRequired,\n};\n\nexport function PaymentStatusPage({ orderId, status }) {\n    const history = useHistory();\n    const { router } = useCoreContext();\n    const { form } = useCRMData();\n    const { contentStyle } = useModalThemes();\n    const { order, error } = useViewOrder(orderId);\n    const { action: { type, url, page } } = form.successURL;\n    const hasSuccessUrl = !!(type === 'page' ? page : url);\n    const resolvedStatus = status === 'pending' ? 'paid' : status;\n\n    useEffect(() => {\n        if (order) {\n            const { total: { amount, currency }, items } = order;\n            const createOrder = new CustomEvent('createOrder', {\n                detail: {\n                    orderId,\n                    value: amount,\n                    currency,\n                    items: items.map(({ name, _id, price: { amount }, quantity }) =>\n                        ({\n                            name,\n                            id: _id,\n                            price: amount,\n                            quantity,\n                        })\n                    ),\n                },\n            });\n\n            document.dispatchEvent(createOrder);\n        }\n    }, [order, orderId]);\n\n    const handleClose = useCallback(\n        (event) => {\n            if (event?.orderId) {\n                return history.push(router.orders.toView(event.orderId));\n            }\n\n            return history.push(router.toHome());\n        },\n        [router]\n    );\n\n    if (error) {\n        return (\n            <ThemedModal overlay compact showHeader={false} onClose={handleClose}>\n                <div className={styles.root}>\n                    <p>{__t('order_not_found')}</p>\n                </div>\n            </ThemedModal>\n        );\n    }\n\n    return (\n        <ThemedModal overlay compact showHeader={false} onClose={handleClose}>\n            {(onClose) => (\n                <div className={styles.root}>\n                    {resolvedStatus === 'failed' ? (\n                        <FaRegFrown size={60} className={styles.icon} />\n                    ) : (\n                        <FaRegSmileBeam size={60} className={styles.icon} />\n                    )}\n\n                    <h1 className={styles.title}>{__t(`payment_${resolvedStatus}`)}</h1>\n\n                    {resolvedStatus !== 'failed' && (\n                        <>\n                            <p className={styles.subTitle}>{form.successMessage || __t('payment_paid_subtitle')}</p>\n                            {hasSuccessUrl && (\n                                <div className={styles.subTitle}>\n                                    <SmartButton\n                                        link={form.successURL}\n                                        id={form.successURL.action._id}\n                                        style={{\n                                            background: contentStyle.buttonBackground,\n                                            color: contentStyle.buttonTextColor,\n                                            borderRadius: 10,\n                                            minHeight: 44,\n                                            marginBottom: 40,\n                                        }}\n                                        interactive\n                                    />\n                                </div>\n                            )}\n                        </>\n                    )}\n\n                    {/*<h2 className={styles.orderTitle}>{__t('order_adjusting')}</h2>*/}\n                    {/*{order && <OrderItemsList order={order} />}*/}\n\n                    <ThemedButton\n                        fullWidth\n                        style={{ marginTop: 16 }}\n                        theme={contentStyle}\n                        onClick={() => onClose({ orderId })}\n                    >\n                        {__t('view_order')}\n                    </ThemedButton>\n                    <ThemedButton\n                        fullWidth\n                        style={{ marginTop: 8 }}\n                        contour\n                        theme={contentStyle}\n                        onClick={onClose}\n                    >\n                        {__t('back_to_home')}\n                    </ThemedButton>\n                </div>\n            )}\n        </ThemedModal>\n    );\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Redirect, useLocation } from 'react-router-dom';\n\nimport { __t } from '@mssgme/shared';\nimport { Spinner } from '@mssgme/ui';\nimport { useCoreContext } from '../../hooks';\nimport { ThemedModal } from '../../UI';\nimport { useOrder } from '../useOrder';\nimport { CheckoutForm } from './CheckoutForm';\n\nimport styles from './CheckoutPage.module.scss';\n\nexport const CheckoutPage = ({ orderId }) => {\n    const { state } = useLocation();\n    const { router } = useCoreContext();\n    const { order, loading, error, isNotFound } = useOrder(orderId);\n    const backPath = state?.backPath || router.orders.toView(orderId);\n\n    if (!(loading || error || order)) {\n        return null;\n    }\n\n    const title = order?.finalized ? `${__t('order_term')} #${order.feedback.order}` : __t('checkout');\n    const renderContent = () => {\n        if (loading) {\n            return <Spinner />;\n        }\n\n        if (error) {\n            return (\n                <div className={styles.error}>\n                    {isNotFound ? __t('order_not_found') : error.message}\n                </div>\n            );\n        }\n\n        if (order.finalized) {\n            return <Redirect to={router.orders.toStatus(order._id, order.status)} />;\n        }\n\n        return (\n            <CheckoutForm order={order} />\n        );\n    };\n\n    return (\n        <ThemedModal overlay compact padding title={title} onClose={backPath}>\n            {renderContent}\n        </ThemedModal>\n    );\n};\n\nCheckoutPage.propTypes = {\n    orderId: PropTypes.string.isRequired,\n};\n","import PropTypes from 'prop-types';\nimport React, { useCallback, useEffect, useMemo } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { useAsyncFn } from 'react-use';\n\nimport { productsApi } from '@mssgme/lib';\nimport { __t, isMatchedBy } from '@mssgme/shared';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { usePresenceRemoval } from '@mssgme/ui';\nimport { ServiceContent, ThemedModal } from '../../UI';\nimport { useContacts, useCoreContext, useModalThemes, useWebsiteData } from '../../hooks';\n\nconst addUrl = (product, finalUrl) => {\n    const text = encodeURIComponent(\n        `${__t('buy_template')} ${product.title || product.name} - ${finalUrl}/p/${product.slug}`\n    );\n    const ref = `buy_${product._id}_${Date.now()}_${document.documentElement.lang}`;\n    const params = {\n        text,\n        ref,\n        start: ref,\n    };\n\n    return (messenger) => {\n        return { ...messenger, params };\n    };\n};\n\nexport function ProductView({ productSlug, collectionSlug, ...props }) {\n    const history = useHistory();\n    const website = useWebsiteData();\n    const collection = collectionSlug && website.collections.find(isMatchedBy(collectionSlug, 'slug'));\n    const fromCollection = history.location.state?.fromCollection || collection?._id || website.defaultCollectionId;\n    const workspaceId = website.workspace;\n    const { generateUrl } = useNavigationUtils();\n    const { contentStyle } = useModalThemes();\n    const { finalUrl } = useWebsiteData();\n    const { store } = useCoreContext();\n    const interactive = !!store;\n    const backPath = useMemo(() => generateUrl('../..'), [history.location]);\n\n    const [{ value: product, error }, getProduct] = useAsyncFn(\n        () => productsApi.loadBySlug(workspaceId, productSlug, fromCollection),\n        [workspaceId, productSlug, fromCollection]\n    );\n    const contactsMap = useMemo(() => product && addUrl(product, finalUrl), [product, finalUrl]);\n    const contacts = useContacts(contactsMap);\n    const is404 = error?.status === 404;\n\n    const handleClose = useCallback(() => history.push(backPath), [backPath]);\n\n    useEffect(() => {\n        if (fromCollection) {\n            void getProduct();\n        }\n    }, [productSlug, fromCollection]);\n\n    usePresenceRemoval();\n\n    return (\n        <ThemedModal overlay showHeader={!!error} title={error ? __t('error') : ''} onClose={handleClose}>\n            {(handleClose) =>\n                error ? (\n                    <div style={{ padding: 16, display: 'flex' }}>\n                        {is404 ? __t('product_not_found') : __t('no_products')}\n                    </div>\n                ) : product && (\n                    <ServiceContent\n                        {...props}\n                        themeStyles={contentStyle}\n                        service={product}\n                        contacts={contacts}\n                        isActive\n                        isPrev={false}\n                        isNext={false}\n                        interactive={interactive}\n                        backUrl={backPath}\n                        onClose={handleClose}\n                    />\n                )\n            }\n        </ThemedModal>\n    );\n}\n\nProductView.propTypes = {\n    productSlug: PropTypes.string.isRequired,\n    collectionSlug: PropTypes.string,\n};\n","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useCallback, useState } from 'react';\nimport { useAsyncFn, useDeepCompareEffect } from 'react-use';\nimport { Link, useHistory } from 'react-router-dom';\n\nimport { __t, isMatchedBy } from '@mssgme/shared';\nimport { useNavigationUtils } from '@mssgme/hooks';\nimport { productsApi } from '@mssgme/lib';\nimport { Spinner } from '@mssgme/ui';\nimport { ProductItem } from '../../../products';\nimport { useModalThemes, useWebsiteData } from '../../hooks';\nimport { Grid, MoreButton, ThemedModal } from '../../UI';\n\nimport styles from './CollectionView.module.scss';\n\nexport const CollectionView = ({ collectionSlug }) => {\n    const history = useHistory();\n    const website = useWebsiteData();\n    const collection = collectionSlug && website.collections.find(isMatchedBy(collectionSlug, 'slug'));\n    const workspaceId = website.workspace;\n    const websiteId = website._id;\n    const collectionId = collection?._id;\n\n    const { style } = useModalThemes();\n    const { generateUrl } = useNavigationUtils();\n    const [{ next, results }, setProducts] = useState({\n        next: null,\n        results: [],\n    });\n    const backPath = generateUrl('../..');\n\n    const [{ loading: isFetching }, getProducts] = useAsyncFn(\n        async (next, resetStore) => {\n            const productsStore = await productsApi.list(workspaceId, {\n                next,\n                collection: collectionId,\n                website: websiteId,\n                published: true,\n            });\n\n            setProducts((prevProducts) => ({\n                ...productsStore,\n                results: resetStore ? productsStore.results : prevProducts.results.concat(productsStore.results),\n            }));\n        },\n        [workspaceId, websiteId, collectionId]\n    );\n\n    const handleClose = useCallback(() => history.push(backPath), [backPath]);\n    const handleMore = useCallback(() => getProducts(next), [next, getProducts]);\n\n    useDeepCompareEffect(() => {\n        if (collection) {\n            void getProducts(null, true);\n        }\n    }, [collection, getProducts]);\n\n    if (!collection) {\n        return null;\n    }\n\n    return (\n        <ThemedModal overlay title={collection.default ? __t('all_products') : collection.name} onClose={handleClose}>\n            <div className={styles.content}>\n                {results.length > 0 && (\n                    <Grid itemClassName={styles.animated}>\n                        {results.map((item) => (\n                            <ProductItem\n                                key={item._id}\n                                product={item}\n                                tag={Link}\n                                to={{\n                                    pathname: generateUrl(\n                                        `../../c/${collection.slug.toLowerCase()}/p/${item.slug.toLowerCase()}`\n                                    ),\n                                    state: {\n                                        fromCollection: collection._id,\n                                    },\n                                }}\n                                themeStyles={style}\n                            />\n                        ))}\n                    </Grid>\n                )}\n\n                {isFetching ? (\n                    <Spinner />\n                ) : (\n                    !!next && (\n                        <div className={cn(styles.moreBtnContainer, styles.animated)}>\n                            <MoreButton\n                                className={styles.moreBtn}\n                                style={style}\n                                onClick={handleMore}\n                                disabled={isFetching}\n                            />\n                        </div>\n                    )\n                )}\n            </div>\n        </ThemedModal>\n    );\n};\n\nCollectionView.propTypes = {\n    collectionSlug: PropTypes.string,\n};\n","export default window.PLANS || {};\n","export default (entityOrId) => entityOrId && String(entityOrId._id || entityOrId);\n","// extracted by mini-css-extract-plugin\nexport default {\"flex\":\"_1ZERlGsb\",\"slide\":\"_3EGhJf6J\",\"nonInteractive\":\"HkzJqkX_\"};","import cn from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { useMemo } from 'react';\n\nimport { Swiper as BaseSwiper, SwiperSlide } from 'swiper/react';\nimport SwiperCore, { Autoplay, EffectFade, EffectFlip, Pagination, Lazy, Navigation } from 'swiper';\n\nimport { cls } from '@mssgme/helpers';\nimport { renderNode } from '../../helpers';\n\nimport styles from './Swiper.module.scss';\n\n// todo: direct \"import 'swiper/swiper.scss'\" mangles the identifiers and :global can't be used due to sass bug\n//  should either update swiper (if styles import was changed in newer versions) or fix scss-build stack (downgrade?)\nrequire('swiper/swiper.scss');\nrequire('swiper/components/pagination/pagination.scss');\nrequire('swiper/components/effect-flip/effect-flip.scss');\nrequire('swiper/components/effect-fade/effect-fade.scss');\n\nSwiperCore.use([Pagination, Lazy, Navigation, Autoplay, EffectFade, EffectFlip]);\n\nexport function Swiper({\n    children,\n    flex,\n    perView = 1,\n    initialSlide = 0,\n    allowTouchMove = true,\n    interactive = true,\n    forcePerView,\n    slideClass,\n    pagination,\n    slideStyle,\n    ...rest\n}) {\n    const array = (Array.isArray(children) ? children : React.Children.toArray(children)).filter(Boolean);\n    const count = array.length;\n    const exceedsPerView = count > perView;\n    const showPagination = pagination !== false;\n    const hasPagination = exceedsPerView && showPagination;\n    const slidesPerView = forcePerView || exceedsPerView ? perView : count;\n    const paginationOptions = useMemo(() => {\n        if (!hasPagination) {\n            return false; // this will hide pagination AND disable swiping behavior\n        }\n\n        return showPagination\n            ? { clickable: true, ...pagination } // pagination + swiping enabled\n            : { el: null }; // this will hide pagination but preserve swiping behavior\n    }, [hasPagination, showPagination, pagination]);\n\n    return (\n        <BaseSwiper\n            key={`${exceedsPerView}-${showPagination}-${count}`}\n            observer\n            resizeObserver\n            spaceBetween={0}\n            slidesPerView={slidesPerView}\n            allowTouchMove={allowTouchMove && exceedsPerView}\n            initialSlide={initialSlide}\n            pagination={paginationOptions}\n            {...cls([styles.root, flex && styles.flex], rest)}\n        >\n            {array.map((child, index) => (\n                <SwiperSlide\n                    key={child.key}\n                    style={renderNode(slideStyle, index)}\n                    className={cn(styles.slide, !interactive && styles.nonInteractive, slideClass)}\n                >\n                    {child}\n                </SwiperSlide>\n            ))}\n        </BaseSwiper>\n    );\n}\n\nSwiper.propTypes = {\n    children: PropTypes.any.isRequired,\n    initialSlide: PropTypes.number,\n    perView: PropTypes.number,\n    forcePerView: PropTypes.bool,\n    interactive: PropTypes.bool,\n    allowTouchMove: PropTypes.bool,\n    flex: PropTypes.bool,\n    slideClass: PropTypes.string,\n    slideStyle: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n    pagination: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\n};\n","import { satisfies } from 'compare-versions';\nimport { memoize } from 'lodash';\n\n/**\n * @param {string} base Base version\n * @param {string} versionString Version comparison\n * @returns {bool} Comparison result from expression `base` `versionString`\n */\nexport default memoize(\n    (base, version) => {\n        // remove alpha/beta/rc portion, or version '1.0.0-alpha' would not satisfy constraint '>=1.0.0'\n        base = base.includes('-') ? base.split('-', 2)[0] : base;\n\n        return satisfies(base, version);\n    },\n    (base, versionString) => `${base}${versionString}`\n);\n"],"sourceRoot":""}